!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=20)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2);var a=function(){function e(){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleResize=function(){n.captureMode||n.resize()},this.handleUpdate=function(){n.update(n.startTime),n.capturing&&(console.log("capture"),n.cc.capture(n.renderer.domElement)),requestAnimationFrame(n.handleUpdate)},this.ratio=t.devicePixelRatio,this.width=t.innerWidth*this.ratio,this.height=t.innerHeight*this.ratio,this.startTime=0,t.addEventListener("resize",this.handleResize,!1),this.capture(),this.setup(),this.debug(),this.init(),this.handleResize(),this.handleUpdate()}return r(e,[{key:"capture",value:function(){var e=this;this.captureMode="false"===(0,i.getUrlParam)("controls")&&"true"===(0,i.getUrlParam)("capture"),this.captureMode&&(document.body.className="hide",this.width=420,this.height=360,this.loopDuration=1,this.capturing=!1,this.cc=new CCapture({verbose:!1,display:!0,framerate:60,motionBlurFrames:16,quality:99,format:"gif",timeLimit:this.loopDuration,frameLimit:0,autoSaveTime:0,workersPath:"js/"}),setTimeout(function(){e.capturing=!0,e.cc.start(),e.startTime=t.performance.now()}))}},{key:"setup",value:function(){}},{key:"debug",value:function(){}},{key:"init",value:function(){}},{key:"resize",value:function(){}},{key:"update",value:function(){}}]),e}();e.default=a}).call(e,n(0))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});e.getUrlParam=function(e){return new t.URL(t.location.href).searchParams.get(e)}}).call(e,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"chunks",function(){return A}),n.d(e,"utils",function(){return ft}),n.d(e,"cameras",function(){return Pt}),n.d(e,"shaders",function(){return Rt}),n.d(e,"helpers",function(){return Bt}),n.d(e,"constants",function(){return l}),n.d(e,"Renderer",function(){return ee}),n.d(e,"Object3",function(){return _t}),n.d(e,"Scene",function(){return Yt}),n.d(e,"Model",function(){return Ut}),n.d(e,"Mesh",function(){return kt}),n.d(e,"Texture",function(){return At}),n.d(e,"RenderTarget",function(){return Xt}),n.d(e,"Composer",function(){return ie}),n.d(e,"Pass",function(){return ne}),n.d(e,"Performance",function(){return ae});var r={factory:function(){return"\n        // factory light\n        vec3 inverseLightDirection = normalize(vec3(-0.25, -0.25, 1.0));\n        vec3 directionalColor = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n        vec3 factory = mix(vec3(0.0), directionalColor, 0.989); // light intensity\n        base.rgb *= factory;\n\n        "+r.directional()},directional:function(){return"\n            // vec3 dcolor = vec3(0.01);\n            //\n            // for (int i = 0; i < MAX_DIRECTIONAL; i++) {\n            //     vec3 inverseLightDirection = normalize(directionalLights[i].dlPosition.xyz);\n            //     vec3 light = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n            //     vec3 directionalColor = directionalLights[i].dlColor.rgb * light;\n            //     dcolor += mix(dcolor, directionalColor, directionalLights[i].flIntensity);\n            // }\n            // dcolor /= float(MAX_DIRECTIONAL);\n            //\n            // base.rgb *= dcolor;\n        "}};var i={linear:function(){return"\n        if (fogSettings.x > 0.0) {\n            \n    float fogStart = fogSettings.y;\n    float fogEnd = fogSettings.z;\n    float fogDensity = fogSettings.a;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = (fogEnd - dist) / (fogEnd - fogStart);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential:function(){return"\n        if (fogSettings.x > 0.0) {\n            \n    float fogStart = fogSettings.y;\n    float fogEnd = fogSettings.z;\n    float fogDensity = fogSettings.a;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp(dist * fogDensity);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential2:function(){return"\n        if (fogSettings.x > 0.0) {\n            \n    float fogStart = fogSettings.y;\n    float fogEnd = fogSettings.z;\n    float fogDensity = fogSettings.a;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp((dist * fogDensity) * (dist * fogDensity));\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"}},a=1e3,o=2500,s={POINTS:0,LINES:1,TRIANGLES:4},u={FRONT:0,BACK:1,BOTH:2},c={WEBGL:"webgl",WEBGL2:"webgl2"},l=Object.freeze({MAX_DIRECTIONAL:1,DIRECTIONAL_LIGHT:a,SHADER_BASIC:2e3,SHADER_DEFAULT:2001,SHADER_BILLBOARD:2002,SHADER_SHADOW:2003,SHADER_SEM:2004,SHADER_CUSTOM:o,DRAW:s,SIDE:u,CONTEXT:c}),h="lowww-core",f="1.1.3",d=null,v=null,p=document.createElement("canvas").getContext(c.WEBGL),m=document.createElement("canvas").getContext(c.WEBGL2),g={vertexArrayObject:p.getExtension("OES_vertex_array_object"),instancedArrays:p.getExtension("ANGLE_instanced_arrays"),standardDerivatives:p.getExtension("OES_standard_derivatives"),depthTextures:p.getExtension("WEBGL_depth_texture")},M=function(t){var e=m&&c.WEBGL2,n=p&&c.WEBGL;return(v=t||e||n)===c.WEBGL2&&(g.vertexArrayObject=!0,g.instancedArrays=!0,g.standardDerivatives=!0,g.depthTexture=!0),v},b=function(){return v},y=function(t){d=t,b()===c.WEBGL&&(g.vertexArrayObject=d.getExtension("OES_vertex_array_object"),g.instancedArrays=d.getExtension("ANGLE_instanced_arrays"),g.standardDerivatives=d.getExtension("OES_standard_derivatives"),g.depthTextures=d.getExtension("WEBGL_depth_texture"))},x=function(){return d},_=function(){return g},E={scene:function(){return b()===c.WEBGL2?"\n            uniform perScene {\n                mat4 projectionMatrix;\n                mat4 viewMatrix;\n                vec4 fogSettings;\n                vec4 fogColor;\n                float iGlobalTime;\n                vec4 globalClipSettings;\n                vec4 globalClipPlane0;\n                vec4 globalClipPlane1;\n                vec4 globalClipPlane2;\n            };":"\n        uniform mat4 projectionMatrix;\n        uniform mat4 viewMatrix;\n        uniform vec4 fogSettings;\n        uniform vec4 fogColor;\n        uniform float iGlobalTime;\n        uniform vec4 globalClipSettings;\n        uniform vec4 globalClipPlane0;\n        uniform vec4 globalClipPlane1;\n        uniform vec4 globalClipPlane2;"},model:function(){return b()===c.WEBGL2?"\n            uniform perModel {\n                mat4 modelMatrix;\n                mat4 normalMatrix;\n                vec4 localClipSettings;\n                vec4 localClipPlane0;\n                vec4 localClipPlane1;\n                vec4 localClipPlane2;\n            };":"\n            uniform mat4 modelMatrix;\n            uniform mat4 normalMatrix;\n            uniform vec4 localClipSettings;\n            uniform vec4 localClipPlane0;\n            uniform vec4 localClipPlane1;\n            uniform vec4 localClipPlane2;"},lights:function(){return b()===c.WEBGL2?"\n                #define MAX_DIRECTIONAL 1\n\n                struct Directional {\n                    vec4 dlPosition;\n                    vec4 dlColor;\n                    float flIntensity;\n                };\n\n                uniform directional {\n                    Directional directionalLights[MAX_DIRECTIONAL];\n                };":"\n            #define MAX_DIRECTIONAL 1\n\n            struct Directional {\n                vec4 dlPosition;\n                vec4 dlColor;\n                float flIntensity;\n            };\n\n            uniform Directional directionalLights[MAX_DIRECTIONAL];"}},w={vertex_pre:function(){return"\n        out vec4 local_eyespace;\n        out vec4 global_eyespace;"},vertex:function(){return"\n        local_eyespace = modelMatrix * vec4(a_position, 1.0);\n        global_eyespace = viewMatrix * modelMatrix * vec4(a_position, 1.0);"},fragment_pre:function(){return"\n        in vec4 local_eyespace;\n        in vec4 global_eyespace;"},fragment:function(){return"\n        if (localClipSettings.x > 0.0) {\n            if(dot(local_eyespace, localClipPlane0) < 0.0) discard;\n            if(dot(local_eyespace, localClipPlane1) < 0.0) discard;\n            if(dot(local_eyespace, localClipPlane2) < 0.0) discard;\n        }\n\n        if (globalClipSettings.x > 0.0) {\n            if(dot(global_eyespace, globalClipPlane0) < 0.0) discard;\n            if(dot(global_eyespace, globalClipPlane1) < 0.0) discard;\n            if(dot(global_eyespace, globalClipPlane2) < 0.0) discard;\n        }"}},P={vertex:function(){return b(),c.WEBGL2,""},fragment:function(){return b()===c.WEBGL2?"":"\n        #extension GL_OES_standard_derivatives : enable"}};var T={vertex_pre:function(){return"\n        uniform mat4 shadowMatrix;\n        out vec4 vShadowCoord;"},vertex:function(){return"\n        vShadowCoord = shadowMatrix * modelMatrix * vec4(a_position, 1.0);"},fragment_pre:function(){return"\n        uniform sampler2D shadowMap;\n        in vec4 vShadowCoord;\n\n        \n    float hardShadow1(sampler2D shadowMap) {\n        vec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n        vec2 uv = shadowCoord.xy;\n        float shadow = texture(shadowMap, uv).r;\n\n        float visibility = 1.0;\n        float shadowAmount = 0.5;\n\n        float cosTheta = clamp(dot(v_normal, vShadowCoord.xyz), 0.0, 1.0);\n        float bias = 0.00005 * tan(acos(cosTheta)); // cosTheta is dot( n,l ), clamped between 0 and 1\n        bias = clamp(bias, 0.0, 0.001);\n\n        if (shadow < shadowCoord.z - bias){\n            visibility = shadowAmount;\n        }\n        return visibility;\n    }\n\n    float hardShadow2(sampler2D shadowMap) {\n        vec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n        vec2 uv = shadowCoord.xy;\n\n        float lightDepth1 = texture(shadowMap, uv).r;\n        float lightDepth2 = clamp(shadowCoord.z, 0.0, 1.0);\n        float bias = 0.0001;\n\n        return step(lightDepth2, lightDepth1+bias);\n    }\n\n    float hardShadow3(sampler2D shadowMap) {\n        vec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n        vec2 uv = shadowCoord.xy;\n\n        float visibility = 1.0;\n        float shadowAmount = 0.5;\n        float bias = 0.00005;\n\n        vec2 poissonDisk[16];\n        poissonDisk[0] = vec2(-0.94201624, -0.39906216);\n        poissonDisk[1] = vec2(0.94558609, -0.76890725);\n        poissonDisk[2] = vec2(-0.094184101, -0.92938870);\n        poissonDisk[3] = vec2(0.34495938, 0.29387760);\n        poissonDisk[4] = vec2(-0.91588581, 0.45771432);\n        poissonDisk[5] = vec2(-0.81544232, -0.87912464);\n        poissonDisk[6] = vec2(-0.38277543, 0.27676845);\n        poissonDisk[7] = vec2(0.97484398, 0.75648379);\n        poissonDisk[8] = vec2(0.44323325, -0.97511554);\n        poissonDisk[9] = vec2(0.53742981, -0.47373420);\n        poissonDisk[10] = vec2(-0.26496911, -0.41893023);\n        poissonDisk[11] = vec2(0.79197514, 0.19090188);\n        poissonDisk[12] = vec2(-0.24188840, 0.99706507);\n        poissonDisk[13] = vec2(-0.81409955, 0.91437590);\n        poissonDisk[14] = vec2(0.19984126, 0.78641367);\n        poissonDisk[15] = vec2(0.14383161, -0.14100790);\n\n        for (int i=0;i<16;i++) {\n            if ( texture(shadowMap, uv + poissonDisk[i]/700.0).r < shadowCoord.z-bias ){\n                visibility -= 0.02;\n            }\n        }\n\n        return visibility;\n    }\n\n    "},fragment:function(){return"\n        // shadows\n        float shadow = 1.0;\n\n        // OPTION 1\n        shadow = hardShadow1(shadowMap);\n\n        base *= shadow;\n        "}},A=Object.freeze({UBO:E,LIGHT:r,FOG:i,NOISE:function(){return"\n    vec3 mod289(vec3 x){return x-floor(x*(1./289.))*289.;}vec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}vec4 permute(vec4 x){return mod289((x*34.+1.)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284-.853735*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.-15.)+10.);}float cnoise(vec3 P){vec3 Pi0=floor(P),Pi1=Pi0+vec3(1.);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep),Pi1=mod(Pi0+vec3(1.),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}\n"},CLIPPING:w,EXTENSIONS:P,SHADOW:T}),O=1e-6,R="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function S(){var t=new R(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function L(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],v=e[11],p=e[12],m=e[13],g=e[14],M=e[15],b=n[0],y=n[1],x=n[2],_=n[3];return t[0]=b*r+y*s+x*h+_*p,t[1]=b*i+y*u+x*f+_*m,t[2]=b*a+y*c+x*d+_*g,t[3]=b*o+y*l+x*v+_*M,b=n[4],y=n[5],x=n[6],_=n[7],t[4]=b*r+y*s+x*h+_*p,t[5]=b*i+y*u+x*f+_*m,t[6]=b*a+y*c+x*d+_*g,t[7]=b*o+y*l+x*v+_*M,b=n[8],y=n[9],x=n[10],_=n[11],t[8]=b*r+y*s+x*h+_*p,t[9]=b*i+y*u+x*f+_*m,t[10]=b*a+y*c+x*d+_*g,t[11]=b*o+y*l+x*v+_*M,b=n[12],y=n[13],x=n[14],_=n[15],t[12]=b*r+y*s+x*h+_*p,t[13]=b*i+y*u+x*f+_*m,t[14]=b*a+y*c+x*d+_*g,t[15]=b*o+y*l+x*v+_*M,t}function C(t,e,n,r){var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,c=void 0,l=void 0,h=void 0,f=void 0,d=void 0,v=e[0],p=e[1],m=e[2],g=r[0],M=r[1],b=r[2],y=n[0],x=n[1],_=n[2];return Math.abs(v-y)<O&&Math.abs(p-x)<O&&Math.abs(m-_)<O?L(t):(l=v-y,h=p-x,f=m-_,i=M*(f*=d=1/Math.sqrt(l*l+h*h+f*f))-b*(h*=d),a=b*(l*=d)-g*f,o=g*h-M*l,(d=Math.sqrt(i*i+a*a+o*o))?(i*=d=1/d,a*=d,o*=d):(i=0,a=0,o=0),s=h*o-f*a,u=f*i-l*o,c=l*a-h*i,(d=Math.sqrt(s*s+u*u+c*c))?(s*=d=1/d,u*=d,c*=d):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=a,t[5]=u,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*v+a*p+o*m),t[13]=-(s*v+u*p+c*m),t[14]=-(l*v+h*p+f*m),t[15]=1,t)}function F(){var t=new R(3);return t[0]=0,t[1]=0,t[2]=0,t}function U(t,e,n){var r=new R(3);return r[0]=t,r[1]=e,r[2]=n,r}function N(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function k(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t}var z,j=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)};z=F();function B(){var t=new R(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function q(t,e,n,r){var i=new R(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}!function(){var t=B()}();function G(){var t=new R(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Y(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=n[0],c=n[1],l=n[2],h=n[3],f=void 0,d=void 0,v=void 0,p=void 0,m=void 0;return(d=i*u+a*c+o*l+s*h)<0&&(d=-d,u=-u,c=-c,l=-l,h=-h),1-d>1e-6?(f=Math.acos(d),v=Math.sin(f),p=Math.sin((1-r)*f)/v,m=Math.sin(r*f)/v):(p=1-r,m=r),t[0]=p*i+m*u,t[1]=p*a+m*c,t[2]=p*o+m*l,t[3]=p*s+m*h,t}var X,W,V,H,Z,K,Q,$=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o),t};X=F(),W=U(1,0,0),V=U(0,1,0),H=G(),Z=G(),(K=new R(9))[0]=1,K[1]=0,K[2]=0,K[3]=0,K[4]=1,K[5]=0,K[6]=0,K[7]=0,K[8]=1,Q=K;!function(){var t,e=((t=new R(2))[0]=0,t[1]=0,t)}();function J(t){return U(t>>16,t>>8&255,255&t)}function tt(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?U(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null}function et(t){var e=t.toString(16);return 1===e.length?"0"+e:e}var nt=Object.freeze({hexIntToRgb:J,hexStringToRgb:tt,componentToHex:et,rgbToHex:function(t,e,n){return"#"+et(t)+et(e)+et(n)},convert:function(t){var e,n=F(),r="number"==typeof t?J(t):tt(t);return N(n,U((e=r)[0]/255,e[1]/255,e[2]/255)),n}});var rt=Object.freeze({randomRange:function(t,e){return Math.random()*(e-t)+t},mod:function(t,e){return(t%e+e)%e}}),it=function(t){return new RegExp("\\b"+t+"\\b","gi")},at=function(t){return new RegExp(""+t,"gi")},ot=[{match:it("in"),replace:"attribute"},{match:it("out"),replace:"varying"}],st=[{match:it("in"),replace:"varying"},{match:at("out vec4 outColor;"),replace:""},{match:it("outColor"),replace:"gl_FragColor"},{match:it("textureProj"),replace:"texture2DProj"},{match:it("texture"),replace:function(t){var e=new RegExp("\\btexture\\b","gi"),n=new RegExp("\\btexture\\b","i"),r=new RegExp(/texture\(([^)]+)\)/,"i"),i=t.match(e),a="";if(null===i)return t;var o=!0,s=!1,u=void 0;try{for(var c,l=i[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){c.value;var h=t.match(r)[0];if(h){var f=h.replace("texture(","").split(",")[0],d=t.match("(.*?) "+f,"i")[1].replace(/^\s+|\s+$/gm,"");switch(d=d.split(" ")[1]){case"sampler2D":a="texture2D";break;case"samplerCube":a="textureCube"}}t=t.replace(n,a)}}catch(t){s=!0,u=t}finally{try{!o&&l.return&&l.return()}finally{if(s)throw u}}return t}}],ut=[{match:at("#version 300 es"),replace:""}],ct=[].concat(ut,ot),lt=[].concat(ut,st);function ht(t,e){return b()===c.WEBGL2?t:(("vertex"===e?ct:lt).forEach(function(e){t="function"==typeof e.replace?e.replace(t):t.replace(e.match,e.replace)}),t)}var ft=Object.freeze({color:nt,math:rt,glsl3to1:ht}),dt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},vt=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),pt=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},mt=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},gt=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},Mt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;dt(this,t),this.data=U(e,n,r)}return vt(t,[{key:"set",value:function(t,e,n){this.x=t,this.y=e,this.z=n}},{key:"x",set:function(t){this.data[0]=t},get:function(){return this.data[0]}},{key:"y",set:function(t){this.data[1]=t},get:function(){return this.data[1]}},{key:"z",set:function(t){this.data[2]=t},get:function(){return this.data[2]}}]),t}(),bt=0,yt=0,xt=F(),_t=function(){function t(){dt(this,t),this.uid=bt++,this.parent=null,this.children=[],this.position=new Mt,this.rotation=new Mt,this.scale=new Mt(1,1,1),this._transparent=!1,this._visible=!0,this.quaternion=G(),this.target=F(),this.up=U(0,1,0),this.lookToTarget=!1,this.matrices={parent:S(),model:S(),lookAt:S()},this.dirty={sorting:!1,transparent:!1,attributes:!1,shader:!1},this.sceneGraphSorter=!1}return vt(t,[{key:"updateMatrices",value:function(){var t,e,n,r,i;L(this.matrices.parent),L(this.matrices.model),L(this.matrices.lookAt),(t=this.quaternion)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.parent&&(I(this.matrices.parent,this.parent.matrices.model),D(this.matrices.model,this.matrices.model,this.matrices.parent)),this.lookToTarget?(!function(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],h=a-n[1],f=o-n[2],d=l*l+h*h+f*f;d>0&&(l*=d=1/Math.sqrt(d),h*=d,f*=d);var v=u*f-c*h,p=c*l-s*f,m=s*h-u*l;(d=v*v+p*p+m*m)>0&&(v*=d=1/Math.sqrt(d),p*=d,m*=d),t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=h*m-f*p,t[5]=f*v-l*m,t[6]=l*p-h*v,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1}(this.matrices.lookAt,this.position.data,this.target,this.up),D(this.matrices.model,this.matrices.model,this.matrices.lookAt)):(function(t,e,n){var r=n[0],i=n[1],a=n[2],o=void 0,s=void 0,u=void 0,c=void 0,l=void 0,h=void 0,f=void 0,d=void 0,v=void 0,p=void 0,m=void 0,g=void 0;e===t?(t[12]=e[0]*r+e[4]*i+e[8]*a+e[12],t[13]=e[1]*r+e[5]*i+e[9]*a+e[13],t[14]=e[2]*r+e[6]*i+e[10]*a+e[14],t[15]=e[3]*r+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],u=e[2],c=e[3],l=e[4],h=e[5],f=e[6],d=e[7],v=e[8],p=e[9],m=e[10],g=e[11],t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=l,t[5]=h,t[6]=f,t[7]=d,t[8]=v,t[9]=p,t[10]=m,t[11]=g,t[12]=o*r+l*i+v*a+e[12],t[13]=s*r+h*i+p*a+e[13],t[14]=u*r+f*i+m*a+e[14],t[15]=c*r+d*i+g*a+e[15])}(this.matrices.model,this.matrices.model,this.position.data),function(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-r*s}(this.quaternion,this.quaternion,this.rotation.x),function(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);t[0]=r*u-a*s,t[1]=i*u+o*s,t[2]=a*u+r*s,t[3]=o*u-i*s}(this.quaternion,this.quaternion,this.rotation.y),function(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=a*u+o*s,t[3]=o*u-a*s}(this.quaternion,this.quaternion,this.rotation.z),e=xt,n=this.quaternion,r=2*Math.acos(n[3]),0!=(i=Math.sin(r/2))?(e[0]=n[0]/i,e[1]=n[1]/i,e[2]=n[2]/i):(e[0]=1,e[1]=0,e[2]=0),yt=r,function(t,e,n,r){var i,a,o,s,u,c,l,h,f,d,v,p,m,g,M,b,y,x,_,E,w,P,T,A,R=r[0],S=r[1],I=r[2],L=Math.sqrt(R*R+S*S+I*I);Math.abs(L)<O||(R*=L=1/L,S*=L,I*=L,i=Math.sin(n),o=1-(a=Math.cos(n)),s=e[0],u=e[1],c=e[2],l=e[3],h=e[4],f=e[5],d=e[6],v=e[7],p=e[8],m=e[9],g=e[10],M=e[11],b=R*R*o+a,y=S*R*o+I*i,x=I*R*o-S*i,_=R*S*o-I*i,E=S*S*o+a,w=I*S*o+R*i,P=R*I*o+S*i,T=S*I*o-R*i,A=I*I*o+a,t[0]=s*b+h*y+p*x,t[1]=u*b+f*y+m*x,t[2]=c*b+d*y+g*x,t[3]=l*b+v*y+M*x,t[4]=s*_+h*E+p*w,t[5]=u*_+f*E+m*w,t[6]=c*_+d*E+g*w,t[7]=l*_+v*E+M*w,t[8]=s*P+h*T+p*A,t[9]=u*P+f*T+m*A,t[10]=c*P+d*T+g*A,t[11]=l*P+v*T+M*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this.matrices.model,this.matrices.model,yt,xt)),function(t,e,n){var r=n[0],i=n[1],a=n[2];t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this.matrices.model,this.matrices.model,this.scale.data)}},{key:"init",value:function(){}},{key:"add",value:function(t){t.parent=this,this.children.push(t),this.dirty.sorting=!0}},{key:"remove",value:function(t){var e=this.children.indexOf(t);-1!==e&&(t.destroy(),this.children.splice(e,1),this.dirty.sorting=!0)}},{key:"traverse",value:function(t){void 0===t&&(t=this,this.sceneGraphSorter=!0);for(var e=0;e<t.children.length;e++)this.traverse(t.children[e]);return null!==t.parent&&t.updateMatrices(),(t.dirty.sorting||t.dirty.transparent)&&(t.dirty.transparent=!1,this.sceneGraphSorter=!0),this.sceneGraphSorter}},{key:"transparent",set:function(t){this.dirty.transparent=this.transparent!==t,this._transparent=t},get:function(){return this._transparent}},{key:"visible",set:function(t){this.dirty.sorting=this.visible!==t,this._visible=t},get:function(){return this._visible}}]),t}(),Et=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,e);var n=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{left:-1,right:1,top:1,bottom:-1,near:-1e3,far:1e3},t),n.matrices.projection=S(),n}return pt(e,_t),vt(e,[{key:"lookAt",value:function(t){N(this.target,t)}},{key:"updateCameraMatrix",value:function(){var t,e,n,r,i,a,o,s,u,c;t=this.matrices.projection,e=this.left,n=this.right,r=this.bottom,i=this.top,a=this.near,o=this.far,s=1/(e-n),u=1/(r-i),c=1/(a-o),t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(o+a)*c,t[15]=1}}]),e}(),wt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,e);var n=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:1,far:1e3,fov:35},t),n.matrices.projection=S(),n}return pt(e,_t),vt(e,[{key:"lookAt",value:function(t){N(this.target,t)}},{key:"updateCameraMatrix",value:function(t,e){var n,r,i,a,o,s,u;n=this.matrices.projection,r=this.fov*(Math.PI/180),i=t/e,a=this.near,o=this.far,s=1/Math.tan(r/2),u=1/(a-o),n[0]=s/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(o+a)*u,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*o*a*u,n[15]=0}}]),e}(),Pt=Object.freeze({Orthographic:Et,Perspective:wt}),Tt=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t);var n=e.color||U(1,1,1),r="#version 300 es\n            "+P.vertex()+"\n\n            in vec3 a_position;\n\n            "+E.scene()+"\n            "+E.model()+"\n\n            void main() {\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n            }\n        ",a="#version 300 es\n            "+P.fragment()+"\n\n            precision highp float;\n            precision highp int;\n\n            "+E.scene()+"\n\n            uniform vec3 u_color;\n\n            out vec4 outColor;\n\n            void main() {\n                vec4 base = vec4(u_color, 1.0);\n\n                "+i.linear()+"\n\n                outColor = base;\n            }\n        ";return Object.assign({type:2e3,mode:!0===e.wireframe?s.LINES:s.TRIANGLES},{vertex:r,fragment:a,uniforms:{u_color:{type:"vec3",value:n}}})},At=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t);var n=x();Object.assign(this,{magFilter:n.NEAREST,minFilter:n.NEAREST,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,transparent:!1},e);var r=new Uint8Array([255,255,255,255]);this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),this.transparent&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.bindTexture(n.TEXTURE_2D,null)}return vt(t,[{key:"fromImage",value:function(t){var e=this,n=new Image;n.crossOrigin="",n.onload=function(){e.update(n)},n.src=t}},{key:"update",value:function(t){var e=x();e.bindTexture(e.TEXTURE_2D,this.texture),e.generateMipmap(e.TEXTURE_2D),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}}]),t}(),Ot=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t);var n=e.color||U(1,1,1);this.map=new At({transparent:!0}),e.map&&this.map.fromImage(e.map),e.texture&&(this.map=e.texture);var a="#version 300 es\n            "+P.vertex()+"\n\n            in vec3 a_position;\n            in vec3 a_normal;\n            in vec2 a_uv;\n\n            "+E.scene()+"\n            "+E.model()+"\n            "+w.vertex_pre()+"\n            "+T.vertex_pre()+"\n\n            out vec3 fragVertexEc;\n            out vec2 v_uv;\n            out vec3 v_normal;\n\n            void main() {\n                vec4 worldPosition = modelMatrix * vec4(a_position, 1.0);\n                vec4 position = projectionMatrix * viewMatrix * worldPosition;\n                gl_Position = position;\n\n                fragVertexEc = position.xyz; // worldPosition.xyz;\n                v_uv = a_uv;\n                v_normal = (normalMatrix * vec4(a_normal, 1.0)).xyz;\n\n                "+T.vertex()+"\n                "+w.vertex()+"\n            }\n        ",o="#version 300 es\n            "+P.fragment()+"\n\n            precision highp float;\n            precision highp int;\n\n            in vec3 fragVertexEc;\n            in vec2 v_uv;\n            in vec3 v_normal;\n\n            "+w.fragment_pre()+"\n\n            "+E.scene()+"\n            "+E.model()+"\n            "+E.lights()+"\n\n            uniform sampler2D u_map;\n            uniform vec3 u_color;\n\n            "+T.fragment_pre()+"\n\n            out vec4 outColor;\n\n            void main() {\n                vec3 v_normal = normalize(cross(dFdx(fragVertexEc), dFdy(fragVertexEc)));\n\n                vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n                base += vec4(u_color, 1.0);\n                base *= texture(u_map, v_uv);\n\n                "+T.fragment()+"\n                "+r.factory()+"\n                "+i.linear()+"\n                "+w.fragment()+"\n\n                outColor = base;\n            }\n        ";return Object.assign({type:2001,mode:!0===e.wireframe?s.LINES:s.TRIANGLES},{vertex:a,fragment:o,uniforms:{u_map:{type:"sampler2D",value:this.map.texture},u_color:{type:"vec3",value:n}}})},Rt=Object.freeze({Basic:Tt,Default:Ot,Billboard:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t),this.map=new At,e.map&&this.map.fromImage(e.map),e.texture&&(this.map=e.texture);var n="#version 300 es\n            "+P.vertex()+"\n\n            in vec3 a_position;\n            in vec2 a_uv;\n\n            "+E.scene()+"\n            "+E.model()+"\n\n            out vec2 v_uv;\n\n            void main() {\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n                v_uv = a_uv;\n            }\n        ",r="#version 300 es\n            "+P.fragment()+"\n\n            precision highp float;\n            precision highp int;\n\n            in vec2 v_uv;\n\n            "+E.scene()+"\n\n            uniform sampler2D u_map;\n\n            out vec4 outColor;\n\n            void main() {\n                // depth map\n                float z = texture(u_map, v_uv).r;\n                float n = 1.0;\n                float f = 1000.0;\n                float c = (2.0 * n) / (f + n - z * (f - n));\n\n                // draw depth\n                outColor = vec4(c);\n            }\n        ";return Object.assign({type:2002,mode:s.TRIANGLES},{vertex:n,fragment:r,uniforms:{u_map:{type:"sampler2D",value:this.map.texture}}})},Sem:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t),this.map=new At({transparent:!0}),e.map&&this.map.fromImage(e.map),e.texture&&(this.map=e.texture);var n="#version 300 es\n            "+P.vertex()+"\n\n            in vec3 a_position;\n            in vec3 a_normal;\n            in vec2 a_uv;\n\n            "+E.scene()+"\n            "+E.model()+"\n            "+w.vertex_pre()+"\n\n            out vec2 v_uv;\n\n            void main() {\n                vec4 position = viewMatrix * modelMatrix * vec4(a_position, 1.0);\n                gl_Position = projectionMatrix * position;\n\n                vec3 v_e = vec3(position);\n                vec3 v_n = mat3(viewMatrix * modelMatrix) * a_normal;\n                vec3 r = reflect(normalize(v_e), normalize(v_n));\n                float m = 2.0 * sqrt(pow(r.x, 2.0) + pow(r.y, 2.0) + pow(r.z + 1.0, 2.0));\n                v_uv = r.xy / m + 0.5;\n\n                "+w.vertex()+"\n            }\n        ",r="#version 300 es\n            "+P.fragment()+"\n\n            precision highp float;\n            precision highp int;\n\n            in vec2 v_uv;\n\n            "+w.fragment_pre()+"\n\n            "+E.scene()+"\n            "+E.model()+"\n            "+E.lights()+"\n\n            uniform sampler2D u_map;\n\n            out vec4 outColor;\n\n            void main() {\n                vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n\n                base += texture(u_map, v_uv);\n\n                "+i.linear()+"\n                "+w.fragment()+"\n\n                outColor = base;\n            }\n        ";return Object.assign({type:2004},{vertex:n,fragment:r,uniforms:{u_map:{type:"sampler2D",value:this.map.texture}}})}}),St={};function It(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);throw t.deleteShader(r),console.error(i,e),new Error(i)}return r}var Lt=function(){function t(e,n){dt(this,t);var r=x();this.boundLocation=n,this.data=new Float32Array(e),this.buffer=r.createBuffer(),r.bindBuffer(r.UNIFORM_BUFFER,this.buffer),r.bufferData(r.UNIFORM_BUFFER,this.data,r.STATIC_DRAW),r.bindBuffer(r.UNIFORM_BUFFER,null)}return vt(t,[{key:"bind",value:function(){var t=x();t.bindBufferBase(t.UNIFORM_BUFFER,this.boundLocation,this.buffer)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=x();this.data.set(t,e),n.bindBuffer(n.UNIFORM_BUFFER,this.buffer),n.bufferSubData(n.UNIFORM_BUFFER,0,this.data,0,null),n.bindBuffer(n.UNIFORM_BUFFER,null)}}]),t}(),Dt=function(){function t(){dt(this,t);var e=x(),n=_().vertexArrayObject;b()===c.WEBGL2?(this.vao=e.createVertexArray(),e.bindVertexArray(this.vao)):n&&(this.vao=_().vertexArrayObject.createVertexArrayOES(),n.bindVertexArrayOES(this.vao))}return vt(t,[{key:"bind",value:function(){var t=x(),e=_().vertexArrayObject;b()===c.WEBGL2?t.bindVertexArray(this.vao):e&&e.bindVertexArrayOES(this.vao)}},{key:"unbind",value:function(){var t=x(),e=_().vertexArrayObject;b()===c.WEBGL2?t.bindVertexArray(null):e&&e.bindVertexArrayOES(null)}},{key:"destroy",value:function(){var t=x(),e=_().vertexArrayObject;b()===c.WEBGL2?t.deleteVertexArray(this.vao):e&&e.deleteVertexArrayOES(this.vao),this.vao=null}}]),t}(),Ct=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":case"mat2":return 4;case"mat3":return 9;case"mat4":return 16;default:throw new Error('"'+t+'" is an unknown type')}},Ft=!1,Ut=function(t){function e(){dt(this,e);var t=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.attributes={},t.uniforms={},t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=1,t.clipping={enable:!1,planes:[B(),B(),B()]},t.instanceCount=0,t.isInstance=!1,t.mode=s.TRIANGLES,t.side=u.FRONT,t.type=String(o),t.shadows=!0,t}return pt(e,_t),vt(e,[{key:"setAttribute",value:function(t,e,n){var r=Ct(e);this.attributes[t]={value:n,size:r}}},{key:"setIndex",value:function(t){this.indices={value:t}}},{key:"setUniform",value:function(t,e,n){this.uniforms[t]={value:n,type:e}}},{key:"setShader",value:function(t,e){this.vertex=t,this.fragment=e}},{key:"setInstanceAttribute",value:function(t,e,n){var r=Ct(e);this.attributes[t]={value:n,size:r,instanced:!0}}},{key:"setInstanceCount",value:function(t){this.instanceCount=t,this.instanceCount>0?this.isInstance=!0:this.isInstance=!1}},{key:"init",value:function(){var t=x();Ft=b()===c.WEBGL2,this.vertex&&this.fragment&&(Ft||(this.vertex=ht(this.vertex,"vertex"),this.fragment=ht(this.fragment,"fragment")),this.program=function(t,e,n,r){var i=St["pool_"+r];if(!i){var a=It(t,e,t.VERTEX_SHADER),o=It(t,n,t.FRAGMENT_SHADER),s=t.createProgram();return t.attachShader(s,a),t.attachShader(s,o),t.linkProgram(s),St["pool_"+r]=s,s}return i}(t,this.vertex,this.fragment,this.type),t.useProgram(this.program),this.vao=new Dt,function(t,e){var n=x();for(var r in t){var i=t[r],a=n.getAttribLocation(e,r),o=i.buffer;i.buffer||(o=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,i.value,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),Object.assign(i,{location:a,buffer:o})}}(this.attributes,this.program),function(t,e){var n=x(),r=[n.TEXTURE0,n.TEXTURE1,n.TEXTURE2,n.TEXTURE3,n.TEXTURE4,n.TEXTURE5],i=0;Object.keys(t).forEach(function(a){var o=t[a],s=n.getUniformLocation(e,a);Object.assign(o,{location:s}),"sampler2D"===o.type&&(o.textureIndex=i,o.activeTexture=r[i],i++)})}(this.uniforms,this.program),this.indices&&!this.indices.buffer&&(this.indices.buffer=t.createBuffer()))}},{key:"destroy",value:function(){this.program=null}},{key:"bind",value:function(){var t=x();!function(t){var e=x();Object.keys(t).forEach(function(n){var r=t[n],i=r.location,a=r.buffer,o=r.size,s=r.instanced;if(-1!==i){e.bindBuffer(e.ARRAY_BUFFER,a),e.vertexAttribPointer(i,o,e.FLOAT,!1,0,0),e.enableVertexAttribArray(i);var u=s?1:0;b()===c.WEBGL2?e.vertexAttribDivisor(i,u):_().instancedArrays.vertexAttribDivisorANGLE(i,u),e.bindBuffer(e.ARRAY_BUFFER,null)}})}(this.attributes,this.program),this.indices&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indices.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.value,t.STATIC_DRAW))}},{key:"unbind",value:function(){var t=x();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(t){var e=x();this.dirty.attributes&&(!function(t){var e=x();Object.keys(t).forEach(function(n){var r=t[n],i=r.location,a=r.buffer,o=r.value;-1!==i&&(e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,o,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null))})}(this.attributes),this.dirty.attributes=!0),function(t){var e=x();Object.keys(t).forEach(function(n){var r=t[n];switch(r.type){case"mat4":e.uniformMatrix4fv(r.location,!1,r.value);break;case"mat3":e.uniformMatrix3fv(r.location,!1,r.value);break;case"vec4":e.uniform4fv(r.location,r.value);break;case"vec3":e.uniform3fv(r.location,r.value);break;case"vec2":e.uniform2fv(r.location,r.value);break;case"float":e.uniform1f(r.location,r.value);break;case"sampler2D":e.activeTexture(r.activeTexture),e.bindTexture(e.TEXTURE_2D,r.value),e.uniform1i(r.location,r.textureIndex);break;default:throw new Error('"'+r.type+'" is an unknown uniform type')}})}(this.uniforms),this.polygonOffset?(e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(this.polygonOffsetFactor,this.polygonOffsetUnits)):e.disable(e.POLYGON_OFFSET_FILL),this.transparent&&(e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.disable(e.DEPTH_TEST)),this.side===u.FRONT?(e.enable(e.CULL_FACE),e.cullFace(e.BACK)):this.side===u.BACK?(e.enable(e.CULL_FACE),e.cullFace(e.FRONT)):this.side===u.BOTH&&e.disable(e.CULL_FACE),t&&(e.enable(e.CULL_FACE),e.cullFace(e.FRONT))}},{key:"draw",value:function(){var t=x();this.isInstance?Ft?t.drawElementsInstanced(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0,this.instanceCount):_().instancedArrays.drawElementsInstancedANGLE(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0,this.instanceCount):this.indices?t.drawElements(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0):t.drawArrays(this.mode,0,this.attributes.a_position.value.length/3)}}]),e}(),Nt=0,kt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,e);var n=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._shader=null;var r=t.geometry,i=r.positions,a=r.indices,s=r.normals,u=r.uvs,c=t.shader||new Ot({color:t.color,map:t.map}),l=c.vertex,h=c.fragment,f=c.uniforms,d=c.type,v=c.mode;return n.type=void 0!==d?d:o+"-"+Nt++,void 0!==v&&(n.mode=v),n.setAttribute("a_position","vec3",new Float32Array(i)),a&&n.setIndex(new Uint16Array(a)),s&&n.setAttribute("a_normal","vec3",new Float32Array(s)),u&&n.setAttribute("a_uv","vec2",new Float32Array(u)),Object.keys(f).forEach(function(t){n.setUniform(t,f[t].type,f[t].value)}),n.setShader(l,h),n}return pt(e,Ut),vt(e,[{key:"shader",set:function(t){this.dirty.shader=!0,this._shader=t,void 0!==t.type?this.type=t.type:this.type=o,this.setShader(t.vertex,t.fragment)},get:function(){return this._shader}}]),e}(),zt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,e);var n=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=t&&t.size||10,i={positions:[].concat(gt(U(0,0,0)),gt(U(r,0,0)))},a={positions:[].concat(gt(U(0,0,0)),gt(U(0,r,0)))},o={positions:[].concat(gt(U(0,0,0)),gt(U(0,0,r)))},s=new Tt({color:U(1,0,0),wireframe:!0}),u=new Tt({color:U(0,1,0),wireframe:!0}),c=new Tt({color:U(0,0,1),wireframe:!0}),l=new kt({geometry:i,shader:s});n.add(l);var h=new kt({geometry:a,shader:u});n.add(h);var f=new kt({geometry:o,shader:c});return n.add(f),n}return pt(e,Ut),e}(),jt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,e);for(var n=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=t&&t.size||1,i={positions:[]},a=t.model.scale.x,o=t.model.scale.y,s=t.model.scale.z,u=t.model.attributes.a_normal.value.length/3,c=0;c<u;c++){var l=3*c,h=a*t.model.attributes.a_position.value[l+0],f=o*t.model.attributes.a_position.value[l+1],d=s*t.model.attributes.a_position.value[l+2],v=h+r*t.model.attributes.a_normal.value[l+0],p=f+r*t.model.attributes.a_normal.value[l+1],m=d+r*t.model.attributes.a_normal.value[l+2];i.positions=i.positions.concat([h,f,d,v,p,m])}var g=new Tt({color:U(0,1,1),wireframe:!0}),M=new kt({geometry:i,shader:g});return n.add(M),n.reference=t.model,n}return pt(e,Ut),vt(e,[{key:"update",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),N(this.position.data,this.reference.position.data),N(this.rotation.data,this.reference.rotation.data),this.lookToTarget=this.reference.lookToTarget}}]),e}(),Bt=Object.freeze({Axis:zt,Normals:jt});var qt=function(){function t(){dt(this,t),this.position=F()}return vt(t,[{key:"destroy",value:function(){}}]),t}(),Gt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,e);var n=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=a,n.color=t.color||U(1,1,1),n.intensity=t.intensity||.989,n}return pt(e,qt),e}(),Yt=function(t){function e(){dt(this,e);var t=mt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.lights={directional:[]},t.fog={enable:!1,color:q(0,0,0,1),start:500,end:1e3,density:25e-5},t.clipping={enable:!1,planes:[B(),B(),B()]};var n=new Gt({near:1,far:1e3});return n.position[0]=125,n.position[1]=250,n.position[2]=500,t.addLight(n),t}return pt(e,_t),vt(e,[{key:"addLight",value:function(t){switch(t.type){case a:this.lights.directional.push(t)}}},{key:"removeLight",value:function(t){var e=this.lights.directional.indexOf(t);-1!==e&&(t.destroy(),this.lights.directional.splice(e,1))}}]),e}(),Xt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t);var n=x();Object.assign(this,{width:512,height:512,internalformat:n.DEPTH_COMPONENT,type:n.UNSIGNED_SHORT},e),b()===c.WEBGL2&&(this.internalformat=n.DEPTH_COMPONENT24,this.type=n.UNSIGNED_INT),this.frameBuffer=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer),this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),this.depthTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.depthTexture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,n.DEPTH_COMPONENT,this.type,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,this.depthTexture,0),n.bindFramebuffer(n.FRAMEBUFFER,null)}return vt(t,[{key:"setSize",value:function(t,e){var n=x();this.width=t,this.height=e,n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),n.bindTexture(n.TEXTURE_2D,this.depthTexture),n.texImage2D(n.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,n.DEPTH_COMPONENT,this.type,null),n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null)}}]),t}(),Wt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t),this.width=e.width||1024,this.height=e.height||1024;var n,r,i,a,o,s,u,c,l,h,f,d,v,p,m,g,M,b=this.width,y=this.height;this.rt=new Xt({width:b,height:y}),this.matrices={view:S(),shadow:S(),bias:(n=.5,r=0,i=0,a=0,o=0,s=.5,u=0,c=0,l=0,h=0,f=.5,d=0,v=.5,p=.5,m=.5,g=1,M=new R(16),M[0]=n,M[1]=r,M[2]=i,M[3]=a,M[4]=o,M[5]=s,M[6]=u,M[7]=c,M[8]=l,M[9]=h,M[10]=f,M[11]=d,M[12]=v,M[13]=p,M[14]=m,M[15]=g,M)},this.camera=new wt({fov:60,near:1,far:1e3}),this.camera=new Et,this.camera.position.z=1,this.setLightOrigin(e.light||U(100,250,500))}return vt(t,[{key:"setLightOrigin",value:function(t){N(this.camera.position.data,t),L(this.matrices.view),C(this.matrices.view,this.camera.position.data,this.camera.target,this.camera.up),L(this.matrices.shadow),D(this.matrices.shadow,this.camera.matrices.projection,this.matrices.view),D(this.matrices.shadow,this.matrices.bias,this.matrices.shadow)}}]),t}(),Vt=void 0,Ht=Date.now(),Zt=!1,Kt=B(),Qt=B(),$t={view:S(),normal:S(),modelView:S(),inversedModelView:S()},Jt=null,te=null,ee=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t),this.supported=!1,this.sorted={opaque:[],transparent:[],shadow:[]},this.performance={opaque:0,transparent:0,shadow:0,vertices:0,instances:0},this.ratio=e.ratio||window.devicePixelRatio,this.shadows=e.shadows||!1,this.domElement=e.canvas||document.createElement("canvas");var n,r=M(e.contextType),i=this.domElement.getContext(r,Object.assign({},{antialias:!1},e)),a=_();if(i&&(a.vertexArrayObject&&a.instancedArrays&&a.standardDerivatives&&a.depthTextures||null!==window.gli)){if(!1!==e.greeting){var o,s="color:#f33;font-size:x-small",u=["%c"+h+" - %cversion: %c"+f+" %crunning: %c"+i.getParameter(i.VERSION),"color:#666;font-size:x-small;font-weight:bold;","color:#777;font-size:x-small",s,"color:#777;font-size:x-small",s];(o=console).log.apply(o,u)}y(i),Zt=b()===c.WEBGL2,this.init()}else this.domElement=((n=document.createElement("div")).innerHTML='Your browser doesn\'t support WebGL.<br><a href="https://get.webgl.org">Get WebGL</a>',n.style.display="table",n.style.margin="20px auto 0 auto",n.style.border="1px solid #333",n.style.backgroundColor="rgba(255, 255, 255, 0.1)",n.style.borderRadius="4px",n.style.padding="10px",n.style.fontFamily="monospace",n.style.fontSize="12px",n.style.textAlign="center",n)}return vt(t,[{key:"init",value:function(){this.supported=!0,Zt&&(this.perScene=new Lt([].concat(gt(S()),gt(S()),gt(Qt),gt(B()),gt(Kt),gt(B()),gt(B()),gt(B()),gt(B())),0),this.perModel=new Lt([].concat(gt(S()),gt(S()),gt(B()),gt(B()),gt(B()),gt(B())),1),this.directional=new Lt(new Float32Array(12),2)),this.shadowmap=new Wt}},{key:"setSize",value:function(t,e){this.supported&&function(t,e,n,r){t.width=e*r,t.height=n*r,t.style.width=e+"px",t.style.height=n+"px"}(this.domElement,t,e,this.ratio)}},{key:"setRatio",value:function(t){this.ratio=t}},{key:"changeProgram",value:function(t){var e=x();if(e.useProgram(t),Zt){var n=e.getUniformBlockIndex(t,"perScene"),r=e.getUniformBlockIndex(t,"perModel"),i=e.getUniformBlockIndex(t,"directional");e.uniformBlockBinding(t,n,this.perScene.boundLocation),e.uniformBlockBinding(t,r,this.perModel.boundLocation),i===this.directional.boundLocation&&e.uniformBlockBinding(t,i,this.directional.boundLocation)}}},{key:"draw",value:function(t,e,n,r){if(this.supported){Jt=t,te=e;var i=x();if(i.enable(i.DEPTH_TEST),i.enable(i.CULL_FACE),i.disable(i.BLEND),e.updateCameraMatrix(n,r),L($t.view),C($t.view,e.position.data,e.target,e.up),t.traverse()&&(this.sorted.opaque=[],this.sorted.transparent=[],this.sorted.shadow=[],this.performance.opaque=0,this.performance.transparent=0,this.performance.shadow=0,this.performance.vertices=0,this.performance.instances=0,this.sort(t)),Kt[0]=(Date.now()-Ht)/1e3,Qt[0]=t.fog.enable,Qt[1]=t.fog.start,Qt[2]=t.fog.end,Qt[3]=t.fog.density,Zt){this.perScene.bind(),this.perModel.bind(),this.directional.bind(),this.perScene.update([].concat(gt(e.matrices.projection),gt($t.view),gt(Qt),gt(t.fog.color),gt(Kt),[t.clipping.enable,0,0,0],gt(t.clipping.planes[0]),gt(t.clipping.planes[1]),gt(t.clipping.planes[2])));for(var a=0;a<t.lights.directional.length;a++)this.directional.update([].concat(gt(t.lights.directional[a].position),[0]).concat([].concat(gt(t.lights.directional[a].color),[0]),[t.lights.directional[a].intensity,0,0,0]),12*a)}if(this.shadowmap.setLightOrigin(t.lights.directional[0].position),this.renderShadow)for(var o=0;o<this.sorted.shadow.length;o++)this.renderObject(this.sorted.shadow[o],this.sorted.shadow[o].program,!0);for(var s=0;s<this.sorted.opaque.length;s++)this.renderObject(this.sorted.opaque[s],this.sorted.opaque[s].program);this.sorted.transparent.sort(function(t,e){return t.position.z-e.position.z});for(var u=0;u<this.sorted.transparent.length;u++)this.renderObject(this.sorted.transparent[u],this.sorted.transparent[u].program)}}},{key:"rtt",value:function(t){var e=t.renderTarget,n=t.scene,r=t.camera,i=t.clearColor,a=void 0===i?[0,0,0,1]:i;if(this.supported){var o=x();o.bindFramebuffer(o.FRAMEBUFFER,e.frameBuffer),o.viewport(0,0,e.width,e.height),o.clearColor.apply(o,gt(a)),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),this.draw(n,r,e.width,e.height),o.bindTexture(o.TEXTURE_2D,e.texture),o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,null)}}},{key:"render",value:function(t,e){if(this.supported){var n=x();this.shadows&&(this.renderShadow=!0,this.rtt({renderTarget:this.shadowmap.rt,scene:t,camera:this.shadowmap.camera,clearColor:[1,1,1,1]}),this.renderShadow=!1),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this.draw(t,e,n.canvas.width,n.canvas.height)}}},{key:"updateMatrices",value:function(t){var e,n,r,i,a,o,s,u,c,l,h,f,d,v,p,m,g,M,b,y,x,_,E,w,P,T,A,O,R,S,D;L($t.modelView),I($t.modelView,t),e=$t.inversedModelView,r=(n=$t.modelView)[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],v=n[11],p=n[12],m=n[13],g=n[14],M=n[15],(D=(b=r*u-i*s)*(S=d*M-v*g)-(y=r*c-a*s)*(R=f*M-v*m)+(x=r*l-o*s)*(O=f*g-d*m)+(_=i*c-a*u)*(A=h*M-v*p)-(E=i*l-o*u)*(T=h*g-d*p)+(w=a*l-o*c)*(P=h*m-f*p))&&(D=1/D,e[0]=(u*S-c*R+l*O)*D,e[1]=(a*R-i*S-o*O)*D,e[2]=(m*w-g*E+M*_)*D,e[3]=(d*E-f*w-v*_)*D,e[4]=(c*A-s*S-l*T)*D,e[5]=(r*S-a*A+o*T)*D,e[6]=(g*x-p*w-M*y)*D,e[7]=(h*w-d*x+v*y)*D,e[8]=(s*R-u*A+l*P)*D,e[9]=(i*A-r*R-o*P)*D,e[10]=(p*E-m*x+M*b)*D,e[11]=(f*x-h*E-v*b)*D,e[12]=(u*T-s*O-c*P)*D,e[13]=(r*O-i*T+a*P)*D,e[14]=(m*y-p*_-g*b)*D,e[15]=(h*_-f*y+d*b)*D),function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}($t.inversedModelView,$t.inversedModelView),L($t.normal),I($t.normal,$t.inversedModelView)}},{key:"sort",value:function(t){for(var e=0;e<t.children.length;e++)this.sort(t.children[e]);!t.visible||t instanceof Yt||(t.transparent?(this.sorted.transparent.push(t),this.performance.transparent++):(this.sorted.opaque.push(t),this.performance.opaque++),this.shadows&&t.shadows&&(this.sorted.shadow.push(t),this.performance.shadow++),t.attributes.a_position&&(this.performance.vertices+=t.attributes.a_position.value.length/3),t.isInstance&&(this.performance.instances+=t.instanceCount)),t.dirty.sorting=!1}},{key:"renderObject",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==t.parent){if(this.updateMatrices(t.matrices.model),t.dirty.shader&&(t.dirty.shader=!1,e&&t.destroy()),!e)return this.initUniformsPerModel(t),void t.init();Vt!==e&&(Vt=e,this.changeProgram(Vt,t.type)),t.bind(),this.updateUniformsPerModel(t),t.update(n),t.draw(),t.unbind()}}},{key:"initUniformsPerModel",value:function(t){Zt||(t.setUniform("projectionMatrix","mat4",S()),t.setUniform("viewMatrix","mat4",S()),t.setUniform("fogSettings","vec4",Qt),t.setUniform("fogColor","vec4",B()),t.setUniform("iGlobalTime","float",Kt[0]),t.setUniform("globalClipSettings","vec4",B()),t.setUniform("globalClipPlane0","vec4",B()),t.setUniform("globalClipPlane1","vec4",B()),t.setUniform("globalClipPlane2","vec4",B()),t.setUniform("modelMatrix","mat4",S()),t.setUniform("normalMatrix","mat4",S()),t.setUniform("localClipSettings","vec4",B()),t.setUniform("localClipPlane0","vec4",B()),t.setUniform("localClipPlane1","vec4",B()),t.setUniform("localClipPlane2","vec4",B()),t.setUniform("dlPosition","vec4",B()),t.setUniform("dlColor","vec4",B()),t.setUniform("flIntensity","float",0)),t.setUniform("shadowMap","sampler2D",0),t.setUniform("shadowMatrix","mat4",S()),t.setUniform("shadowNear","float",0),t.setUniform("shadowFar","float",0)}},{key:"updateUniformsPerModel",value:function(t){Zt?this.perModel.update([].concat(gt(t.matrices.model),gt($t.normal),[t.clipping.enable,0,0,0],gt(t.clipping.planes[0]),gt(t.clipping.planes[1]),gt(t.clipping.planes[2]))):(t.uniforms.projectionMatrix.value=te.matrices.projection,t.uniforms.viewMatrix.value=$t.view,t.uniforms.fogSettings.value=Qt,t.uniforms.fogColor.value=Jt.fog.color,t.uniforms.iGlobalTime.value=Kt[0],t.uniforms.globalClipSettings.value=[Jt.clipping.enable,0,0,0],t.uniforms.globalClipPlane0.value=Jt.clipping.planes[0],t.uniforms.globalClipPlane1.value=Jt.clipping.planes[1],t.uniforms.globalClipPlane2.value=Jt.clipping.planes[2],t.uniforms.modelMatrix.value=t.matrices.model,t.uniforms.normalMatrix.value=$t.normal,t.uniforms.localClipSettings.value=[t.clipping.enable,0,0,0],t.uniforms.localClipPlane0.value=t.clipping.planes[0],t.uniforms.localClipPlane1.value=t.clipping.planes[0],t.uniforms.localClipPlane2.value=t.clipping.planes[0]),t.uniforms.shadowMap.value=this.shadowmap.rt.depthTexture,t.uniforms.shadowMatrix.value=this.shadowmap.matrices.shadow,t.uniforms.shadowNear.value=this.shadowmap.camera.near,t.uniforms.shadowFar.value=this.shadowmap.camera.far}}]),t}(),ne=function(){function t(e){dt(this,t),this.scene=new Yt;var n=e.vertex,r=e.fragment,i=e.uniforms;this.vertex=n,this.fragment=r,this.uniforms=i,this.enable=!0}return vt(t,[{key:"compile",value:function(){var t={vertex:"#version 300 es\n                in vec3 a_position;\n                in vec3 a_normal;\n                in vec2 a_uv;\n\n                "+E.scene()+"\n                "+E.model()+"\n\n                "+this.vertex,fragment:"#version 300 es\n                precision highp float;\n                precision highp int;\n\n                "+E.scene()+"\n                "+E.model()+"\n\n                out vec4 outColor;\n                "+this.fragment,uniforms:this.uniforms};this.quad=new kt({geometry:{positions:[-1,-1,0,1,-1,0,1,1,0,-1,1,0],indices:[0,1,2,0,2,3],uvs:[0,0,1,0,1,1,0,1]},shader:t}),this.scene.add(this.quad)}},{key:"setUniform",value:function(t,e){this.quad.uniforms[t].value=e}}]),t}(),re={uniforms:{u_input:{type:"sampler2D",value:null}},vertex:"\n    out vec2 v_uv;\n    void main() {\n        gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n        v_uv = a_uv;\n    }",fragment:"\n    in vec2 v_uv;\n\n    uniform sampler2D u_input;\n\n    void main() {\n        outColor = texture(u_input, v_uv);\n    }"},ie=function(){function t(e){dt(this,t),this.renderer=new ee(e),this.domElement=this.renderer.domElement,this.camera=new Et,this.camera.position.z=100,this.passes=[],this.clearColor=q(0,0,0,1),this.screen=new ne(re),this.screen.compile(),this.buffers=[new Xt,new Xt],this.read=this.buffers[1],this.write=this.buffers[0]}return vt(t,[{key:"setSize",value:function(t,e){this.renderer.setSize(t,e),this.read.setSize(t,e),this.write.setSize(t,e)}},{key:"setRatio",value:function(t){this.renderer.setRatio(t)}},{key:"pass",value:function(t){this.passes.push(t)}},{key:"compile",value:function(){for(var t=0;t<this.passes.length;t++)this.passes[t].compile()}},{key:"renderToTexture",value:function(t,e,n){this.renderer.rtt({renderTarget:t,scene:e,camera:n,clearColor:this.clearColor})}},{key:"resetBuffers",value:function(){this.read=this.buffers[1],this.write=this.buffers[0]}},{key:"swapBuffers",value:function(){this.temp=this.read,this.read=this.write,this.write=this.temp}},{key:"render",value:function(t,e){this.resetBuffers(),this.renderToTexture(this.write,t,e);for(var n=this.passes.length,r=0;r<n;r++)this.passes[r].enable&&(this.swapBuffers(),this.passes[r].setUniform("u_input",this.read.texture),this.renderToTexture(this.write,this.passes[r].scene,this.camera));this.screen.setUniform("u_input",this.write.texture),this.renderer.render(this.screen.scene,this.camera)}}]),t}(),ae=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dt(this,t),this.theme=e.theme||{font:"font-family:sans-serif;font-size:xx-small;font-weight:bold;line-height:15px;-moz-osx-font-smoothing: grayscale;-webkit-font-smoothing: antialiased;",color1:"#242424",color2:"#2a2a2a",color3:"#666",color4:"#999"};var n=document.createElement("div");n.style.cssText="position:fixed;bottom:0;left:0;min-width:80px;opacity:0.9;z-index:10000;",this.holder=document.createElement("div"),this.holder.style.cssText="padding:3px;background-color:"+this.theme.color1+";",n.appendChild(this.holder);var r=document.createElement("div");r.style.cssText=this.theme.font+";color:"+this.theme.color3+";",r.innerHTML="Performance",this.holder.appendChild(r),this.msTexts=[],this.domElement=n}return vt(t,[{key:"rebuild",value:function(t){var e=this;this.msTexts=[],Object.keys(t).forEach(function(t){var n=document.createElement("div");n.style.cssText=e.theme.font+";color:"+e.theme.color4+";background-color:"+e.theme.color2+";",e.holder.appendChild(n),e.msTexts[t]=n})}},{key:"update",value:function(t){var e=this;Object.keys(this.msTexts).length!==Object.keys(t.performance).length&&this.rebuild(t.performance),Object.keys(t.performance).forEach(function(n){e.msTexts[n].textContent=n+": "+t.performance[n]})}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"utils",function(){return P}),n.d(e,"Tetrahedron",function(){return L}),n.d(e,"Hexahedron",function(){return D}),n.d(e,"Octahedron",function(){return C}),n.d(e,"Dodecahedron",function(){return F}),n.d(e,"Icosahedron",function(){return U}),n.d(e,"Plane",function(){return N}),n.d(e,"Box",function(){return k}),n.d(e,"Sphere",function(){return z}),n.d(e,"Torus",function(){return j}),n.d(e,"TorusKnot",function(){return B}),n.d(e,"Suzanne",function(){return q});var r="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function i(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t,e,n){var i=new r(3);return i[0]=t,i[1]=e,i[2]=n,i}function o(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function c(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t}var l,h=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)};l=i();!function(){var t,e=((t=new r(4))[0]=0,t[1]=0,t[2]=0,t[3]=0,t)}();function f(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function d(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],u=n[0],c=n[1],l=n[2],h=n[3],f=void 0,d=void 0,v=void 0,p=void 0,m=void 0;return(d=i*u+a*c+o*l+s*h)<0&&(d=-d,u=-u,c=-c,l=-l,h=-h),1-d>1e-6?(f=Math.acos(d),v=Math.sin(f),p=Math.sin((1-r)*f)/v,m=Math.sin(r*f)/v):(p=1-r,m=r),t[0]=p*i+m*u,t[1]=p*a+m*c,t[2]=p*o+m*l,t[3]=p*s+m*h,t}var v,p,m,g,M,b,y,x=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o),t};v=i(),p=a(1,0,0),m=a(0,1,0),g=f(),M=f(),(b=new r(9))[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,y=b;!function(){var t,e=((t=new r(2))[0]=0,t[1]=0,t)}();function _(t){for(var e=[],n=0;n<t.length;n++)Array.isArray(t[n])||t[n]instanceof Float32Array?e=e.concat(_(t[n])):e.push(t[n]);return e}function E(t,e){for(var n=[],r=0;r<t.length;r+=e){for(var i=[],a=0;a<e;a++)i.push(t[r+a]);n.push(i)}return n}function w(t,e){for(var n=E(e,3),r=E(t,3),a=[],l=i(),h=i(),f=i(),d=void 0,v=void 0,p=0;p<n.length;p++){var m=n[p],g=m[0],M=m[1],b=m[2];d=r[g],v=r[M],s(l,r[b],v),s(h,d,v),c(f,l,h),void 0===a[g]&&(a[g]=i()),void 0===a[M]&&(a[M]=i()),void 0===a[b]&&(a[b]=i()),o(a[g],a[g],f),o(a[M],a[M],f),o(a[b],a[b],f)}for(var y=0;y<a.length;y++)u(a[y],a[y]);return _(a)}var P=Object.freeze({flatten:_,unflatten:E,generateVertexNormals:w,mergeVertices:function(t){for(var e=E(t.positions,3),n={},r=[],i=[],a=Math.pow(10,4),o=0;o<e.length;o++){var s=e[o],u="\n            "+Math.round(s[0]*a)+"_\n            "+Math.round(s[1]*a)+"_\n            "+Math.round(s[2]*a)+"\n        ";void 0===n[u]?(n[u]=o,r.push(e[o]),i[o]=r.length-1):i[o]=i[n[u]]}for(var c=[],l=E(t.indices,3),h=0;h<l.length;h++){var f=l[h];f[0]=i[f[0]],f[1]=i[f[1]],f[2]=i[f[2]];for(var d=[f[0],f[1],f[2]],v=0;v<3;v++)if(d[v]===d[(v+1)%3]){c.push(h);break}}for(var p=c.length-1;p>=0;p--){var m=c[p];l.splice(m,1);for(var g=0;g<this.faceVertexUvs.length;g++)this.faceVertexUvs[g].splice(m,1)}var M=_(r),b=_(l);return{positions:new Float32Array(M),indices:new Uint16Array(b),normals:new Float32Array(w(M,b))}}}),T=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},A=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),O=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},R=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},S=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},I=function(){function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;T(this,t);for(var a=[],o={faces:E(n,3),positions:E(e,3)},s=Math.min(i,4);s-- >0;)o=this.subdivide(o);for(var u=0;u<o.positions.length;u++){var c=this.normalize(o.positions[u]),l=.5*(-Math.atan2(c[2],-c[0])/Math.PI+1),h=.5+Math.asin(c[1])/Math.PI;a.push([1-l,1-h])}e=o.positions;for(var f=0;f<e.length;f++)this.scale(e[f],r);var d={positions:_(o.positions),indices:_(o.faces),normals:null,uvs:_(a)};this.geometry={positions:d.positions,indices:d.indices,normals:w(d.positions,d.indices),uvs:_(a)}}return A(t,[{key:"fixPoleUVs",value:function(t,e,n){var r=this.firstYIndex(t,1),i=this.firstYIndex(t,-1);if(-1!==r&&-1!==i){for(var a=t.slice(),o=n.slice(),s=a.length-1,u=0;u<e.length;u++){var c=e[u],l=c[0],h=c[1],f=c[2];l===r?d(c,r,h,f):l===i&&d(c,i,h,f)}t=a,n=o}function d(e,r,i,u){var c=n[i],l=n[u];n[r][0]=(c[0]+l[0])/2,s++,a.push(t[r].slice()),o.push(n[r].slice()),e[0]=s}}},{key:"firstYIndex",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Math.abs(r[1]-e)<=1e-4)return n}return-1}},{key:"normalize",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var r=0;r<t.length;r++)t[r]/=e;return t}},{key:"scale",value:function(t,e){for(var n=0;n<t.length;n++)t[n]*=e;return t}},{key:"subdivide",value:function(t){var e=t.positions,n=t.faces,r=[],i=[],a={},o=0;function s(t,e){var n=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}(t,e),r=function(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}(n),i=a[r];return i||(a[r]=n,a[r])}for(var u=0;u<n.length;u++){var c=n[u],l=c[0],h=c[1],f=c[2],d=e[l],v=e[h],p=e[f],m=s(d,v),g=s(v,p),M=s(p,d),b=i.indexOf(m);-1===b&&(b=o++,i.push(m));var y=i.indexOf(g);-1===y&&(y=o++,i.push(g));var x=i.indexOf(M);-1===x&&(x=o++,i.push(M));var _=i.indexOf(d);-1===_&&(_=o++,i.push(d));var E=i.indexOf(v);-1===E&&(E=o++,i.push(v));var w=i.indexOf(p);-1===w&&(w=o++,i.push(p)),r.push([_,b,x]),r.push([E,y,b]),r.push([w,x,y]),r.push([b,y,x])}return{faces:r,positions:i}}}]),t}(),L=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;T(this,e);var i=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],n,r));return t=i.geometry,R(i,t)}return O(e,I),e}(),D=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;T(this,e);for(var i=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],a=0;a<i.length;a+=3)i[a+0]*=n,i[a+1]*=n,i[a+2]*=n;var o=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],n,r));return t=o.geometry,R(o,t)}return O(e,I),e}(),C=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;T(this,e);var i=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],n,r));return t=i.geometry,R(i,t)}return O(e,I),e}(),F=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;T(this,e);var i=(1+Math.sqrt(5))/2,a=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],s=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],n,r));return t=s.geometry,R(s,t)}return O(e,I),e}(),U=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;T(this,e);var i=.5+Math.sqrt(5)/2,a=[-1,+i,0,1,+i,0,-1,-i,0,1,-i,0,0,-1,+i,0,1,+i,0,-1,-i,0,1,-i,+i,0,-1,+i,0,1,-i,0,-1,-i,0,1],o=R(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n,r));return t=o.geometry,R(o,t)}return O(e,I),e}(),N=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"XY";T(this,t);for(var o=[],s=[],u=[],c=[],l=0,h=2*e,f=2*n,d=h/r,v=f/i,p=.5*-h,m=.5*-f,g=1/r,M=1/i,b=0;b<i;b++)for(var y=0;y<r;y++){var x=d*y+p,_=v*b+m,E=y/r,w=b/i;switch(a){case"XZ":o=(o=(o=(o=o.concat([x,0,_])).concat([x+d,0,_])).concat([x+d,0,_+v])).concat([x,0,_+v]),u=(u=(u=(u=u.concat([0,1,0])).concat([0,1,0])).concat([0,1,0])).concat([0,1,0]),c=(c=(c=(c=c.concat([E,1-w])).concat([E+g,1-w])).concat([E+g,1-(w+M)])).concat([E,1-(w+M)]);break;case"YZ":o=(o=(o=(o=o.concat([0,_,x])).concat([0,_,x+d])).concat([0,_+v,x+d])).concat([0,_+v,x]),u=(u=(u=(u=u.concat([1,0,0])).concat([1,0,0])).concat([1,0,0])).concat([1,0,0]),c=(c=(c=(c=c.concat([1-E,w])).concat([1-(E+g),w])).concat([1-(E+g),w+M])).concat([1-E,w+M]);break;default:o=(o=(o=(o=o.concat([x,_,0])).concat([x+d,_,0])).concat([x+d,_+v,0])).concat([x,_+v,0]),u=(u=(u=(u=u.concat([0,0,1])).concat([0,0,1])).concat([0,0,1])).concat([0,0,1]),c=(c=(c=(c=c.concat([E,w])).concat([E+g,w])).concat([E+g,w+M])).concat([E,w+M])}s.push(4*l+0),s.push(4*l+1),s.push(4*l+2),s.push(4*l+0),s.push(4*l+2),s.push(4*l+3),l++}return{positions:o,indices:s,normals:u,uvs:c}},k=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;T(this,t);for(var i=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],a=0;a<i.length;a+=3)i[a+0]*=e,i[a+1]*=n,i[a+2]*=r;return{positions:i,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]}},z=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*-Math.PI,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Math.PI,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;T(this,t);for(var l=[],h=[],f=[],d=[],v=i(),p=i(),m=s+c,g=0,M=[],b=0;b<=r;b++){for(var y=[],x=b/r,_=0;_<=n;_++){var E=_/n;v[0]=-e*Math.cos(a+E*o)*Math.sin(s+x*c),v[1]=e*Math.cos(s+x*c),v[2]=e*Math.sin(a+E*o)*Math.sin(s+x*c),l.push.apply(l,S(v)),u(p,v),f.push.apply(f,S(p)),d.push(E,1-x),y.push(g++)}M.push(y)}for(var w=0;w<r;w++)for(var P=0;P<n;P++){var A=M[w][P+1],O=M[w][P],R=M[w+1][P],I=M[w+1][P+1];(0!==w||s>0)&&h.push(A,O,I),(w!==r-1||m<Math.PI)&&h.push(O,R,I)}return{positions:l,indices:h,normals:f,uvs:d}},j=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.375,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;T(this,t);for(var c=[],l=[],h=[],f=[],d=i(),v=i(),p=i(),m=0;m<=a;m++)for(var g=0;g<=r;g++){var M=g/r*o,b=m/a*Math.PI*2;v[0]=(e+n*Math.cos(b))*Math.cos(M),v[1]=(e+n*Math.cos(b))*Math.sin(M),v[2]=n*Math.sin(b),c.push.apply(c,S(v)),d[0]=e*Math.cos(M),d[1]=e*Math.sin(M),s(p,v,d),u(p,p),h.push.apply(h,S(p)),f.push(g/r),f.push(m/a)}for(var y=1;y<=a;y++)for(var x=1;x<=r;x++){var _=(r+1)*y+(x-1),E=(r+1)*(y-1)+(x-1),w=(r+1)*(y-1)+x,P=(r+1)*y+x;l.push(_,E,P),l.push(E,w,P)}return{positions:c,indices:l,normals:h,uvs:f}},B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.375,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;T(this,t);for(var f=[],d=[],v=[],p=[],m=i(),g=i(),M=i(),b=i(),y=i(),x=i(),_=i(),E=0;E<=r;E++){var w=E/r*l*Math.PI*2;this.calculatePositionOnCurve(w,l,h,e,M),this.calculatePositionOnCurve(w+.01,l,h,e,b),s(x,b,M),o(_,b,M),c(y,x,_),c(_,y,x),u(y,y),u(_,_);for(var P=0;P<=a;P++){var A=P/a*Math.PI*2,O=-n*Math.cos(A),R=n*Math.sin(A);m[0]=M[0]+(O*_[0]+R*y[0]),m[1]=M[1]+(O*_[1]+R*y[1]),m[2]=M[2]+(O*_[2]+R*y[2]),f.push.apply(f,S(m)),s(g,m,M),u(g,g),v.push.apply(v,S(g)),p.push(E/r,P/a)}}for(var I=1;I<=r;I++)for(var L=1;L<=a;L++){var D=(a+1)*(I-1)+(L-1),C=(a+1)*I+(L-1),F=(a+1)*I+L,U=(a+1)*(I-1)+L;d.push(D,C,U),d.push(C,F,U)}return{positions:f,indices:d,normals:v,uvs:p}}return A(t,[{key:"calculatePositionOnCurve",value:function(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,u=Math.cos(s);i[0]=r*(2+u)*.5*a,i[1]=r*(2+u)*o*.5,i[2]=r*Math.sin(s)*.5}}]),t}(),q=function t(e){T(this,t);for(var n=[.35156,.24219,.82813,.44531,.15625,.78125,.47656,.24219,.77344,-.47656,.24219,.77344,-.44531,.15625,.78125,-.35156,.24219,.82813,.35156,.11719,.80469,-.35156,.11719,.80469,.26563,.15625,.82031,-.26563,.15625,.82031,.22656,.24219,.82031,-.22656,.24219,.82031,.26563,.33594,.82031,-.26563,.33594,.82031,.35156,.375,.80469,-.35156,.375,.80469,.44531,.33594,.78125,-.44531,.33594,.78125,.09375,-.75,.66406,.04688,-.85156,.63281,.09375,-.8125,.64063,-.09375,-.8125,.64063,-.04688,-.85156,.63281,-.09375,-.75,.66406,0,.40625,.60156,.10938,.46094,.60938,0,.57031,.57031,-.10938,.46094,.60938,.21875,-.28125,.42969,.21094,-.39063,.16406,.40625,-.17188,.14844,-.40625,-.17188,.14844,-.21094,-.39063,.16406,-.21875,-.28125,.42969,.4375,-.09375,.46875,.20313,-.17188,.5,.21094,-.22656,.46875,-.21094,-.22656,.46875,-.20313,-.17188,.5,-.4375,-.09375,.46875,.33594,.05469,-.66406,.48438,.02344,-.54688,.34375,-.14844,-.53906,-.34375,-.14844,-.53906,-.48438,.02344,-.54688,-.33594,.05469,-.66406,.72656,0,-.07031,.71875,-.02344,-.17188,.71875,.03906,-.1875,-.71875,.03906,-.1875,-.71875,-.02344,-.17188,-.72656,0,-.07031,1.03906,.32813,-.41406,1.08594,.27344,-.39063,1.1875,.34375,-.48438,-1.1875,.34375,-.48438,-1.08594,.27344,-.39063,-1.03906,.32813,-.41406,1.25,.46875,-.54688,1.36719,.29688,-.5,1.3125,.05469,-.53125,-1.3125,.05469,-.53125,-1.36719,.29688,-.5,-1.25,.46875,-.54688,-.78906,-.125,-.32813,-.64063,-.00781,-.42969,-.59375,-.125,-.16406,-.77344,-.14063,-.125,.59375,-.125,-.16406,.64063,-.00781,-.42969,.78906,-.125,-.32813,.77344,-.14063,-.125,-.85938,.38281,-.38281,-.77344,.26563,-.4375,.77344,.26563,-.4375,.85938,.38281,-.38281,-.89063,.40625,-.23438,-.82031,.32813,-.20313,.82031,.32813,-.20313,.89063,.40625,-.23438,-1.02344,.4375,-.48438,-1.03906,-.08594,-.49219,1.02344,.4375,-.48438,1.03906,-.08594,-.49219,-1.02344,.47656,-.3125,1.02344,.47656,-.3125,-1.23438,.50781,-.42188,1.23438,.50781,-.42188,-1.35156,.32031,-.42188,1.35156,.32031,-.42188,-1.28125,.05469,-.42969,1.28125,.05469,-.42969,-1.03906,-.10156,-.32813,1.03906,-.10156,-.32813,-1.10938,.21094,-.39063,-1.25781,.24219,-.49219,1.10938,.21094,-.39063,1.25781,.24219,-.49219,-1.05469,.1875,-.38281,-1.21094,.08594,-.48438,1.21094,.08594,-.48438,1.05469,.1875,-.38281,-1,.125,-.36719,-1.04688,0,-.42188,1.04688,0,-.42188,1,.125,-.36719,-.9375,.0625,-.33594,-.88281,-.01563,-.26563,.9375,.0625,-.33594,.88281,-.01563,-.26563,-.85156,.01563,-.32031,-.8125,-.01563,-.32031,.8125,-.01563,-.32031,.85156,.01563,-.32031,-.84375,.17188,-.32031,-.89063,.10938,-.32813,-.82813,.07813,-.32031,-.76563,.09375,-.32031,.82813,.07813,-.32031,.89063,.10938,-.32813,.84375,.17188,-.32031,.76563,.09375,-.32031,-.96094,.17188,-.35156,-.89063,.23438,-.32031,.89063,.23438,-.32031,.96094,.17188,-.35156,-1.01563,.23438,-.375,-.95313,.28906,-.34375,.95313,.28906,-.34375,1.01563,.23438,-.375,-1.03906,0,-.36719,-.88281,-.02344,-.21094,.88281,-.02344,-.21094,1.03906,0,-.36719,-1.1875,.09375,-.44531,1.1875,.09375,-.44531,-1.23438,.25,-.44531,1.23438,.25,-.44531,-1.17188,.35938,-.4375,1.17188,.35938,-.4375,-1.02344,.34375,-.35938,1.02344,.34375,-.35938,-.94531,.30469,-.28906,.94531,.30469,-.28906,-.8125,-.01563,-.27344,.8125,-.01563,-.27344,-.84375,.01563,-.27344,.84375,.01563,-.27344,-.82031,.08594,-.27344,.82031,.08594,-.27344,-.75781,.09375,-.27344,.75781,.09375,-.27344,-.83594,.17188,-.27344,.83594,.17188,-.27344,-.89063,.24219,-.26563,.89063,.24219,-.26563,-.79688,.20313,-.21094,-.85938,.32031,-.04688,.85938,.32031,-.04688,.79688,.20313,-.21094,-.84375,.28906,-.21094,.84375,.28906,-.21094,-.92188,.35938,-.21875,.92188,.35938,-.21875,-.82813,-.07031,-.13281,.82813,-.07031,-.13281,-.73438,-.04688,.07031,-.85156,.23438,.05469,.85156,.23438,.05469,.73438,-.04688,.07031,-1.01563,.41406,-.28906,1.01563,.41406,-.28906,-1.1875,.4375,-.39063,1.1875,.4375,-.39063,-1.26563,.28906,-.40625,1.26563,.28906,-.40625,-1.21094,.07813,-.40625,1.21094,.07813,-.40625,-1.03125,-.03906,-.30469,1.03125,-.03906,-.30469,-.42969,-.19531,-.21094,-.29688,-.3125,-.26563,.29688,-.3125,-.26563,.42969,-.19531,-.21094,-.61719,.32813,-.58594,-.46094,.4375,-.70313,.46094,.4375,-.70313,.61719,.32813,-.58594,-.60156,0,.41406,.60156,0,.41406,-.79688,.61719,-.11719,-.79688,.53906,-.35938,.79688,.53906,-.35938,.79688,.61719,-.11719,-.79688,.5625,.125,.79688,.5625,.125,-.72656,.40625,.33594,.72656,.40625,.33594,-.77344,.16406,.375,-.79688,.40625,.46094,.79688,.40625,.46094,.77344,.16406,.375,-.46094,.52344,.42969,-.48438,.55469,.55469,.48438,.55469,.55469,.46094,.52344,.42969,-.33594,.6875,.59375,-.19531,.66406,.61719,.19531,.66406,.61719,.33594,.6875,.59375,-.45313,.85156,.23438,0,.89844,.28906,.45313,.85156,.23438,-.63281,.45313,.28125,-.67969,.45313,.49219,.67969,.45313,.49219,.63281,.45313,.28125,-.64063,.70313,.05469,.64063,.70313,.05469,-.45313,.92969,-.07031,-.64063,.75,-.19531,.45313,.92969,-.07031,.64063,.75,-.19531,-.45313,.86719,-.38281,-.64063,.67969,-.44531,.45313,.86719,-.38281,.64063,.67969,-.44531,0,.89844,-.54688,0,.5625,-.85156,0,.98438,-.07813,0,.07031,-.82813,-.17969,-.41406,.25781,-.23438,-.35156,.40625,.23438,-.35156,.40625,.17969,-.41406,.25781,0,-.46094,.1875,0,-.48438,.28125,0,-.38281,-.35156,0,-.19531,-.67188,-.4375,-.14063,.53125,-.20313,-.1875,.5625,.20313,-.1875,.5625,.4375,-.14063,.53125,-.23438,-.25,.55469,.23438,-.25,.55469,-.25781,-.3125,.55469,-.3125,-.4375,.57031,.3125,-.4375,.57031,.25781,-.3125,.55469,-.25,-.5,.39063,-.35156,-.69531,.57031,.35156,-.69531,.57031,.25,-.5,.39063,-.125,-.53906,.35938,.125,-.53906,.35938,-.16406,-.94531,.4375,-.32813,-.91406,.39844,-.14063,-.75781,.36719,-.28906,-.71094,.38281,.28906,-.71094,.38281,.32813,-.91406,.39844,.14063,-.75781,.36719,.16406,-.94531,.4375,-.36719,-.89063,.53125,.36719,-.89063,.53125,-.32813,-.94531,.52344,.32813,-.94531,.52344,-.17969,-.96875,.55469,.17969,-.96875,.55469,0,-.97656,.46094,0,-.98438,.57813,0,-.80469,.34375,0,-.57031,.32031,-.63281,-.03906,.53906,.63281,-.03906,.53906,-.82813,.14844,.44531,.82813,.14844,.44531,-.85938,.42969,.59375,.85938,.42969,.59375,-.71094,.48438,.625,.71094,.48438,.625,-.49219,.60156,.6875,.49219,.60156,.6875,-.32031,.75781,.73438,.32031,.75781,.73438,-.15625,.71875,.75781,.15625,.71875,.75781,-.0625,.49219,.75,.0625,.49219,.75,0,.42969,.74219,-.20313,.17188,.75,-.1875,.15625,.77344,-.17188,.21875,.78125,-.19531,.22656,.75,.17188,.21875,.78125,.1875,.15625,.77344,.20313,.17188,.75,.19531,.22656,.75,-.17969,.29688,.78125,-.19531,.29688,.75781,.17969,.29688,.78125,.19531,.29688,.75781,-.21094,.375,.78125,-.23438,.35938,.75781,.21094,.375,.78125,.23438,.35938,.75781,-.24219,.125,.75781,-.22656,.10938,.78125,.22656,.10938,.78125,.24219,.125,.75781,-.375,.08594,.72656,-.375,.0625,.74219,.375,.0625,.74219,.375,.08594,.72656,-.46094,.11719,.70313,-.47656,.10156,.71875,.47656,.10156,.71875,.46094,.11719,.70313,-.54688,.21094,.67188,-.57813,.19531,.67969,.57813,.19531,.67969,.54688,.21094,.67188,-.55469,.28125,.67188,-.58594,.28906,.6875,.58594,.28906,.6875,.55469,.28125,.67188,-.53125,.33594,.67969,-.5625,.35156,.69531,.5625,.35156,.69531,.53125,.33594,.67969,-.41406,.39063,.75,-.42188,.39844,.77344,.42188,.39844,.77344,.41406,.39063,.75,-.33594,.40625,.75,-.33594,.42969,.75781,.33594,.42969,.75781,.33594,.40625,.75,-.28125,.39844,.76563,-.27344,.42188,.77344,.27344,.42188,.77344,.28125,.39844,.76563,-.16406,.41406,.77344,-.25,.46875,.75781,.25,.46875,.75781,.16406,.41406,.77344,-.32813,.47656,.74219,.32813,.47656,.74219,-.42969,.4375,.71875,.42969,.4375,.71875,-.60156,.375,.66406,.60156,.375,.66406,-.64063,.29688,.64844,.64063,.29688,.64844,-.625,.1875,.64844,.625,.1875,.64844,-.49219,.0625,.67188,.49219,.0625,.67188,-.375,.01563,.70313,.375,.01563,.70313,-.20313,.09375,.74219,.20313,.09375,.74219,-.16406,.14063,.75,.16406,.14063,.75,-.125,.30469,.76563,.125,.30469,.76563,-.13281,.21094,.75781,.13281,.21094,.75781,0,-.85938,.63281,0,-.78125,.65625,0,-.77344,.71875,-.09375,-.74219,.72656,.09375,-.74219,.72656,-.09375,-.82031,.71094,.09375,-.82031,.71094,-.04688,-.86719,.6875,.04688,-.86719,.6875,0,-.875,.6875,-.0625,-.88281,.69531,0,-.89063,.6875,.0625,-.88281,.69531,-.11719,-.83594,.71094,.11719,-.83594,.71094,-.10938,-.71875,.73438,.10938,-.71875,.73438,0,-.76563,.73438,-.16406,-.24219,.71094,-.125,-.10156,.8125,.125,-.10156,.8125,.16406,-.24219,.71094,-.17969,-.3125,.71094,.17969,-.3125,.71094,-.21094,-.44531,.71094,.21094,-.44531,.71094,-.07813,-.44531,.75,-.08594,-.28906,.74219,.08594,-.28906,.74219,.07813,-.44531,.75,-.125,-.22656,.75,.125,-.22656,.75,-.10156,-.14844,.74219,.10156,-.14844,.74219,0,-.14063,.74219,0,.04688,.72656,-.07813,-.25,.80469,0,-.28906,.80469,0,-.20313,.82813,-.10938,-.22656,.82813,.07813,-.25,.80469,.10938,-.22656,.82813,-.09375,-.15625,.8125,-.04688,-.14844,.8125,.04688,-.14844,.8125,.09375,-.15625,.8125,-.13281,-.22656,.79688,-.09375,-.27344,.78125,.13281,-.22656,.79688,.09375,-.27344,.78125,-.10938,-.13281,.78125,.10938,-.13281,.78125,-.03906,-.125,.78125,.03906,-.125,.78125,0,-.1875,.79688,0,-.32031,.78125,0,-.32813,.74219,0,-.19531,.75,-.11719,-.6875,.73438,0,-.67969,.73438,.11719,-.6875,.73438,0,-.44531,.75,-.25,-.70313,.6875,-.26563,-.82031,.66406,.26563,-.82031,.66406,.25,-.70313,.6875,-.23438,-.91406,.63281,.23438,-.91406,.63281,-.16406,-.92969,.63281,.16406,-.92969,.63281,0,-.94531,.64063,0,.21094,.76563,0,.35156,.82031,-.10156,.42969,.84375,.10156,.42969,.84375,-.39844,-.04688,.67188,.39844,-.04688,.67188,-.61719,.05469,.625,.61719,.05469,.625,-.72656,.20313,.60156,.72656,.20313,.60156,-.74219,.375,.65625,.74219,.375,.65625,-.6875,.41406,.72656,.6875,.41406,.72656,-.4375,.54688,.79688,.4375,.54688,.79688,-.3125,.64063,.83594,.3125,.64063,.83594,-.20313,.61719,.85156,.20313,.61719,.85156,-.46875,.24219,.75781,-.4375,.16406,.76563,.4375,.16406,.76563,.46875,.24219,.75781,-.35156,.13281,.78125,.35156,.13281,.78125,-.27344,.16406,.79688,.27344,.16406,.79688,-.24219,.24219,.79688,.24219,.24219,.79688,-.27344,.32813,.79688,.27344,.32813,.79688,-.35156,.35938,.78125,.35156,.35938,.78125,-.4375,.32813,.76563,.4375,.32813,.76563,-.5625,.24219,.67188,-.5,.39063,.6875,.5,.39063,.6875,.5625,.24219,.67188,-.625,.24219,.5625,-.54688,.4375,.57813,.54688,.4375,.57813,.625,.24219,.5625,-.35156,.51563,.61719,-.35156,.45313,.71875,.35156,.45313,.71875,.35156,.51563,.61719,-.20313,.39063,.74219,.20313,.39063,.74219,-.15625,.4375,.64844,.15625,.4375,.64844,-.07813,.24219,.65625,-.14063,.24219,.74219,.14063,.24219,.74219,.07813,.24219,.65625,-.20313,.09375,.74219,.20313,.09375,.74219,-.15625,.05469,.64844,.15625,.05469,.64844,-.35156,.03125,.71875,-.35156,-.02344,.61719,.35156,.03125,.71875,.35156,-.02344,.61719,-.5,.09375,.6875,.5,.09375,.6875,-.54688,.05469,.57813,.54688,.05469,.57813],r=[],i=0;i<n.length;i++){var a=n[i];r.push(a*e)}return{positions:r,indices:[0,1,2,3,4,5,6,1,0,5,4,7,0,8,6,7,9,5,0,10,8,9,11,5,0,12,10,11,13,5,0,14,12,13,15,5,0,16,14,15,17,5,0,2,16,17,3,5,18,19,20,21,22,23,24,25,26,26,27,24,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,64,66,67,68,69,70,68,70,71,64,72,73,64,73,65,74,75,70,74,70,69,76,77,72,77,73,72,74,78,75,78,79,75,61,63,80,61,80,81,82,58,60,82,60,83,64,81,72,81,80,72,82,83,75,83,70,75,80,84,72,84,76,72,79,85,75,85,82,75,63,86,80,86,84,80,85,87,82,87,58,82,62,88,63,88,86,63,87,89,58,89,59,58,61,90,62,90,88,62,89,91,59,91,60,59,81,92,90,81,90,61,91,93,83,91,83,60,64,67,92,64,92,81,93,71,70,93,70,83,94,56,55,94,55,95,54,53,96,54,96,97,98,94,99,94,95,99,97,96,100,96,101,100,102,98,103,98,99,103,100,101,104,101,105,104,106,102,103,106,103,107,104,105,108,104,108,109,106,107,110,107,111,110,112,109,113,109,108,113,114,115,116,114,116,117,118,119,120,118,120,121,115,114,122,114,123,122,124,120,125,120,119,125,126,122,127,122,123,127,124,125,128,125,129,128,126,127,57,126,57,56,52,128,129,52,129,53,94,98,56,98,126,56,129,101,53,101,96,53,98,102,122,98,122,126,125,105,101,125,101,129,102,106,122,106,115,122,119,108,125,108,105,125,106,110,115,110,116,115,118,113,119,113,108,119,103,130,107,130,131,107,132,133,109,133,104,109,99,134,103,134,130,103,133,135,104,135,100,104,95,136,99,136,134,99,135,137,100,137,97,100,55,138,136,55,136,95,137,139,54,137,54,97,57,140,138,57,138,55,139,141,52,139,52,54,127,142,140,127,140,57,141,143,128,141,128,52,107,131,144,107,144,111,145,132,109,145,109,112,111,144,146,111,146,110,147,145,112,147,112,113,110,146,116,146,148,116,149,147,118,147,113,118,116,148,117,148,150,117,151,149,121,149,118,121,117,150,152,117,152,114,153,151,121,153,121,120,114,152,123,152,154,123,155,153,124,153,120,124,123,154,142,123,142,127,143,155,124,143,124,128,49,51,156,51,157,156,158,46,159,46,48,159,160,156,77,156,157,77,158,159,78,159,161,78,154,160,142,160,162,142,163,161,143,161,155,143,152,156,154,156,160,154,161,159,155,159,153,155,49,156,150,156,152,150,153,159,151,159,48,151,146,49,150,146,150,148,151,48,147,151,147,149,50,49,144,49,146,144,147,48,145,48,47,145,144,131,164,144,164,50,165,132,145,165,145,47,162,160,77,162,77,76,78,161,163,78,163,79,51,166,167,51,167,157,168,169,46,168,46,158,164,67,50,67,66,50,68,71,47,71,165,47,50,66,51,66,166,51,169,68,46,68,47,46,142,162,170,142,170,140,171,163,143,171,143,141,138,140,172,140,170,172,171,141,173,141,139,173,136,138,174,138,172,174,173,139,175,139,137,175,134,136,176,136,174,176,175,137,177,137,135,177,130,134,176,130,176,178,177,135,133,177,133,179,131,130,178,131,178,164,179,133,132,179,132,165,164,178,92,164,92,67,93,179,165,93,165,71,178,176,92,176,90,92,91,177,93,177,179,93,176,174,90,174,88,90,89,175,91,175,177,91,174,172,88,172,86,88,87,173,89,173,175,89,172,170,84,172,84,86,85,171,173,85,173,87,162,76,170,76,84,170,85,79,171,79,163,171,44,43,180,43,181,180,182,42,183,42,41,183,44,180,65,180,66,65,68,183,69,183,41,69,44,184,45,184,185,45,186,187,40,187,41,40,44,65,184,65,73,184,74,69,187,69,41,187,33,37,39,33,39,31,34,36,28,34,28,30,31,39,188,31,188,166,189,34,30,189,30,169,180,31,66,31,166,66,169,30,68,30,183,68,180,181,31,181,32,31,29,182,30,182,183,30,190,191,77,191,73,77,74,192,78,192,193,78,190,77,157,190,157,194,158,78,193,158,193,195,194,157,167,194,167,196,168,158,195,168,195,197,167,198,196,198,199,196,200,201,197,201,168,197,202,203,27,202,27,26,25,204,205,25,205,26,206,207,203,207,27,203,25,208,204,208,209,204,210,202,211,202,26,211,26,205,211,205,212,211,213,214,202,214,203,202,204,215,205,215,216,205,213,202,210,213,210,217,212,205,216,212,216,218,217,210,219,217,219,220,221,212,218,221,218,222,220,219,223,220,223,224,225,221,222,225,222,226,224,223,185,224,185,184,186,225,226,186,226,187,224,184,191,184,73,191,74,187,192,187,226,192,191,190,220,191,220,224,222,193,192,222,192,226,190,194,217,190,217,220,218,195,193,218,193,222,194,196,213,194,213,217,216,197,195,216,195,218,196,199,214,196,214,213,215,200,197,215,197,216,185,223,227,185,227,228,227,225,186,227,186,228,223,219,229,223,229,227,229,221,225,229,225,227,219,210,229,210,211,229,211,212,229,212,221,229,45,185,230,185,228,230,228,186,230,186,40,230,166,188,198,166,198,167,201,189,169,201,169,168,32,231,33,231,232,33,233,234,28,234,29,28,231,32,235,231,235,236,235,29,234,235,234,236,32,181,237,32,237,235,237,182,29,237,29,235,181,43,237,43,238,237,238,42,237,42,182,237,43,45,238,45,230,238,230,40,238,40,42,238,39,38,239,38,240,239,241,35,242,35,34,242,37,243,38,243,240,38,241,244,35,244,36,35,33,232,245,232,246,245,247,233,248,233,28,248,37,33,243,33,245,243,248,28,244,28,36,244,249,250,246,249,246,232,247,251,252,247,252,233,253,249,231,249,232,231,233,252,234,252,254,234,255,256,257,256,258,257,259,260,261,260,262,261,253,257,258,253,258,249,259,261,254,259,254,252,258,263,250,258,250,249,251,264,259,251,259,252,256,265,263,256,263,258,264,266,260,264,260,259,255,267,265,255,265,256,266,268,262,266,262,260,269,270,267,269,267,255,268,270,269,268,269,262,257,271,255,271,269,255,269,271,262,271,261,262,253,272,257,272,271,257,271,272,261,272,254,261,231,236,253,236,272,253,272,236,254,236,234,254,39,239,273,39,273,188,274,242,34,274,34,189,188,273,275,188,275,198,276,274,189,276,189,201,198,275,199,275,277,199,278,276,200,276,201,200,199,277,279,199,279,214,280,278,200,280,200,215,214,279,203,279,281,203,282,280,204,280,215,204,203,281,206,281,283,206,284,282,209,282,204,209,206,283,207,283,285,207,286,284,208,284,209,208,207,285,287,207,287,27,288,286,208,288,208,25,27,287,289,27,289,24,289,288,25,289,25,24,290,291,292,290,292,293,294,295,296,294,296,297,293,292,298,293,298,299,300,294,297,300,297,301,299,298,302,299,302,303,304,300,301,304,301,305,306,307,291,306,291,290,295,308,309,295,309,296,310,311,306,311,307,306,308,312,309,312,313,309,314,315,310,315,311,310,312,316,313,316,317,313,318,319,315,318,315,314,316,320,321,316,321,317,322,323,318,323,319,318,320,324,321,324,325,321,326,327,323,326,323,322,324,328,329,324,329,325,330,331,326,331,327,326,328,332,329,332,333,329,334,335,330,335,331,330,332,336,333,336,337,333,338,339,335,338,335,334,336,340,341,336,341,337,303,302,339,303,339,338,340,304,305,340,305,341,302,342,343,302,343,339,344,345,304,344,304,340,339,343,346,339,346,335,347,344,340,347,340,336,335,346,348,335,348,331,349,347,336,349,336,332,331,348,327,348,350,327,351,349,328,349,332,328,327,350,323,350,352,323,353,351,324,351,328,324,323,352,354,323,354,319,355,353,324,355,324,320,319,354,356,319,356,315,357,355,320,357,320,316,315,356,358,315,358,311,359,357,316,359,316,312,311,358,360,311,360,307,361,359,312,361,312,308,307,360,291,360,362,291,363,361,295,361,308,295,298,364,302,364,342,302,345,365,304,365,300,304,292,366,364,292,364,298,365,367,294,365,294,300,291,362,366,291,366,292,367,363,295,367,295,294,22,368,369,22,369,23,369,368,19,369,19,18,369,370,23,370,371,23,372,370,18,370,369,18,23,371,373,23,373,21,374,372,18,374,18,20,21,373,375,21,375,22,376,374,20,376,20,19,22,375,368,375,377,368,377,376,368,376,19,368,375,378,379,375,379,377,379,380,376,379,376,377,373,381,378,373,378,375,380,382,374,380,374,376,371,383,381,371,381,373,382,384,372,382,372,374,370,385,371,385,383,371,384,385,372,385,370,372,386,387,240,386,240,243,241,388,389,241,389,244,386,243,390,243,245,390,248,244,391,244,389,391,390,245,392,245,246,392,247,248,393,248,391,393,392,394,390,394,395,390,396,397,391,397,393,391,390,395,386,395,398,386,399,396,389,396,391,389,386,398,400,386,400,387,401,399,389,401,389,388,387,400,402,387,402,403,402,401,388,402,388,403,404,405,406,404,406,407,406,405,408,406,408,409,410,407,411,407,406,411,406,409,412,409,413,412,404,407,414,404,414,415,416,409,408,416,408,417,407,410,414,410,418,414,419,413,416,413,409,416,410,411,420,410,420,418,421,412,413,421,413,419,411,406,422,411,422,420,422,406,412,422,412,421,404,415,405,415,423,405,423,417,405,417,408,405,415,395,423,395,424,423,424,396,423,396,417,423,420,422,402,422,425,402,425,422,402,422,421,402,418,420,400,420,402,400,402,421,401,421,419,401,414,418,398,418,400,398,401,419,399,419,416,399,415,414,398,415,398,395,399,416,417,399,417,396,426,383,427,383,385,427,385,384,427,384,428,427,429,394,427,394,426,427,428,397,427,397,429,427,429,424,394,424,395,394,396,424,397,424,429,397,430,431,383,430,383,426,384,432,433,384,433,428,426,394,392,426,392,430,393,397,428,393,428,433,434,381,431,381,383,431,384,382,432,382,435,432,436,378,381,436,381,434,382,380,437,382,437,435,438,379,378,438,378,436,380,379,438,380,438,437,366,362,439,362,403,439,403,363,439,363,367,439,439,440,364,439,364,366,365,440,439,365,439,367,440,441,364,441,342,364,345,442,365,442,440,365,403,362,360,403,360,387,361,363,403,361,403,388,443,387,360,443,360,358,361,388,444,361,444,359,445,443,356,443,358,356,359,444,357,444,446,357,447,445,354,445,356,354,357,446,355,446,448,355,449,447,352,447,354,352,355,448,353,448,450,353,451,449,350,449,352,350,353,450,351,450,452,351,453,451,348,451,350,348,351,452,349,452,454,349,455,453,346,453,348,346,349,454,347,454,456,347,455,346,343,455,343,457,344,347,456,344,456,458,457,343,441,343,342,441,345,344,442,344,458,442,440,289,441,289,287,441,288,289,442,289,440,442,441,287,457,287,285,457,286,288,458,288,442,458,457,285,455,285,283,455,284,286,456,286,458,456,455,283,281,455,281,453,282,284,456,282,456,454,453,281,451,281,279,451,280,282,452,282,454,452,451,279,449,279,277,449,278,280,450,280,452,450,449,277,447,277,275,447,276,278,448,278,450,448,447,275,273,447,273,445,274,276,448,274,448,446,445,273,443,273,239,443,242,274,444,274,446,444,443,239,240,443,240,387,241,242,444,241,444,388,430,392,246,430,246,250,247,393,433,247,433,251,431,430,250,431,250,263,251,433,432,251,432,264,434,431,263,434,263,265,264,432,435,264,435,266,436,434,267,434,265,267,266,435,268,435,437,268,438,436,270,436,267,270,268,437,270,437,438,270,3,459,460,3,460,4,461,462,2,461,2,1,4,460,463,4,463,7,464,461,1,464,1,6,7,463,465,7,465,9,466,464,6,466,6,8,9,465,467,9,467,11,468,466,8,468,8,10,11,467,13,467,469,13,470,468,12,468,10,12,13,469,15,469,471,15,472,470,14,470,12,14,15,471,17,471,473,17,474,472,16,472,14,16,17,473,3,473,459,3,462,474,2,474,16,2,475,459,476,459,473,476,474,462,477,462,478,477,479,475,480,475,476,480,477,478,481,478,482,481,480,476,483,476,484,483,485,477,486,477,481,486,476,473,484,473,471,484,472,474,485,474,477,485,484,471,487,471,469,487,470,472,488,472,485,488,483,484,489,484,487,489,488,485,490,485,486,490,489,487,491,487,492,491,493,488,494,488,490,494,487,469,467,487,467,492,468,470,488,468,488,493,492,467,495,467,465,495,466,468,496,468,493,496,491,492,497,492,495,497,496,493,498,493,494,498,497,495,499,497,499,500,501,496,498,501,498,502,495,465,463,495,463,499,464,466,496,464,496,501,499,463,460,499,460,503,461,464,501,461,501,504,500,499,503,500,503,505,504,501,502,504,502,506,505,503,475,505,475,479,478,504,506,478,506,482,503,460,459,503,459,475,462,461,504,462,504,478],normals:[.18976,-.00357,.98181,.64681,-.7582,.08209,.99957,-.0145,-.02445,-.99957,-.0145,-.02445,-.64681,-.7582,.08209,-.18976,-.00357,.98181,-.08579,-.98297,.16239,.08579,-.98297,.16239,-.74483,-.62377,.23682,.74483,-.62377,.23682,-.87097,-.01471,.4911,.87097,-.01471,.4911,-.75835,.60613,.23969,.75835,.60613,.23969,-.08579,.98251,.16511,.08579,.98251,.16511,.65514,.75063,.08557,-.65514,.75063,.08557,-.34928,-.71993,.59972,-.17368,.21574,.96084,-.80984,.38829,.43974,.80984,.38829,.43974,.17368,.21574,.96084,.34928,-.71993,.59972,0,.79418,.60765,-.50865,.85812,-.06989,0,.48708,.87335,.50865,.85812,-.06989,.98141,-.18668,.04395,.56981,-.82171,.00781,.56346,-.81457,.13767,-.56346,-.81457,.13767,-.56981,-.82171,.00781,-.98141,-.18668,.04395,.47584,-.87625,.07538,.85052,-.52553,-.02069,.87695,-.16382,.45177,-.87695,-.16382,.45177,-.85052,-.52553,-.02069,-.47584,-.87625,.07538,.44829,-.36787,-.81466,.53053,-.53945,-.65383,.51308,-.67467,-.53059,-.51308,-.67467,-.53059,-.53053,-.53945,-.65383,-.44829,-.36787,-.81466,.88818,-.43995,-.13239,.58852,.22697,.77593,.91153,-.11527,.39467,-.91153,-.11527,.39467,-.58852,.22697,.77593,-.88818,-.43995,-.13239,.46889,-.30473,.829,.25156,.26078,.932,-.00308,-.33088,.94363,.00308,-.33088,.94363,-.25156,.26078,.932,-.46889,-.30473,.829,.47307,.579,-.66402,.99246,.02863,-.1189,.45997,-.38026,-.80236,-.45997,-.38026,-.80236,-.99246,.02863,-.1189,-.47307,.579,-.66402,-.05991,-.80471,-.59059,-.34614,-.63729,-.6885,-.33055,-.94324,.03128,-.07367,-.59499,.80032,.33055,-.94324,.03128,.34614,-.63729,-.6885,.05991,-.80471,-.59059,.07367,-.59499,.80032,.59374,.59526,-.54137,-.62606,-.00269,-.77975,.62606,-.00269,-.77975,-.59374,.59526,-.54137,.12769,.70376,.69884,-.71383,.38218,.58681,.71383,.38218,.58681,-.12769,.70376,.69884,.37806,.56005,-.73714,.03681,-.70846,-.70476,-.37806,.56005,-.73714,-.03681,-.70846,-.70476,-.03156,.83871,.54363,.03156,.83871,.54363,-.36116,.84869,.3863,.36116,.84869,.3863,-.71639,.20447,.66704,.71639,.20447,.66704,-.66204,-.41377,.62487,.66204,-.41377,.62487,-.53023,-.65575,.53737,.53023,-.65575,.53737,-.43748,.00122,.8992,.55098,-.1381,.82299,.43748,.00122,.8992,-.55098,-.1381,.82299,-.31596,-.1023,.94321,.60854,.29612,.73617,-.60854,.29612,.73617,.31596,-.1023,.94321,-.44548,-.08878,.89087,-.2577,.60002,.75732,.2577,.60002,.75732,.44548,-.08878,.89087,-.3278,.16993,.92932,.04178,.92721,.37211,.3278,.16993,.92932,-.04178,.92721,.37211,-.27793,.2602,.92468,-.75072,.11155,.65111,.75072,.11155,.65111,.27793,.2602,.92468,-.43791,-.29398,.84957,-.18378,.03684,.98227,-.55422,.38722,.73681,-.81433,.25343,.52211,.55422,.38722,.73681,.18378,.03684,.98227,.43791,-.29398,.84957,.81433,.25343,.52211,-.32667,-.00162,.94513,-.70434,-.52687,.47569,.70434,-.52687,.47569,.32667,-.00162,.94513,-.30879,.13462,.94153,-.62917,-.37144,.68273,.62917,-.37144,.68273,.30879,.13462,.94153,.14618,.94864,.28047,-.13752,.90582,.40071,.13752,.90582,.40071,-.14618,.94864,.28047,.72375,.69002,-.00522,-.72375,.69002,-.00522,.99469,-.07801,.06702,-.99469,-.07801,.06702,.20093,-.75814,.62035,-.20093,-.75814,.62035,-.54125,-.67266,.5045,.54125,-.67266,.5045,-.69005,-.55321,.46663,.69005,-.55321,.46663,-.464,.68667,.55956,.464,.68667,.55956,-.82745,-.1359,.54479,.82745,-.1359,.54479,-.46623,.80886,.3582,.46623,.80886,.3582,-.74398,-.02292,.66778,.74398,-.02292,.66778,-.71129,-.63833,.29414,.71129,-.63833,.29414,-.70977,-.502,.49413,.70977,-.502,.49413,-.8189,-.42552,.38511,-.99252,-.07144,-.09876,.99252,-.07144,-.09876,.8189,-.42552,.38511,-.43919,-.27357,.85571,.43919,-.27357,.85571,-.41469,-.05988,.90796,.41469,-.05988,.90796,-.34156,.45213,.82394,.34156,.45213,.82394,-.72451,-.68493,.07663,-.98755,-.12302,.09799,.98755,-.12302,.09799,.72451,-.68493,.07663,-.57274,-.08844,.81494,.57274,-.08844,.81494,-.29182,-.1521,.94427,.29182,-.1521,.94427,.23966,-.1286,.96228,-.23966,-.1286,.96228,.18702,.37068,.9097,-.18702,.37068,.9097,-.45579,.42317,.78304,.45579,.42317,.78304,-.5435,-.81338,-.20734,-.56005,-.81442,-.15174,.56005,-.81442,-.15174,.5435,-.81338,-.20734,-.61538,-.08765,-.78332,-.44731,.22953,-.86441,.44731,.22953,-.86441,.61538,-.08765,-.78332,-.54717,-.83218,-.08979,.54717,-.83218,-.08979,-.87313,.48698,-.02026,-.86535,.33122,-.37605,.86535,.33122,-.37605,.87313,.48698,-.02026,-.74874,.51839,.41304,.74874,.51839,.41304,-.76617,.63482,.09961,.76617,.63482,.09961,-.95318,-.2483,-.17243,-.66564,.6025,-.44032,.66564,.6025,-.44032,.95318,-.2483,-.17243,-.32264,.84771,.42103,-.18857,.78893,-.58477,.18857,.78893,-.58477,.32264,.84771,.42103,-.23978,.74526,-.62212,.49425,.52058,-.69616,-.49425,.52058,-.69616,.23978,.74526,-.62212,-.4807,.73122,.48393,0,.75869,.65142,.4807,.73122,.48393,-.48924,.76296,.4225,-.36311,.90857,-.20646,.36311,.90857,-.20646,.48924,.76296,.4225,-.64504,.69454,.31861,.64504,.69454,.31861,-.49284,.86901,.04306,-.67943,.72897,-.08347,.49284,.86901,.04306,.67943,.72897,-.08347,-.39174,.82601,-.40522,-.6444,.52721,-.55388,.39174,.82601,-.40522,.6444,.52721,-.55388,0,.80071,-.59902,0,.33073,-.94369,0,.99966,.02564,0,-.27146,-.96243,-.68529,-.58315,-.43623,-.90722,.2526,-.33625,.90722,.2526,-.33625,.68529,-.58315,-.43623,0,-.98434,-.17621,0,-.73635,-.67656,0,-.94876,-.31593,0,-.64824,-.76141,-.31736,-.94696,-.04996,-.83828,-.40815,.36146,.83828,-.40815,.36146,.31736,-.94696,-.04996,-.93936,.326,.10611,.93936,.326,.10611,-.93063,.34016,.13477,-.96014,.23136,.15677,.96014,.23136,.15677,.93063,.34016,.13477,-.81256,-.00107,-.58284,-.97958,.09339,.17786,.97958,.09339,.17786,.81256,-.00107,-.58284,-.27253,-.30116,-.91379,.27253,-.30116,-.91379,-.09091,-.77633,-.62371,-.50685,-.48814,-.71047,-.14252,-.14728,-.97876,-.63726,.09333,-.76495,.63726,.09333,-.76495,.50685,-.48814,-.71047,.14252,-.14728,-.97876,.09091,-.77633,-.62371,-.93728,-.25425,.23835,.93728,-.25425,.23835,-.43052,-.89526,.1146,.43052,-.89526,.1146,-.15839,-.97482,.15677,.15839,-.97482,.15677,0,-.91586,-.40144,0,-.94644,.32286,0,-.3368,-.94156,0,-.17573,-.98444,-.59923,-.77398,.20457,.59923,-.77398,.20457,-.89099,-.42326,-.16404,.89099,-.42326,-.16404,-.85199,.21928,.47539,.85199,.21928,.47539,-.50917,.85223,.12,.50917,.85223,.12,-.61043,.75915,.22587,.61043,.75915,.22587,-.18247,.98178,.05249,.18247,.98178,.05249,.52037,.77035,.36839,-.52037,.77035,.36839,.85272,.50426,.1362,-.85272,.50426,.1362,0,.97021,.24216,-.70965,.26182,.65404,.06729,-.06427,.99564,-.24659,-.03409,.9685,-.80972,-.01022,.58669,.24659,-.03409,.9685,-.06729,-.06427,.99564,.70965,.26182,.65404,.80972,-.01022,.58669,-.46583,-.08032,.88119,-.73711,-.24418,.63009,.46583,-.08032,.88119,.73711,-.24418,.63009,-.21195,-.08597,.97348,-.3675,-.37648,.8504,.21195,-.08597,.97348,.3675,-.37648,.8504,-.43028,.5566,.71062,-.02008,-.07294,.99713,.02008,-.07294,.99713,.43028,.5566,.71062,-.09098,.59734,.79678,-.18793,-.09162,.97787,.18793,-.09162,.97787,.09098,.59734,.79678,.16593,.60936,.77529,-.20331,.09253,.9747,.20331,.09253,.9747,-.16593,.60936,.77529,.2693,.24168,.93222,-.31422,-.13242,.94006,.31422,-.13242,.94006,-.2693,.24168,.93222,.42006,-.11899,.89962,-.11975,-.07093,.99023,.11975,-.07093,.99023,-.42006,-.11899,.89962,.22614,-.60659,.76214,-.32084,.04071,.94623,.32084,.04071,.94623,-.22614,-.60659,.76214,.23261,-.74606,.62389,-.07456,-.39164,.91708,.07456,-.39164,.91708,-.23261,-.74606,.62389,-.12125,-.31388,.94168,-.1467,-.03571,.98853,.1467,-.03571,.98853,.12125,-.31388,.94168,-.21683,-.27372,.93701,-.18744,.00116,.98227,.18744,.00116,.98227,.21683,-.27372,.93701,-.30302,-.20194,.93133,-.25309,-.16181,.95379,.25309,-.16181,.95379,.30302,-.20194,.93133,-.14011,-.09119,.9859,.14011,-.09119,.9859,-.23798,.05017,.96994,.23798,.05017,.96994,-.31266,-.23792,.91955,.31266,-.23792,.91955,-.37379,-.1052,.92151,.37379,-.1052,.92151,-.4706,-.16465,.86682,.4706,-.16465,.86682,-.43922,-.37614,.81582,.43922,-.37614,.81582,-.21961,-.54064,.81204,.21961,-.54064,.81204,.16697,-.37483,.91189,-.16697,-.37483,.91189,.20185,-.2776,.93924,-.20185,-.2776,.93924,.00116,-.16556,.98618,-.00116,-.16556,.98618,.29292,-.17411,.94012,-.29292,-.17411,.94012,0,.7322,.68105,0,-.60363,.79727,0,-.97174,.23591,.13178,-.60829,.78268,-.13178,-.60829,.78268,.75912,.06839,.6473,-.75912,.06839,.6473,.40596,.6436,.64879,-.40596,.6436,.64879,0,.59835,.8012,.07385,-.33055,.94086,0,-.12452,.99219,-.07385,-.33055,.94086,-.08512,-.33924,.93683,.08512,-.33924,.93683,-.14188,-.14835,.9787,.14188,-.14835,.9787,0,-.4828,.8757,-.69298,-.00134,.72091,-.09552,-.32609,.94049,.09552,-.32609,.94049,.69298,-.00134,.72091,-.64669,.1626,.7452,.64669,.1626,.7452,-.59346,.12186,.79556,.59346,.12186,.79556,-.12436,.00967,.99219,-.50999,-.45772,.72823,.50999,-.45772,.72823,.12436,.00967,.99219,-.97214,-.16788,.16355,.97214,-.16788,.16355,-.71599,.57216,.39995,.71599,.57216,.39995,0,.43052,.90255,0,.01086,.99994,-.22184,-.60604,.76385,0,-.49293,.87002,0,.01032,.99994,-.29432,-.18448,.93771,.22184,-.60604,.76385,.29432,-.18448,.93771,-.39692,.53499,.74578,.24778,.56822,.78466,-.24778,.56822,.78466,.39692,.53499,.74578,-.86822,-.26133,.42174,-.55599,-.69069,.46236,.86822,-.26133,.42174,.55599,-.69069,.46236,-.75307,.64989,.1023,.75307,.64989,.1023,.19419,.9357,.29447,-.19419,.9357,.29447,0,.78896,.6144,0,-.88864,.45857,0,-.33677,.94156,0,-.25199,.96771,-.18836,-.04013,.98126,0,-.0329,.99945,.18836,-.04013,.98126,0,0,1,-.57204,-.01871,.82,-.53633,-.21241,.81683,.53633,-.21241,.81683,.57204,-.01871,.82,-.35771,-.63833,.68157,.35771,-.63833,.68157,-.1543,-.75411,.63833,.1543,-.75411,.63833,0,-.74346,.66875,0,-.18912,.98193,0,-.11447,.99341,.0014,-.05564,.99844,-.0014,-.05564,.99844,-.33628,-.51283,.78985,.33628,-.51283,.78985,-.45454,-.33708,.82446,.45454,-.33708,.82446,-.54347,-.3086,.7806,.54347,-.3086,.7806,-.38716,-.18781,.90265,.38716,-.18781,.90265,-.43065,-.1449,.8908,.43065,-.1449,.8908,-.23402,-.12055,.96472,.23402,-.12055,.96472,-.26383,.1688,.94967,.26383,.1688,.94967,.19672,.14188,.97012,-.19672,.14188,.97012,-.90677,-.00833,.42152,-.74413,-.64092,.18827,.74413,-.64092,.18827,.90677,-.00833,.42152,-.04419,-.97439,.22031,.04419,-.97439,.22031,.63994,-.7615,.10279,-.63994,-.7615,.10279,.9555,-.01144,.29472,-.9555,-.01144,.29472,.64968,.75439,.09357,-.64968,.75439,.09357,-.03705,.97888,.2009,.03705,.97888,.2009,-.75234,.6354,.17374,.75234,.6354,.17374,-.81179,-.00278,.58388,-.59694,.48677,.63768,.59694,.48677,.63768,.81179,-.00278,.58388,-.86822,-.00583,.49611,-.7195,.47301,.50847,.7195,.47301,.50847,.86822,-.00583,.49611,-.20426,.82876,.52095,-.09577,.71728,.69015,.09577,.71728,.69015,.20426,.82876,.52095,.4517,.45988,.76446,-.4517,.45988,.76446,.45036,.6939,.56182,-.45036,.6939,.56182,.80554,.10941,.58232,.69149,-.0741,.71856,-.69149,-.0741,.71856,-.80554,.10941,.58232,.38621,-.47468,.79086,-.38621,-.47468,.79086,.55776,-.62911,.54137,-.55776,-.62911,.54137,-.09116,-.72372,.68401,-.19974,-.85806,.47307,.09116,-.72372,.68401,.19974,-.85806,.47307,-.59795,-.49648,.62923,.59795,-.49648,.62923,-.7232,-.48891,.48775,.7232,-.48891,.48775]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return i}),e.setMatrixArrayType=function(t){i=t},e.toRadian=function(t){return t*o},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};const r=1e-6;e.EPSILON=r;let i="undefined"!=typeof Float32Array?Float32Array:Array;const a=Math.random;e.RANDOM=a;const o=Math.PI/180},,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.mod=function(t,e){return(t%e+e)%e},e.random=function(t,e){return Math.random()*(e-t)+t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){let e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,i,a,o,s,u,c){let l=new r.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=i,l[4]=a,l[5]=o,l[6]=s,l[7]=u,l[8]=c,l},e.set=function(t,e,n,r,i,a,o,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=l*o-s*c,f=-l*a+s*u,d=c*a-o*u,v=n*h+r*f+i*d;if(!v)return null;return v=1/v,t[0]=h*v,t[1]=(-l*r+i*c)*v,t[2]=(s*r-i*o)*v,t[3]=f*v,t[4]=(l*n-i*u)*v,t[5]=(-s*n+i*a)*v,t[6]=d*v,t[7]=(-c*n+r*u)*v,t[8]=(o*n-r*a)*v,t},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=o*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*o,t[3]=s*u-a*l,t[4]=n*l-i*u,t[5]=i*a-n*s,t[6]=a*c-o*u,t[7]=r*u-n*c,t[8]=n*o-r*a,t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-o*u)+n*(-c*i+o*s)+r*(u*i-a*s)},e.multiply=i,e.translate=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=f*r+d*o+c,t[7]=f*i+d*s+l,t[8]=f*a+d*u+h,t},e.rotate=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*r+f*o,t[1]=d*i+f*s,t[2]=d*a+f*u,t[3]=d*o-f*r,t[4]=d*s-f*i,t[5]=d*u-f*a,t[6]=c,t[7]=l,t[8]=h,t},e.scale=function(t,e,n){let r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,d=i*s,v=i*u,p=a*o,m=a*s,g=a*u;return t[0]=1-h-v,t[3]=l-g,t[6]=f+m,t[1]=l+g,t[4]=1-c-v,t[7]=d-p,t[2]=f-m,t[5]=d+p,t[8]=1-c-h,t},e.normalFromMat4=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],v=e[12],p=e[13],m=e[14],g=e[15],M=n*s-r*o,b=n*u-i*o,y=n*c-a*o,x=r*u-i*s,_=r*c-a*s,E=i*c-a*u,w=l*p-h*v,P=l*m-f*v,T=l*g-d*v,A=h*m-f*p,O=h*g-d*p,R=f*g-d*m,S=M*R-b*O+y*A+x*T-_*P+E*w;if(!S)return null;return S=1/S,t[0]=(s*R-u*O+c*A)*S,t[1]=(u*T-o*R-c*P)*S,t[2]=(o*O-s*T+c*w)*S,t[3]=(i*O-r*R-a*A)*S,t[4]=(n*R-i*T+a*P)*S,t[5]=(r*T-n*O-a*w)*S,t[6]=(p*E-m*_+g*x)*S,t[7]=(m*y-v*E-g*b)*S,t[8]=(v*_-p*y+g*M)*S,t},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=e[0],d=e[1],v=e[2],p=e[3],m=e[4],g=e[5],M=e[6],b=e[7],y=e[8];return Math.abs(n-f)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-v)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-p)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-g)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-M)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(l-b)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(h-y)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))};var r=n(5);function i(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=n[0],d=n[1],v=n[2],p=n[3],m=n[4],g=n[5],M=n[6],b=n[7],y=n[8];return t[0]=f*r+d*o+v*c,t[1]=f*i+d*s+v*l,t[2]=f*a+d*u+v*h,t[3]=p*r+m*o+g*c,t[4]=p*i+m*s+g*l,t[5]=p*a+m*u+g*h,t[6]=M*r+b*o+y*c,t[7]=M*i+b*s+y*l,t[8]=M*a+b*u+y*h,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}const o=i;e.mul=o;const s=a;e.sub=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=s,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=l,e.squaredDistance=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=d,e.dot=v,e.cross=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t},e.lerp=function(t,e,n,r){let i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t},e.hermite=function(t,e,n,r,i,a){let o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),l=o*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t},e.bezier=function(t,e,n,r,i,a){let o=1-a,s=o*o,u=a*a,c=s*o,l=3*a*s,h=3*u*o,f=u*a;return t[0]=e[0]*c+n[0]*l+r[0]*h+i[0]*f,t[1]=e[1]*c+n[1]*l+r[1]*h+i[1]*f,t[2]=e[2]*c+n[2]*l+r[2]*h+i[2]*f,t},e.random=function(t,e){e=e||1;let n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,a=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=i*e,t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t},e.transformMat3=function(t,e,n){let r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*i,h=c*i+u*r-o*a,f=c*a+o*i-s*r,d=-o*r-s*i-u*a;return t[0]=l*c+d*-o+h*-u-f*-s,t[1]=h*c+d*-s+f*-o-l*-u,t[2]=f*c+d*-u+l*-s-h*-o,t},e.rotateX=function(t,e,n,r){let i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,r){let i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,r){let i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.angle=function(t,e){let n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);d(n,n),d(r,r);let i=v(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],u=e[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var r=n(5);function i(){let t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){let i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function h(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function f(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function d(t,e){let n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function v(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}const p=s;e.sub=p;const m=u;e.mul=m;const g=c;e.div=g;const M=l;e.dist=M;const b=h;e.sqrDist=b;const y=a;e.len=y;const x=f;e.sqrLen=x;const _=function(){let t=i();return function(e,n,r,i,a,o){let s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();e.forEach=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.clone=function(t){let e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,i){let a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=o,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=c,e.squaredDistance=l,e.length=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=d,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){let i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t},e.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),d(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*i,h=c*i+u*r-o*a,f=c*a+o*i-s*r,d=-o*r-s*i-u*a;return t[0]=l*c+d*-o+h*-u-f*-s,t[1]=h*c+d*-s+f*-o-l*-u,t[2]=f*c+d*-u+l*-s-h*-o,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))};var r=n(5);function i(){let t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function c(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function l(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+i*i+a*a}function h(t){let e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function f(t){let e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function d(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o),t}const v=a;e.sub=v;const p=o;e.mul=p;const m=s;e.div=m;const g=c;e.dist=g;const M=l;e.sqrDist=M;const b=h;e.len=b;const y=f;e.sqrLen=y;const x=function(){let t=i();return function(e,n,r,i,a,o){let s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();e.forEach=x},,,,,function(t,e,n){"use strict";(function(t){var e,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(21),a=n(3),o=n(4),s=n(1),u=(e=s)&&e.__esModule?e:{default:e},c=n(12);var l=a.chunks.UBO,h=a.chunks.NOISE,f=a.chunks.FOG;new(function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,u.default),r(n,[{key:"setup",value:function(){this.renderer=new a.Renderer,document.body.appendChild(this.renderer.domElement),this.scene=new a.Scene,this.scene.fog.start=1e3,this.scene.fog.end=1800,this.scene.fog.enable=!0,this.camera=new a.cameras.Perspective({near:.01,far:1e4}),this.camera.position.set(0,400,1200)}},{key:"debug",value:function(){this.settings={width:80,height:150,depth:80,row:34,col:20,speed:5,seed:700,scale:110},this.mouse=i.vec2.create(),this.offset=i.vec2.create()}},{key:"init",value:function(){for(var t=this,e="#version 300 es\n            in vec3 a_position;\n            in vec3 a_offset;\n            in vec3 a_normal;\n\n            "+l.scene()+"\n            "+l.model()+"\n            "+h()+"\n\n            uniform float u_seed;\n            uniform float u_scale;\n            uniform float u_speed;\n\n            out vec3 v_color;\n\n            float noise(vec3 p) {\n                float n = 0.0;\n                n += 1.00 * (cnoise(p * 1.0));\n                return n;\n            }\n\n            float map(float value, float inMin, float inMax, float outMin, float outMax) {\n                if (inMin == inMax) return 0.5;\n                return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n            }\n\n            void main() {\n                float n = noise(vec3(a_offset / u_seed) + vec3(u_speed / 100.0 * iGlobalTime));\n                vec3 position = a_position + a_offset + vec3(0.0, n * u_scale, 0.0);\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n\n                float v = 200.0;\n                v_color = vec3( map(position.y, -v, v, 0., 1.) );\n            }\n        ",n="#version 300 es\n            precision highp float;\n            precision highp int;\n\n            in vec3 v_color;\n\n            "+l.scene()+"\n\n            out vec4 outColor;\n\n            void main() {\n                vec4 base = vec4(v_color, 1.0);\n                "+f.linear()+"\n                outColor = base;\n            }\n        ",r=this.settings.row*this.settings.col,i=[],s=this.settings,u=s.width,c=s.height,d=s.depth,v=0;v<r;v++)i.push(0,0,0);var p=new o.Box(u/2,c/2,d/2);this.model=new a.Model,this.model.setAttribute("a_position","vec3",new Float32Array(p.positions)),this.model.setIndex(new Uint16Array(p.indices)),this.model.setAttribute("a_normal","vec3",new Float32Array(p.normals)),this.model.setInstanceAttribute("a_offset","vec3",new Float32Array(i),!0),this.model.setInstanceCount(r),this.model.setUniform("u_seed","float",this.settings.seed),this.model.setUniform("u_scale","float",this.settings.scale),this.model.setUniform("u_speed","float",this.settings.speed),this.model.setShader(e,n),this.scene.add(this.model),this.renderer.domElement.addEventListener("mousemove",function(e){t.move(e)},!1),this.renderer.domElement.addEventListener("touchmove",function(e){e.preventDefault(),t.move(e.touches[0])},!1)}},{key:"resize",value:function(){this.renderer.setSize(t.innerWidth,t.innerHeight),this.renderer.setRatio(t.devicePixelRatio),this.initialX=this.settings.row*this.settings.width/-2,this.initialX+=this.settings.width/2,this.initialZ=this.settings.col*this.settings.depth/-2,this.initialZ+=this.settings.depth/2,this.maxWidth=this.settings.row*this.settings.width,this.maxDepth=this.settings.col*this.settings.depth}},{key:"move",value:function(e){this.mouse[0]=e.clientX/t.innerWidth*2-1,this.mouse[1]=-e.clientY/t.innerHeight*2+1}},{key:"updateOffsets",value:function(){this.offset[0]-=10*this.mouse[0],this.offset[1]+=10*this.mouse[1],this.model.dirty.attributes=!0,this.offset[1]+=this.settings.speed;for(var t=0,e=void 0,n=void 0,r=this.model.attributes.a_offset.value,i=0;i<r.length;i+=3)e=Math.floor(t/this.settings.col)*this.settings.width,n=t%this.settings.col*this.settings.depth,r[i+0]=this.initialX+(0,c.mod)(e+this.offset[0],this.maxWidth),r[i+1]=0,r[i+2]=this.initialZ+(0,c.mod)(n+this.offset[1],this.maxDepth),t++}},{key:"update",value:function(){this.updateOffsets(),this.renderer.render(this.scene,this.camera)}}]),n}())}).call(e,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),i=n(22),a=n(23),o=n(13),s=n(24),u=n(25),c=n(26),l=n(14),h=n(15);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return i}),n.d(e,"mat2d",function(){return a}),n.d(e,"mat3",function(){return o}),n.d(e,"mat4",function(){return s}),n.d(e,"quat",function(){return u}),n.d(e,"vec2",function(){return c}),n.d(e,"vec3",function(){return l}),n.d(e,"vec4",function(){return h})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){let e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,i){let a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.transpose=function(t,e){if(t===e){let n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=n*a-i*r;if(!o)return null;return o=1/o,t[0]=a*o,t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t},e.adjoint=function(t,e){let n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=i,e.rotate=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=r*-s+a*u,t[3]=i*-s+o*u,t},e.scale=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=a*u,t[3]=o*u,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],o=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var r=n(5);function i(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+a*u,t[1]=i*s+o*u,t[2]=r*c+a*l,t[3]=i*c+o*l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}const o=i;e.mul=o;const s=a;e.sub=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){let e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,i,a,o){let s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=a,s[5]=o,s},e.set=function(t,e,n,r,i,a,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=n*a-r*i;if(!u)return null;return u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-a*o)*u,t[5]=(r*o-n*s)*u,t},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=i,e.rotate=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*c,t[1]=i*l+o*c,t[2]=r*-c+a*l,t[3]=i*-c+o*l,t[4]=s,t[5]=u,t},e.scale=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=a*l,t[3]=o*l,t[4]=s,t[5]=u,t},e.translate=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=r*c+a*l+s,t[5]=i*c+o*l+u,t},e.fromRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=e[0],l=e[1],h=e[2],f=e[3],d=e[4],v=e[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-d)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))};var r=n(5);function i(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=n[0],l=n[1],h=n[2],f=n[3],d=n[4],v=n[5];return t[0]=r*c+a*l,t[1]=i*c+o*l,t[2]=r*h+a*f,t[3]=i*h+o*f,t[4]=r*d+a*v+s,t[5]=i*d+o*v+u,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}const o=i;e.mul=o;const s=a;e.sub=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,i,a,o,s,u,c,l,h,f,d,v,p,m){let g=new r.ARRAY_TYPE(16);return g[0]=t,g[1]=e,g[2]=n,g[3]=i,g[4]=a,g[5]=o,g[6]=s,g[7]=u,g[8]=c,g[9]=l,g[10]=h,g[11]=f,g[12]=d,g[13]=v,g[14]=p,g[15]=m,g},e.set=function(t,e,n,r,i,a,o,s,u,c,l,h,f,d,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=v,t[14]=p,t[15]=m,t},e.identity=i,e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],v=e[12],p=e[13],m=e[14],g=e[15],M=n*s-r*o,b=n*u-i*o,y=n*c-a*o,x=r*u-i*s,_=r*c-a*s,E=i*c-a*u,w=l*p-h*v,P=l*m-f*v,T=l*g-d*v,A=h*m-f*p,O=h*g-d*p,R=f*g-d*m,S=M*R-b*O+y*A+x*T-_*P+E*w;if(!S)return null;return S=1/S,t[0]=(s*R-u*O+c*A)*S,t[1]=(i*O-r*R-a*A)*S,t[2]=(p*E-m*_+g*x)*S,t[3]=(f*_-h*E-d*x)*S,t[4]=(u*T-o*R-c*P)*S,t[5]=(n*R-i*T+a*P)*S,t[6]=(m*y-v*E-g*b)*S,t[7]=(l*E-f*y+d*b)*S,t[8]=(o*O-s*T+c*w)*S,t[9]=(r*T-n*O-a*w)*S,t[10]=(v*_-p*y+g*M)*S,t[11]=(h*y-l*_-d*M)*S,t[12]=(s*P-o*A-u*w)*S,t[13]=(n*A-r*P+i*w)*S,t[14]=(p*b-v*x-m*M)*S,t[15]=(l*x-h*b+f*M)*S,t},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],v=e[12],p=e[13],m=e[14],g=e[15];return t[0]=s*(f*g-d*m)-h*(u*g-c*m)+p*(u*d-c*f),t[1]=-(r*(f*g-d*m)-h*(i*g-a*m)+p*(i*d-a*f)),t[2]=r*(u*g-c*m)-s*(i*g-a*m)+p*(i*c-a*u),t[3]=-(r*(u*d-c*f)-s*(i*d-a*f)+h*(i*c-a*u)),t[4]=-(o*(f*g-d*m)-l*(u*g-c*m)+v*(u*d-c*f)),t[5]=n*(f*g-d*m)-l*(i*g-a*m)+v*(i*d-a*f),t[6]=-(n*(u*g-c*m)-o*(i*g-a*m)+v*(i*c-a*u)),t[7]=n*(u*d-c*f)-o*(i*d-a*f)+l*(i*c-a*u),t[8]=o*(h*g-d*p)-l*(s*g-c*p)+v*(s*d-c*h),t[9]=-(n*(h*g-d*p)-l*(r*g-a*p)+v*(r*d-a*h)),t[10]=n*(s*g-c*p)-o*(r*g-a*p)+v*(r*c-a*s),t[11]=-(n*(s*d-c*h)-o*(r*d-a*h)+l*(r*c-a*s)),t[12]=-(o*(h*m-f*p)-l*(s*m-u*p)+v*(s*f-u*h)),t[13]=n*(h*m-f*p)-l*(r*m-i*p)+v*(r*f-i*h),t[14]=-(n*(s*m-u*p)-o*(r*m-i*p)+v*(r*u-i*s)),t[15]=n*(s*f-u*h)-o*(r*f-i*h)+l*(r*u-i*s),t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],v=t[13],p=t[14],m=t[15];return(e*o-n*a)*(h*m-f*p)-(e*s-r*a)*(l*m-f*v)+(e*u-i*a)*(l*p-h*v)+(n*s-r*o)*(c*m-f*d)-(n*u-i*o)*(c*p-h*d)+(r*u-i*s)*(c*v-l*d)},e.multiply=a,e.translate=function(t,e,n){let r,i,a,o,s,u,c,l,h,f,d,v,p=n[0],m=n[1],g=n[2];e===t?(t[12]=e[0]*p+e[4]*m+e[8]*g+e[12],t[13]=e[1]*p+e[5]*m+e[9]*g+e[13],t[14]=e[2]*p+e[6]*m+e[10]*g+e[14],t[15]=e[3]*p+e[7]*m+e[11]*g+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],v=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=v,t[12]=r*p+s*m+h*g+e[12],t[13]=i*p+u*m+f*g+e[13],t[14]=a*p+c*m+d*g+e[14],t[15]=o*p+l*m+v*g+e[15]);return t},e.scale=function(t,e,n){let r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,i){let a,o,s,u,c,l,h,f,d,v,p,m,g,M,b,y,x,_,E,w,P,T,A,O,R=i[0],S=i[1],I=i[2],L=Math.sqrt(R*R+S*S+I*I);if(Math.abs(L)<r.EPSILON)return null;R*=L=1/L,S*=L,I*=L,a=Math.sin(n),o=Math.cos(n),s=1-o,u=e[0],c=e[1],l=e[2],h=e[3],f=e[4],d=e[5],v=e[6],p=e[7],m=e[8],g=e[9],M=e[10],b=e[11],y=R*R*s+o,x=S*R*s+I*a,_=I*R*s-S*a,E=R*S*s-I*a,w=S*S*s+o,P=I*S*s+R*a,T=R*I*s+S*a,A=S*I*s-R*a,O=I*I*s+o,t[0]=u*y+f*x+m*_,t[1]=c*y+d*x+g*_,t[2]=l*y+v*x+M*_,t[3]=h*y+p*x+b*_,t[4]=u*E+f*w+m*P,t[5]=c*E+d*w+g*P,t[6]=l*E+v*w+M*P,t[7]=h*E+p*w+b*P,t[8]=u*T+f*A+m*O,t[9]=c*T+d*A+g*O,t[10]=l*T+v*A+M*O,t[11]=h*T+p*A+b*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},e.rotateX=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*i+c*r,t[5]=o*i+l*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=c*i-a*r,t[9]=l*i-o*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t},e.rotateY=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i-c*r,t[1]=o*i-l*r,t[2]=s*i-h*r,t[3]=u*i-f*r,t[8]=a*r+c*i,t[9]=o*r+l*i,t[10]=s*r+h*i,t[11]=u*r+f*i,t},e.rotateZ=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*i+c*r,t[1]=o*i+l*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=c*i-a*r,t[5]=l*i-o*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){let i,a,o,s=n[0],u=n[1],c=n[2],l=Math.sqrt(s*s+u*u+c*c);if(Math.abs(l)<r.EPSILON)return null;return s*=l=1/l,u*=l,c*=l,i=Math.sin(e),a=Math.cos(e),o=1-a,t[0]=s*s*o+a,t[1]=u*s*o+c*i,t[2]=c*s*o-u*i,t[3]=0,t[4]=s*u*o-c*i,t[5]=u*u*o+a,t[6]=c*u*o+s*i,t[7]=0,t[8]=s*c*o+u*i,t[9]=u*c*o-s*i,t[10]=c*c*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromXRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,u=i+i,c=a+a,l=r*s,h=r*u,f=r*c,d=i*u,v=i*c,p=a*c,m=o*s,g=o*u,M=o*c;return t[0]=1-(d+p),t[1]=h+M,t[2]=f-g,t[3]=0,t[4]=h-M,t[5]=1-(l+p),t[6]=v+m,t[7]=0,t[8]=f+g,t[9]=v-m,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(a*a+o*o+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t},e.getRotation=function(t,e){let n=e[0]+e[5]+e[10],r=0;n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r);return t},e.fromRotationTranslationScale=function(t,e,n,r){let i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,d=i*l,v=a*c,p=a*l,m=o*l,g=s*u,M=s*c,b=s*l,y=r[0],x=r[1],_=r[2];return t[0]=(1-(v+m))*y,t[1]=(f+b)*y,t[2]=(d-M)*y,t[3]=0,t[4]=(f-b)*x,t[5]=(1-(h+m))*x,t[6]=(p+g)*x,t[7]=0,t[8]=(d+M)*_,t[9]=(p-g)*_,t[10]=(1-(h+v))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){let a=e[0],o=e[1],s=e[2],u=e[3],c=a+a,l=o+o,h=s+s,f=a*c,d=a*l,v=a*h,p=o*l,m=o*h,g=s*h,M=u*c,b=u*l,y=u*h,x=r[0],_=r[1],E=r[2],w=i[0],P=i[1],T=i[2];return t[0]=(1-(p+g))*x,t[1]=(d+y)*x,t[2]=(v-b)*x,t[3]=0,t[4]=(d-y)*_,t[5]=(1-(f+g))*_,t[6]=(m+M)*_,t[7]=0,t[8]=(v+b)*E,t[9]=(m-M)*E,t[10]=(1-(f+p))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*P+t[8]*T),t[13]=n[1]+P-(t[1]*w+t[5]*P+t[9]*T),t[14]=n[2]+T-(t[2]*w+t[6]*P+t[10]*T),t[15]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,c=n*o,l=r*o,h=r*s,f=i*o,d=i*s,v=i*u,p=a*o,m=a*s,g=a*u;return t[0]=1-h-v,t[1]=l+g,t[2]=f-m,t[3]=0,t[4]=l-g,t[5]=1-c-v,t[6]=d+p,t[7]=0,t[8]=f+m,t[9]=d-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,i,a,o){let s=1/(n-e),u=1/(i-r),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,i){let a=1/Math.tan(e/2),o=1/(r-i);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*o,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){let i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,i,a,o){let s=1/(e-n),u=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(o+a)*c,t[15]=1,t},e.lookAt=function(t,e,n,a){let o,s,u,c,l,h,f,d,v,p,m=e[0],g=e[1],M=e[2],b=a[0],y=a[1],x=a[2],_=n[0],E=n[1],w=n[2];if(Math.abs(m-_)<r.EPSILON&&Math.abs(g-E)<r.EPSILON&&Math.abs(M-w)<r.EPSILON)return i(t);f=m-_,d=g-E,v=M-w,p=1/Math.sqrt(f*f+d*d+v*v),o=y*(v*=p)-x*(d*=p),s=x*(f*=p)-b*v,u=b*d-y*f,(p=Math.sqrt(o*o+s*s+u*u))?(o*=p=1/p,s*=p,u*=p):(o=0,s=0,u=0);c=d*u-v*s,l=v*o-f*u,h=f*s-d*o,(p=Math.sqrt(c*c+l*l+h*h))?(c*=p=1/p,l*=p,h*=p):(c=0,l=0,h=0);return t[0]=o,t[1]=c,t[2]=f,t[3]=0,t[4]=s,t[5]=l,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=v,t[11]=0,t[12]=-(o*m+s*g+u*M),t[13]=-(c*m+l*g+h*M),t[14]=-(f*m+d*g+v*M),t[15]=1,t},e.targetTo=function(t,e,n,r){let i=e[0],a=e[1],o=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],h=a-n[1],f=o-n[2],d=l*l+h*h+f*f;d>0&&(d=1/Math.sqrt(d),l*=d,h*=d,f*=d);let v=u*f-c*h,p=c*l-s*f,m=s*h-u*l;return t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=h*m-f*p,t[5]=f*v-l*m,t[6]=l*p-h*v,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=o,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],v=t[11],p=t[12],m=t[13],g=t[14],M=t[15],b=e[0],y=e[1],x=e[2],_=e[3],E=e[4],w=e[5],P=e[6],T=e[7],A=e[8],O=e[9],R=e[10],S=e[11],I=e[12],L=e[13],D=e[14],C=e[15];return Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-y)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(a-x)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-_)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(s-E)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-w)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-P)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(l-T)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(h-A)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(f-O)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(d-R)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(v-S)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(p-I)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(m-L)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(g-D)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(M-C)<=r.EPSILON*Math.max(1,Math.abs(M),Math.abs(C))};var r=n(5);function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],v=e[11],p=e[12],m=e[13],g=e[14],M=e[15],b=n[0],y=n[1],x=n[2],_=n[3];return t[0]=b*r+y*s+x*h+_*p,t[1]=b*i+y*u+x*f+_*m,t[2]=b*a+y*c+x*d+_*g,t[3]=b*o+y*l+x*v+_*M,b=n[4],y=n[5],x=n[6],_=n[7],t[4]=b*r+y*s+x*h+_*p,t[5]=b*i+y*u+x*f+_*m,t[6]=b*a+y*c+x*d+_*g,t[7]=b*o+y*l+x*v+_*M,b=n[8],y=n[9],x=n[10],_=n[11],t[8]=b*r+y*s+x*h+_*p,t[9]=b*i+y*u+x*f+_*m,t[10]=b*a+y*c+x*d+_*g,t[11]=b*o+y*l+x*v+_*M,b=n[12],y=n[13],x=n[14],_=n[15],t[12]=b*r+y*s+x*h+_*p,t[13]=b*i+y*u+x*f+_*m,t[14]=b*a+y*c+x*d+_*g,t[15]=b*o+y*l+x*v+_*M,t}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}const s=a;e.mul=s;const u=o;e.sub=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=s,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=u,e.getAxisAngle=function(t,e){let n=2*Math.acos(e[3]),r=Math.sin(n/2);0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0);return n},e.multiply=c,e.rotateX=function(t,e,n){n*=.5;let r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-r*s,t},e.rotateY=function(t,e,n){n*=.5;let r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=i*u+o*s,t[2]=a*u+r*s,t[3]=o*u-i*s,t},e.rotateZ=function(t,e,n){n*=.5;let r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t},e.calculateW=function(t,e){let n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},e.slerp=l,e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=h,e.fromEuler=function(t,e,n,r){let i=.5*Math.PI/180;e*=i,n*=i,r*=i;let a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=a*u*l-o*s*c,t[1]=o*s*l+a*u*c,t[2]=o*u*c-a*s*l,t[3]=o*u*l+a*s*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var r=n(5),i=n(13),a=n(14),o=n(15);function s(){let t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n){n*=.5;let r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function c(t,e,n){let r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+o*s+i*c-a*u,t[1]=i*l+o*u+a*s-r*c,t[2]=a*l+o*c+r*u-i*s,t[3]=o*l-r*s-i*u-a*c,t}function l(t,e,n,r){let i,a,o,s,u,c=e[0],l=e[1],h=e[2],f=e[3],d=n[0],v=n[1],p=n[2],m=n[3];return(a=c*d+l*v+h*p+f*m)<0&&(a=-a,d=-d,v=-v,p=-p,m=-m),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,u=Math.sin(r*i)/o):(s=1-r,u=r),t[0]=s*c+u*d,t[1]=s*l+u*v,t[2]=s*h+u*p,t[3]=s*f+u*m,t}function h(t,e){let n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);let i=(r+1)%3,a=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*i+i]-e[3*a+a]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*i+a]-e[3*a+i])*n,t[i]=(e[3*i+r]+e[3*r+i])*n,t[a]=(e[3*a+r]+e[3*r+a])*n}return t}const f=o.clone;e.clone=f;const d=o.fromValues;e.fromValues=d;const v=o.copy;e.copy=v;const p=o.set;e.set=p;const m=o.add;e.add=m;const g=c;e.mul=g;const M=o.scale;e.scale=M;const b=o.dot;e.dot=b;const y=o.lerp;e.lerp=y;const x=o.length;e.length=x;const _=x;e.len=_;const E=o.squaredLength;e.squaredLength=E;const w=E;e.sqrLen=w;const P=o.normalize;e.normalize=P;const T=o.exactEquals;e.exactEquals=T;const A=o.equals;e.equals=A;const O=function(){let t=a.create(),e=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(r,i,o){let s=a.dot(i,o);return s<-.999999?(a.cross(t,e,i),a.len(t)<1e-6&&a.cross(t,n,i),a.normalize(t,t),u(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,P(r,r))}}();e.rotationTo=O;const R=function(){let t=s(),e=s();return function(n,r,i,a,o,s){return l(t,r,o,s),l(e,i,a,s),l(n,t,e,2*s*(1-s)),n}}();e.sqlerp=R;const S=function(){let t=i.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],P(e,h(e,t))}}();e.setAxes=S},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=i,e.clone=function(t){let e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){let n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=o,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=c,e.length=l,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){let n=t[0],i=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))};var r=n(5);function i(){let t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function l(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function h(t){var e=t[0],n=t[1];return e*e+n*n}const f=l;e.len=f;const d=a;e.sub=d;const v=o;e.mul=v;const p=s;e.div=p;const m=u;e.dist=m;const g=c;e.sqrDist=g;const M=h;e.sqrLen=M;const b=function(){let t=i();return function(e,n,r,i,a,o){let s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();e.forEach=b}]);