!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3);var a=function(){function e(){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleResize=function(){n.resize()},this.handleUpdate=function(){n.update(),requestAnimationFrame(n.handleUpdate)};var r=t.devicePixelRatio;this.width=t.innerWidth*r,this.height=t.innerHeight*r,t.addEventListener("resize",this.handleResize,!1),this.setup(),this.debug(),this.init(),this.handleResize(),this.handleUpdate(),"false"===(0,o.getUrlParam)("controls")&&(document.body.className="hide")}return r(e,[{key:"setup",value:function(){}},{key:"debug",value:function(){}},{key:"init",value:function(){}},{key:"resize",value:function(){}},{key:"update",value:function(){}}]),e}();e.default=a}).call(e,n(0))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});e.getUrlParam=function(e){return new t.URL(t.location.href).searchParams.get(e)}}).call(e,n(0))},,function(t,e,n){"use strict";(function(t){var n,r,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"undefined"!=typeof self&&self,a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=23)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.MAX_DIRECTIONAL=1,e.DIRECTIONAL_LIGHT=1e3,e.SHADER_BASIC=2e3,e.SHADER_DEFAULT=2001,e.SHADER_BILLBOARD=2002,e.SHADER_SHADOW=2003,e.SHADER_CUSTOM=2500,e.DRAW={POINTS:0,LINES:1,TRIANGLES:4},e.SIDE={FRONT:0,BACK:1,BOTH:2},e.CONTEXT={WEBGL:"webgl",WEBGL2:"webgl2"}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=n(32),a=n(33),i=n(13),s=n(34),u=n(35),c=n(36),l=n(14),f=n(15);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return o}),n.d(e,"mat2d",function(){return a}),n.d(e,"mat3",function(){return i}),n.d(e,"mat4",function(){return s}),n.d(e,"quat",function(){return u}),n.d(e,"vec2",function(){return c}),n.d(e,"vec3",function(){return l}),n.d(e,"vec4",function(){return f})},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.supports=e.getContextType=e.setContextType=e.getContext=e.setContext=e.version=e.library=void 0;var r=n(0),o=null,a=null,i=document.createElement("canvas").getContext(r.CONTEXT.WEBGL),s=document.createElement("canvas").getContext(r.CONTEXT.WEBGL2),u={vertexArrayObject:i.getExtension("OES_vertex_array_object"),instancedArrays:i.getExtension("ANGLE_instanced_arrays"),standardDerivatives:i.getExtension("OES_standard_derivatives"),depthTextures:i.getExtension("WEBGL_depth_texture")},c=function(){return a};e.library="lowww-core",e.version="1.0.22",e.setContext=function(t){o=t,c()===r.CONTEXT.WEBGL&&(u.vertexArrayObject=o.getExtension("OES_vertex_array_object"),u.instancedArrays=o.getExtension("ANGLE_instanced_arrays"),u.standardDerivatives=o.getExtension("OES_standard_derivatives"),u.depthTextures=o.getExtension("WEBGL_depth_texture"))},e.getContext=function(){return o},e.setContextType=function(t){var e=s&&r.CONTEXT.WEBGL2,n=i&&r.CONTEXT.WEBGL;return(a=t||e||n)===r.CONTEXT.WEBGL2&&(u.vertexArrayObject=!0,u.instancedArrays=!0,u.standardDerivatives=!0,u.depthTexture=!0),a},e.getContextType=c,e.supports=function(){return u}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return o}),e.setMatrixArrayType=function(t){o=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=1e-6;e.EPSILON=r;var o="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;e.RANDOM=a;var i=Math.PI/180},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.SHADOW=e.EXTENSIONS=e.CLIPPING=e.NOISE=e.FOG=e.LIGHT=e.UBO=void 0;var r=n(24),o=n(25),a=n(26),i=n(27),s=n(28),u=n(29),c=n(30);e.UBO=a.UBO,e.LIGHT=r.LIGHT,e.FOG=o.FOG,e.NOISE=i.NOISE,e.CLIPPING=s.CLIPPING,e.EXTENSIONS=u.EXTENSIONS,e.SHADOW=c.SHADOW},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),i=n(39),s=(r=i)&&r.__esModule?r:{default:r};var u=0,c=0,l=a.vec3.create(),f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uid=u++,this.parent=null,this.children=[],this.position=new s.default,this.rotation=new s.default,this.scale=new s.default(1,1,1),this._transparent=!1,this._visible=!0,this.quaternion=a.quat.create(),this.target=a.vec3.create(),this.up=a.vec3.fromValues(0,1,0),this.lookToTarget=!1,this.matrices={parent:a.mat4.create(),model:a.mat4.create(),lookAt:a.mat4.create()},this.dirty={sorting:!1,transparent:!1,attributes:!1,shader:!1},this.sceneGraphSorter=!1}return o(t,[{key:"updateMatrices",value:function(){a.mat4.identity(this.matrices.parent),a.mat4.identity(this.matrices.model),a.mat4.identity(this.matrices.lookAt),a.quat.identity(this.quaternion),this.parent&&(a.mat4.copy(this.matrices.parent,this.parent.matrices.model),a.mat4.multiply(this.matrices.model,this.matrices.model,this.matrices.parent)),this.lookToTarget?(a.mat4.targetTo(this.matrices.lookAt,this.position.data,this.target,this.up),a.mat4.multiply(this.matrices.model,this.matrices.model,this.matrices.lookAt)):(a.mat4.translate(this.matrices.model,this.matrices.model,this.position.data),a.quat.rotateX(this.quaternion,this.quaternion,this.rotation.x),a.quat.rotateY(this.quaternion,this.quaternion,this.rotation.y),a.quat.rotateZ(this.quaternion,this.quaternion,this.rotation.z),c=a.quat.getAxisAngle(l,this.quaternion),a.mat4.rotate(this.matrices.model,this.matrices.model,c,l)),a.mat4.scale(this.matrices.model,this.matrices.model,this.scale.data)}},{key:"init",value:function(){}},{key:"add",value:function(t){t.parent=this,this.children.push(t),this.dirty.sorting=!0}},{key:"remove",value:function(t){var e=this.children.indexOf(t);-1!==e&&(t.destroy(),this.children.splice(e,1),this.dirty.sorting=!0)}},{key:"traverse",value:function(t){void 0===t&&(t=this,this.sceneGraphSorter=!0);for(var e=0;e<t.children.length;e++)this.traverse(t.children[e]);return null!==t.parent&&t.updateMatrices(),(t.dirty.sorting||t.dirty.transparent)&&(t.dirty.transparent=!1,this.sceneGraphSorter=!0),this.sceneGraphSorter}},{key:"transparent",set:function(t){this.dirty.transparent=this.transparent!==t,this._transparent=t},get:function(){return this._transparent}},{key:"visible",set:function(t){this.dirty.sorting=this.visible!==t,this._visible=t},get:function(){return this._visible}}]),t}();e.default=f},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Billboard=e.Default=e.Basic=void 0;var r=i(n(40)),o=i(n(41)),a=i(n(42));function i(t){return t&&t.__esModule?t:{default:t}}e.Basic=r.default,e.Default=o.default,e.Billboard=a.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(8),s=(r=a)&&r.__esModule?r:{default:r},u=n(6),c=n(0);var l=0,f=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._shader=null;var r=t.geometry,o=r.positions,a=r.indices,s=r.normals,f=r.uvs,d=t.shader||new u.Default({color:t.color,map:t.map}),h=d.vertex,v=d.fragment,p=d.uniforms,m=d.type,b=d.mode;return n.type=void 0!==m?m:c.SHADER_CUSTOM+"-"+l++,void 0!==b&&(n.mode=b),n.setAttribute("a_position","vec3",new Float32Array(o)),a&&n.setIndex(new Uint16Array(a)),s&&n.setAttribute("a_normal","vec3",new Float32Array(s)),f&&n.setAttribute("a_uv","vec2",new Float32Array(f)),Object.keys(p).forEach(function(t){n.setUniform(t,p[t].type,p[t].value)}),n.setShader(h,v),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),o(e,[{key:"shader",set:function(t){this.dirty.shader=!0,this._shader=t,void 0!==t.type?this.type=t.type:this.type=c.SHADER_CUSTOM,this.setShader(t.vertex,t.fragment)},get:function(){return this._shader}}]),e}();e.default=f},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=n(5),u=(r=s)&&r.__esModule?r:{default:r},c=n(19),l=n(2),f=n(0),d=n(20),h=n(12);var v=!1,p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.attributes={},t.uniforms={},t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=1,t.clipping={enable:!1,planes:[a.vec4.create(),a.vec4.create(),a.vec4.create()]},t.instanceCount=0,t.isInstance=!1,t.mode=f.DRAW.TRIANGLES,t.side=f.SIDE.FRONT,t.type=String(f.SHADER_CUSTOM),t.shadows=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"setAttribute",value:function(t,e,n){var r=(0,d.getTypeSize)(e);this.attributes[t]={value:n,size:r}}},{key:"setIndex",value:function(t){this.indices={value:t}}},{key:"setUniform",value:function(t,e,n){this.uniforms[t]={value:n,type:e}}},{key:"setShader",value:function(t,e){this.vertex=t,this.fragment=e}},{key:"setInstanceAttribute",value:function(t,e,n){var r=(0,d.getTypeSize)(e);this.attributes[t]={value:n,size:r,instanced:!0}}},{key:"setInstanceCount",value:function(t){this.instanceCount=t,this.instanceCount>0?this.isInstance=!0:this.isInstance=!1}},{key:"init",value:function(){var t=(0,l.getContext)();v=(0,l.getContextType)()===f.CONTEXT.WEBGL2,this.vertex&&this.fragment&&(v||(this.vertex=(0,h.glsl3to1)(this.vertex,"vertex"),this.fragment=(0,h.glsl3to1)(this.fragment,"fragment")),this.program=(0,c.createProgram)(t,this.vertex,this.fragment,this.type),t.useProgram(this.program),this.vao=new d.Vao,(0,d.initAttributes)(this.attributes,this.program),(0,d.initUniforms)(this.uniforms,this.program),this.indices&&!this.indices.buffer&&(this.indices.buffer=t.createBuffer()))}},{key:"destroy",value:function(){this.program=null}},{key:"bind",value:function(){var t=(0,l.getContext)();(0,d.bindAttributes)(this.attributes,this.program),this.indices&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indices.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.value,t.STATIC_DRAW))}},{key:"unbind",value:function(){var t=(0,l.getContext)();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(t){var e=(0,l.getContext)();this.dirty.attributes&&((0,d.updateAttributes)(this.attributes),this.dirty.attributes=!0),(0,d.updateUniforms)(this.uniforms),this.polygonOffset?(e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(this.polygonOffsetFactor,this.polygonOffsetUnits)):e.disable(e.POLYGON_OFFSET_FILL),this.transparent&&(e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.disable(e.DEPTH_TEST)),this.side===f.SIDE.FRONT?(e.enable(e.CULL_FACE),e.cullFace(e.BACK)):this.side===f.SIDE.BACK?(e.enable(e.CULL_FACE),e.cullFace(e.FRONT)):this.side===f.SIDE.BOTH&&e.disable(e.CULL_FACE),t&&(e.enable(e.CULL_FACE),e.cullFace(e.FRONT))}},{key:"draw",value:function(){var t=(0,l.getContext)();this.isInstance?v?t.drawElementsInstanced(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0,this.instanceCount):(0,l.supports)().instancedArrays.drawElementsInstancedANGLE(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0,this.instanceCount):this.indices?t.drawElements(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0):t.drawArrays(this.mode,0,this.attributes.a_position.value.length/3)}}]),e}();e.default=p},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2);var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(0,o.getContext)();Object.assign(this,{magFilter:n.NEAREST,minFilter:n.NEAREST,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,transparent:!1},e);var r=new Uint8Array([255,255,255,255]);this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),this.transparent&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.bindTexture(n.TEXTURE_2D,null)}return r(t,[{key:"fromImage",value:function(t){var e=this,n=new Image;n.crossOrigin="",n.onload=function(){e.update(n)},n.src=t}},{key:"update",value:function(t){var e=(0,o.getContext)();e.bindTexture(e.TEXTURE_2D,this.texture),e.generateMipmap(e.TEXTURE_2D),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}}]),t}();e.default=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=n(5),u=(r=s)&&r.__esModule?r:{default:r},c=n(53),l=n(0);var f=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.lights={directional:[]},t.fog={enable:!1,color:a.vec4.fromValues(0,0,0,1),start:500,end:1e3,density:25e-5},t.clipping={enable:!1,planes:[a.vec4.create(),a.vec4.create(),a.vec4.create()]};var n=new c.Directional({near:1,far:1e3});return n.position[0]=125,n.position[1]=250,n.position[2]=500,t.addLight(n),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"addLight",value:function(t){switch(t.type){case l.DIRECTIONAL_LIGHT:this.lights.directional.push(t)}}},{key:"removeLight",value:function(t){var e=this.lights.directional.indexOf(t);-1!==e&&(t.destroy(),this.lights.directional.splice(e,1))}}]),e}();e.default=f},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),a=n(0);var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(0,o.getContext)();Object.assign(this,{width:512,height:512,internalformat:n.DEPTH_COMPONENT,type:n.UNSIGNED_SHORT},e),(0,o.getContextType)()===a.CONTEXT.WEBGL2&&(this.internalformat=n.DEPTH_COMPONENT24,this.type=n.UNSIGNED_INT),this.frameBuffer=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,this.frameBuffer),this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),this.depthTexture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.depthTexture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texImage2D(n.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,n.DEPTH_COMPONENT,this.type,null),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,this.depthTexture,0),n.bindFramebuffer(n.FRAMEBUFFER,null)}return r(t,[{key:"setSize",value:function(t,e){var n=(0,o.getContext)();this.width=t,this.height=e,n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,this.width,this.height,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindTexture(n.TEXTURE_2D,null),n.bindTexture(n.TEXTURE_2D,this.depthTexture),n.texImage2D(n.TEXTURE_2D,0,this.internalformat,this.width,this.height,0,n.DEPTH_COMPONENT,this.type,null),n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null)}}]),t}();e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.glsl3to1=e.math=e.color=void 0;var r,o=u(n(31)),a=u(n(37)),i=n(38),s=(r=i)&&r.__esModule?r:{default:r};function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.color=o,e.math=a,e.glsl3to1=s.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,o,a,i,s,u,c){var l=new r.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=o,l[4]=a,l[5]=i,l[6]=s,l[7]=u,l[8]=c,l},e.set=function(t,e,n,r,o,a,i,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*i-s*c,d=-l*a+s*u,h=c*a-i*u,v=n*f+r*d+o*h;if(!v)return null;return v=1/v,t[0]=f*v,t[1]=(-l*r+o*c)*v,t[2]=(s*r-o*i)*v,t[3]=d*v,t[4]=(l*n-o*u)*v,t[5]=(-s*n+o*a)*v,t[6]=h*v,t[7]=(-c*n+r*u)*v,t[8]=(i*n-r*a)*v,t},e.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=i*l-s*c,t[1]=o*c-r*l,t[2]=r*s-o*i,t[3]=s*u-a*l,t[4]=n*l-o*u,t[5]=o*a-n*s,t[6]=a*c-i*u,t[7]=r*u-n*c,t[8]=n*i-r*a,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-i*u)+n*(-c*o+i*s)+r*(u*o-a*s)},e.multiply=o,e.translate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=d*r+h*i+c,t[7]=d*o+h*s+l,t[8]=d*a+h*u+f,t},e.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*r+d*i,t[1]=h*o+d*s,t[2]=h*a+d*u,t[3]=h*i-d*r,t[4]=h*s-d*o,t[5]=h*u-d*a,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,d=o*i,h=o*s,v=o*u,p=a*i,m=a*s,b=a*u;return t[0]=1-f-v,t[3]=l-b,t[6]=d+m,t[1]=l+b,t[4]=1-c-v,t[7]=h-p,t[2]=d-m,t[5]=h+p,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*s-r*i,g=n*u-o*i,y=n*c-a*i,M=r*u-o*s,x=r*c-a*s,E=o*c-a*u,w=l*p-f*v,O=l*m-d*v,A=l*b-h*v,P=f*m-d*p,T=f*b-h*p,S=d*b-h*m,C=_*S-g*T+y*P+M*A-x*O+E*w;if(!C)return null;return C=1/C,t[0]=(s*S-u*T+c*P)*C,t[1]=(u*A-i*S-c*O)*C,t[2]=(i*T-s*A+c*w)*C,t[3]=(o*T-r*S-a*P)*C,t[4]=(n*S-o*A+a*O)*C,t[5]=(r*A-n*T-a*w)*C,t[6]=(p*E-m*x+b*M)*C,t[7]=(m*y-v*E-b*g)*C,t[8]=(v*x-p*y+b*_)*C,t},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=e[0],h=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],g=e[7],y=e[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-h)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-v)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-_)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(f-y)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))};var r=n(3);function o(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],h=n[1],v=n[2],p=n[3],m=n[4],b=n[5],_=n[6],g=n[7],y=n[8];return t[0]=d*r+h*i+v*c,t[1]=d*o+h*s+v*l,t[2]=d*a+h*u+v*f,t[3]=p*r+m*i+b*c,t[4]=p*o+m*s+b*l,t[5]=p*a+m*u+b*f,t[6]=_*r+g*i+y*c,t[7]=_*o+g*s+y*l,t[8]=_*a+g*u+y*f,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}var i=o;e.mul=i;var s=a;e.sub=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=o,e.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=i,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=s,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=l,e.squaredDistance=f,e.squaredLength=d,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=v,e.cross=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2];return t[0]=o*u-a*s,t[1]=a*i-r*u,t[2]=r*s-o*i,t},e.lerp=function(t,e,n,r){var o=e[0],a=e[1],i=e[2];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t},e.hermite=function(t,e,n,r,o,a){var i=a*a,s=i*(2*a-3)+1,u=i*(a-2)+a,c=i*(a-1),l=i*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*l,t},e.bezier=function(t,e,n,r,o,a){var i=1-a,s=i*i,u=a*a,c=s*i,l=3*a*s,f=3*u*i,d=u*a;return t[0]=e[0]*c+n[0]*l+r[0]*f+o[0]*d,t[1]=e[1]*c+n[1]*l+r[1]*f+o[1]*d,t[2]=e[2]*c+n[2]*l+r[2]*f+o[2]*d,t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=o*e,t},e.transformMat4=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,t[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,t[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,t},e.transformMat3=function(t,e,n){var r=e[0],o=e[1],a=e[2];return t[0]=r*n[0]+o*n[3]+a*n[6],t[1]=r*n[1]+o*n[4]+a*n[7],t[2]=r*n[2]+o*n[5]+a*n[8],t},e.transformQuat=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*o,f=c*o+u*r-i*a,d=c*a+i*o-s*r,h=-i*r-s*o-u*a;return t[0]=l*c+h*-i+f*-u-d*-s,t[1]=f*c+h*-s+d*-i-l*-u,t[2]=d*c+h*-u+l*-s-f*-i,t},e.rotateX=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.angle=function(t,e){var n=i(t[0],t[1],t[2]),r=i(e[0],e[1],e[2]);h(n,n),h(r,r);var o=v(n,r);return o>1?0:o<-1?Math.PI:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=e[0],s=e[1],u=e[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var r=n(3);function o(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function i(t,e,n){var o=new r.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function d(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){var n=e[0],r=e[1],o=e[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function v(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}var p=s;e.sub=p;var m=u;e.mul=m;var b=c;e.div=b;var _=l;e.dist=_;var g=f;e.sqrDist=g;var y=a;e.len=y;var M=d;e.sqrLen=M;var x,E=(x=o(),function(t,e,n,r,o,a){var i=void 0,s=void 0;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)x[0]=t[i],x[1]=t[i+1],x[2]=t[i+2],o(x,x,a),t[i]=x[0],t[i+1]=x[1],t[i+2]=x[2];return t});e.forEach=E},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=o,e.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=o,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=i,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=c,e.squaredDistance=l,e.length=f,e.squaredLength=d,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t[3]=s+r*(n[3]-s),t},e.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,t[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,t[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,t[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,t},e.transformQuat=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*o,f=c*o+u*r-i*a,d=c*a+i*o-s*r,h=-i*r-s*o-u*a;return t[0]=l*c+h*-i+f*-u-d*-s,t[1]=f*c+h*-s+d*-i-l*-u,t[2]=d*c+h*-u+l*-s-f*-i,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))};var r=n(3);function o(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function i(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+a*a)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+o*o+a*a}function f(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)}function d(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function h(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=o*i,t[3]=a*i),t}var v=a;e.sub=v;var p=i;e.mul=p;var m=s;e.div=m;var b=c;e.dist=b;var _=l;e.sqrDist=_;var g=f;e.len=g;var y=d;e.sqrLen=y;var M,x=(M=o(),function(t,e,n,r,o,a){var i=void 0,s=void 0;for(e||(e=4),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)M[0]=t[i],M[1]=t[i+1],M[2]=t[i+2],M[3]=t[i+3],o(M,M,a),t[i]=M[0],t[i+1]=M[1],t[i+2]=M[2],t[i+3]=M[3];return t});e.forEach=x},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Perspective=e.Orthographic=void 0;var r=a(n(17)),o=a(n(18));function a(t){return t&&t.__esModule?t:{default:t}}e.Orthographic=r.default,e.Perspective=o.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=n(5),u=(r=s)&&r.__esModule?r:{default:r};var c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{left:-1,right:1,top:1,bottom:-1,near:-1e3,far:1e3},t),n.matrices.projection=a.mat4.create(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"lookAt",value:function(t){a.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(){a.mat4.ortho(this.matrices.projection,this.left,this.right,this.bottom,this.top,this.near,this.far)}}]),e}();e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=n(5),u=(r=s)&&r.__esModule?r:{default:r};var c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:1,far:1e3,fov:35},t),n.matrices.projection=a.mat4.create(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default),o(e,[{key:"lookAt",value:function(t){a.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(t,e){a.mat4.perspective(this.matrices.projection,this.fov*(Math.PI/180),t/e,this.near,this.far)}}]),e}();e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={};function o(t,e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var o=t.getShaderInfoLog(r);throw t.deleteShader(r),console.error(o,e),new Error(o)}return r}e.createProgram=function(t,e,n,a){var i=r["pool_"+a];if(!i){var s=o(t,e,t.VERTEX_SHADER),u=o(t,n,t.FRAGMENT_SHADER),c=t.createProgram();return t.attachShader(c,s),t.attachShader(c,u),t.linkProgram(c),r["pool_"+a]=c,c}return i}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.updateUniforms=e.initUniforms=e.updateAttributes=e.bindAttributes=e.initAttributes=e.createProgram=e.getTypeSize=e.Vao=e.Ubo=void 0;var r=c(n(45)),o=c(n(46)),a=n(47),i=n(19),s=n(48),u=n(49);function c(t){return t&&t.__esModule?t:{default:t}}e.Ubo=r.default,e.Vao=o.default,e.getTypeSize=a.getTypeSize,e.createProgram=i.createProgram,e.initAttributes=s.initAttributes,e.bindAttributes=s.bindAttributes,e.updateAttributes=s.updateAttributes,e.initUniforms=u.initUniforms,e.updateUniforms=u.updateUniforms},function(t,e,n){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=n(2),i=n(0),s=n(52),u=n(20),c=f(n(10)),l=f(n(54));function f(t){return t&&t.__esModule?t:{default:t}}function d(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var h=void 0,v=Date.now(),p=!1,m=o.vec4.create(),b=o.vec4.create(),_={view:o.mat4.create(),normal:o.mat4.create(),modelView:o.mat4.create(),inversedModelView:o.mat4.create()},g=null,y=null,M=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.supported=!1,this.sorted={opaque:[],transparent:[],shadow:[]},this.performance={opaque:0,transparent:0,shadow:0,vertices:0,instances:0},this.ratio=n.ratio||t.devicePixelRatio,this.shadows=n.shadows||!1,this.domElement=n.canvas||document.createElement("canvas");var r=(0,a.setContextType)(n.contextType),o=this.domElement.getContext(r,Object.assign({},{antialias:!1},n)),u=(0,a.supports)();if(o&&(u.vertexArrayObject&&u.instancedArrays&&u.standardDerivatives&&u.depthTextures||null!==t.gli)){if(!1!==n.greeting){var c,l="color:#f33;font-size:x-small",f=["%c"+a.library+"\n%cversion: %c"+a.version+" %crunning: %c"+o.getParameter(o.VERSION),"color:#666;font-size:x-small;font-weight:bold;","color:#777;font-size:x-small",l,"color:#777;font-size:x-small",l];(c=console).log.apply(c,f)}(0,a.setContext)(o),p=(0,a.getContextType)()===i.CONTEXT.WEBGL2,this.init()}else this.domElement=(0,s.unsupported)()}return r(e,[{key:"init",value:function(){this.supported=!0,p&&(this.perScene=new u.Ubo([].concat(d(o.mat4.create()),d(o.mat4.create()),d(b),d(o.vec4.create()),d(m),d(o.vec4.create()),d(o.vec4.create()),d(o.vec4.create()),d(o.vec4.create())),0),this.perModel=new u.Ubo([].concat(d(o.mat4.create()),d(o.mat4.create()),d(o.vec4.create()),d(o.vec4.create()),d(o.vec4.create()),d(o.vec4.create())),1),this.directional=new u.Ubo(new Float32Array(12*i.MAX_DIRECTIONAL),2)),this.shadowmap=new l.default}},{key:"setSize",value:function(t,e){this.supported&&(0,s.resize)(this.domElement,t,e,this.ratio)}},{key:"setRatio",value:function(t){this.ratio=t}},{key:"changeProgram",value:function(t){var e=(0,a.getContext)();if(e.useProgram(t),p){var n=e.getUniformBlockIndex(t,"perScene"),r=e.getUniformBlockIndex(t,"perModel"),o=e.getUniformBlockIndex(t,"directional");e.uniformBlockBinding(t,n,this.perScene.boundLocation),e.uniformBlockBinding(t,r,this.perModel.boundLocation),o===this.directional.boundLocation&&e.uniformBlockBinding(t,o,this.directional.boundLocation)}}},{key:"draw",value:function(t,e,n,r){if(this.supported){g=t,y=e;var i=(0,a.getContext)();if(i.enable(i.DEPTH_TEST),i.enable(i.CULL_FACE),i.disable(i.BLEND),e.updateCameraMatrix(n,r),o.mat4.identity(_.view),o.mat4.lookAt(_.view,e.position.data,e.target,e.up),t.traverse()&&(this.sorted.opaque=[],this.sorted.transparent=[],this.sorted.shadow=[],this.performance.opaque=0,this.performance.transparent=0,this.performance.shadow=0,this.performance.vertices=0,this.performance.instances=0,this.sort(t)),m[0]=(Date.now()-v)/1e3,b[0]=t.fog.enable,b[1]=t.fog.start,b[2]=t.fog.end,b[3]=t.fog.density,p){this.perScene.bind(),this.perModel.bind(),this.directional.bind(),this.perScene.update([].concat(d(e.matrices.projection),d(_.view),d(b),d(t.fog.color),d(m),[t.clipping.enable,0,0,0],d(t.clipping.planes[0]),d(t.clipping.planes[1]),d(t.clipping.planes[2])));for(var s=0;s<t.lights.directional.length;s++)this.directional.update([].concat(d(t.lights.directional[s].position),[0]).concat([].concat(d(t.lights.directional[s].color),[0]),[t.lights.directional[s].intensity,0,0,0]),12*s)}if(this.shadowmap.setLightOrigin(t.lights.directional[0].position),this.renderShadow)for(var u=0;u<this.sorted.shadow.length;u++)this.renderObject(this.sorted.shadow[u],this.sorted.shadow[u].program,!0);for(var c=0;c<this.sorted.opaque.length;c++)this.renderObject(this.sorted.opaque[c],this.sorted.opaque[c].program);this.sorted.transparent.sort(function(t,e){return t.position.z-e.position.z});for(var l=0;l<this.sorted.transparent.length;l++)this.renderObject(this.sorted.transparent[l],this.sorted.transparent[l].program)}}},{key:"rtt",value:function(t){var e=t.renderTarget,n=t.scene,r=t.camera,o=t.clearColor,i=void 0===o?[0,0,0,1]:o;if(this.supported){var s=(0,a.getContext)();s.bindFramebuffer(s.FRAMEBUFFER,e.frameBuffer),s.viewport(0,0,e.width,e.height),s.clearColor.apply(s,d(i)),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),this.draw(n,r,e.width,e.height),s.bindTexture(s.TEXTURE_2D,e.texture),s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null)}}},{key:"render",value:function(t,e){if(this.supported){var n=(0,a.getContext)();this.shadows&&(this.renderShadow=!0,this.rtt({renderTarget:this.shadowmap.rt,scene:t,camera:this.shadowmap.camera,clearColor:[1,1,1,1]}),this.renderShadow=!1),n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this.draw(t,e,n.canvas.width,n.canvas.height)}}},{key:"updateMatrices",value:function(t){o.mat4.identity(_.modelView),o.mat4.copy(_.modelView,t),o.mat4.invert(_.inversedModelView,_.modelView),o.mat4.transpose(_.inversedModelView,_.inversedModelView),o.mat4.identity(_.normal),o.mat4.copy(_.normal,_.inversedModelView)}},{key:"sort",value:function(t){for(var e=0;e<t.children.length;e++)this.sort(t.children[e]);!t.visible||t instanceof c.default||(t.transparent?(this.sorted.transparent.push(t),this.performance.transparent++):(this.sorted.opaque.push(t),this.performance.opaque++),this.shadows&&t.shadows&&(this.sorted.shadow.push(t),this.performance.shadow++),t.attributes.a_position&&(this.performance.vertices+=t.attributes.a_position.value.length/3),t.isInstance&&(this.performance.instances+=t.instanceCount)),t.dirty.sorting=!1}},{key:"renderObject",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==t.parent){if(this.updateMatrices(t.matrices.model),t.dirty.shader&&(t.dirty.shader=!1,e&&t.destroy()),!e)return this.initUniformsPerModel(t),void t.init();h!==e&&(h=e,this.changeProgram(h,t.type)),t.bind(),this.updateUniformsPerModel(t),t.update(n),t.draw(),t.unbind()}}},{key:"initUniformsPerModel",value:function(t){p||(t.setUniform("projectionMatrix","mat4",o.mat4.create()),t.setUniform("viewMatrix","mat4",o.mat4.create()),t.setUniform("fogSettings","vec4",b),t.setUniform("fogColor","vec4",o.vec4.create()),t.setUniform("iGlobalTime","float",m[0]),t.setUniform("globalClipSettings","vec4",o.vec4.create()),t.setUniform("globalClipPlane0","vec4",o.vec4.create()),t.setUniform("globalClipPlane1","vec4",o.vec4.create()),t.setUniform("globalClipPlane2","vec4",o.vec4.create()),t.setUniform("modelMatrix","mat4",o.mat4.create()),t.setUniform("normalMatrix","mat4",o.mat4.create()),t.setUniform("localClipSettings","vec4",o.vec4.create()),t.setUniform("localClipPlane0","vec4",o.vec4.create()),t.setUniform("localClipPlane1","vec4",o.vec4.create()),t.setUniform("localClipPlane2","vec4",o.vec4.create()),t.setUniform("dlPosition","vec4",o.vec4.create()),t.setUniform("dlColor","vec4",o.vec4.create()),t.setUniform("flIntensity","float",0)),t.setUniform("shadowMap","sampler2D",0),t.setUniform("shadowMatrix","mat4",o.mat4.create()),t.setUniform("shadowNear","float",0),t.setUniform("shadowFar","float",0)}},{key:"updateUniformsPerModel",value:function(t){p?this.perModel.update([].concat(d(t.matrices.model),d(_.normal),[t.clipping.enable,0,0,0],d(t.clipping.planes[0]),d(t.clipping.planes[1]),d(t.clipping.planes[2]))):(t.uniforms.projectionMatrix.value=y.matrices.projection,t.uniforms.viewMatrix.value=_.view,t.uniforms.fogSettings.value=b,t.uniforms.fogColor.value=g.fog.color,t.uniforms.iGlobalTime.value=m[0],t.uniforms.globalClipSettings.value=[g.clipping.enable,0,0,0],t.uniforms.globalClipPlane0.value=g.clipping.planes[0],t.uniforms.globalClipPlane1.value=g.clipping.planes[1],t.uniforms.globalClipPlane2.value=g.clipping.planes[2],t.uniforms.modelMatrix.value=t.matrices.model,t.uniforms.normalMatrix.value=_.normal,t.uniforms.localClipSettings.value=[t.clipping.enable,0,0,0],t.uniforms.localClipPlane0.value=t.clipping.planes[0],t.uniforms.localClipPlane1.value=t.clipping.planes[0],t.uniforms.localClipPlane2.value=t.clipping.planes[0]),t.uniforms.shadowMap.value=this.shadowmap.rt.depthTexture,t.uniforms.shadowMatrix.value=this.shadowmap.matrices.shadow,t.uniforms.shadowNear.value=this.shadowmap.camera.near,t.uniforms.shadowFar.value=this.shadowmap.camera.far}}]),e}();e.default=M}).call(e,n(51))},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=s(n(10)),a=s(n(7)),i=n(4);function s(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scene=new o.default;var n=e.vertex,r=e.fragment,a=e.uniforms;this.vertex=n,this.fragment=r,this.uniforms=a,this.enable=!0}return r(t,[{key:"compile",value:function(){var t={vertex:"#version 300 es\n                in vec3 a_position;\n                in vec3 a_normal;\n                in vec2 a_uv;\n\n                "+i.UBO.scene()+"\n                "+i.UBO.model()+"\n\n                "+this.vertex,fragment:"#version 300 es\n                precision highp float;\n                precision highp int;\n\n                "+i.UBO.scene()+"\n                "+i.UBO.model()+"\n\n                out vec4 outColor;\n                "+this.fragment,uniforms:this.uniforms};this.quad=new a.default({geometry:{positions:[-1,-1,0,1,-1,0,1,1,0,-1,1,0],indices:[0,1,2,0,2,3],uvs:[0,0,1,0,1,1,0,1]},shader:t}),this.scene.add(this.quad)}},{key:"setUniform",value:function(t,e){this.quad.uniforms[t].value=e}}]),t}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Performance=e.Pass=e.Composer=e.RenderTarget=e.Texture=e.Mesh=e.Model=e.Scene=e.Object3=e.Renderer=e.constants=e.helpers=e.shaders=e.cameras=e.utils=e.chunks=void 0;var r=y(n(4)),o=y(n(12)),a=y(n(16)),i=y(n(6)),s=y(n(43)),u=y(n(0)),c=g(n(21)),l=g(n(5)),f=g(n(10)),d=g(n(8)),h=g(n(7)),v=g(n(9)),p=g(n(11)),m=g(n(55)),b=g(n(22)),_=g(n(58));function g(t){return t&&t.__esModule?t:{default:t}}function y(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.chunks=r,e.utils=o,e.cameras=a,e.shaders=i,e.helpers=s,e.constants=u,e.Renderer=c.default,e.Object3=l.default,e.Scene=f.default,e.Model=d.default,e.Mesh=h.default,e.Texture=v.default,e.RenderTarget=p.default,e.Composer=m.default,e.Pass=b.default,e.Performance=_.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={factory:function(){return"\n        // factory light\n        vec3 inverseLightDirection = normalize(vec3(-0.25, -0.25, 1.0));\n        vec3 directionalColor = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n        vec3 factory = mix(vec3(0.0), directionalColor, 0.989); // light intensity\n        base.rgb *= factory;\n\n        "+r.directional()},directional:function(){return"\n            // vec3 dcolor = vec3(0.01);\n            //\n            // for (int i = 0; i < MAX_DIRECTIONAL; i++) {\n            //     vec3 inverseLightDirection = normalize(directionalLights[i].dlPosition.xyz);\n            //     vec3 light = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n            //     vec3 directionalColor = directionalLights[i].dlColor.rgb * light;\n            //     dcolor += mix(dcolor, directionalColor, directionalLights[i].flIntensity);\n            // }\n            // dcolor /= float(MAX_DIRECTIONAL);\n            //\n            // base.rgb *= dcolor;\n        "}};e.LIGHT=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={linear:function(){return"\n        if (fogSettings.x > 0.0) {\n            \n    float fogStart = fogSettings.y;\n    float fogEnd = fogSettings.z;\n    float fogDensity = fogSettings.a;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = (fogEnd - dist) / (fogEnd - fogStart);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential:function(){return"\n        if (fogSettings.x > 0.0) {\n            \n    float fogStart = fogSettings.y;\n    float fogEnd = fogSettings.z;\n    float fogDensity = fogSettings.a;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp(dist * fogDensity);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential2:function(){return"\n        if (fogSettings.x > 0.0) {\n            \n    float fogStart = fogSettings.y;\n    float fogEnd = fogSettings.z;\n    float fogDensity = fogSettings.a;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp((dist * fogDensity) * (dist * fogDensity));\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"}};e.FOG=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.UBO=void 0;var r=n(0),o=n(2),a={scene:function(){return(0,o.getContextType)()===r.CONTEXT.WEBGL2?"\n            uniform perScene {\n                mat4 projectionMatrix;\n                mat4 viewMatrix;\n                vec4 fogSettings;\n                vec4 fogColor;\n                float iGlobalTime;\n                vec4 globalClipSettings;\n                vec4 globalClipPlane0;\n                vec4 globalClipPlane1;\n                vec4 globalClipPlane2;\n            };":"\n        uniform mat4 projectionMatrix;\n        uniform mat4 viewMatrix;\n        uniform vec4 fogSettings;\n        uniform vec4 fogColor;\n        uniform float iGlobalTime;\n        uniform vec4 globalClipSettings;\n        uniform vec4 globalClipPlane0;\n        uniform vec4 globalClipPlane1;\n        uniform vec4 globalClipPlane2;"},model:function(){return(0,o.getContextType)()===r.CONTEXT.WEBGL2?"\n            uniform perModel {\n                mat4 modelMatrix;\n                mat4 normalMatrix;\n                vec4 localClipSettings;\n                vec4 localClipPlane0;\n                vec4 localClipPlane1;\n                vec4 localClipPlane2;\n            };":"\n            uniform mat4 modelMatrix;\n            uniform mat4 normalMatrix;\n            uniform vec4 localClipSettings;\n            uniform vec4 localClipPlane0;\n            uniform vec4 localClipPlane1;\n            uniform vec4 localClipPlane2;"},lights:function(){return(0,o.getContextType)()===r.CONTEXT.WEBGL2?"\n                #define MAX_DIRECTIONAL "+r.MAX_DIRECTIONAL+"\n\n                struct Directional {\n                    vec4 dlPosition;\n                    vec4 dlColor;\n                    float flIntensity;\n                };\n\n                uniform directional {\n                    Directional directionalLights[MAX_DIRECTIONAL];\n                };":"\n            #define MAX_DIRECTIONAL "+r.MAX_DIRECTIONAL+"\n\n            struct Directional {\n                vec4 dlPosition;\n                vec4 dlColor;\n                float flIntensity;\n            };\n\n            uniform Directional directionalLights[MAX_DIRECTIONAL];"}};e.UBO=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.NOISE=function(){return"\n    vec3 mod289(vec3 x){return x-floor(x*(1./289.))*289.;}vec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}vec4 permute(vec4 x){return mod289((x*34.+1.)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284-.853735*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.-15.)+10.);}float cnoise(vec3 P){vec3 Pi0=floor(P),Pi1=Pi0+vec3(1.);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep),Pi1=mod(Pi0+vec3(1.),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}\n"}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.CLIPPING={vertex_pre:function(){return"\n        out vec4 local_eyespace;\n        out vec4 global_eyespace;"},vertex:function(){return"\n        local_eyespace = modelMatrix * vec4(a_position, 1.0);\n        global_eyespace = viewMatrix * modelMatrix * vec4(a_position, 1.0);"},fragment_pre:function(){return"\n        in vec4 local_eyespace;\n        in vec4 global_eyespace;"},fragment:function(){return"\n        if (localClipSettings.x > 0.0) {\n            if(dot(local_eyespace, localClipPlane0) < 0.0) discard;\n            if(dot(local_eyespace, localClipPlane1) < 0.0) discard;\n            if(dot(local_eyespace, localClipPlane2) < 0.0) discard;\n        }\n\n        if (globalClipSettings.x > 0.0) {\n            if(dot(global_eyespace, globalClipPlane0) < 0.0) discard;\n            if(dot(global_eyespace, globalClipPlane1) < 0.0) discard;\n            if(dot(global_eyespace, globalClipPlane2) < 0.0) discard;\n        }"}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.EXTENSIONS=void 0;var r=n(2),o=n(0),a={vertex:function(){return(0,r.getContextType)(),o.CONTEXT.WEBGL2,""},fragment:function(){return(0,r.getContextType)()===o.CONTEXT.WEBGL2?"":"\n        #extension GL_OES_standard_derivatives : enable"}};e.EXTENSIONS=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={vertex_pre:function(){return"\n        uniform mat4 shadowMatrix;\n        out vec4 vShadowCoord;"},vertex:function(){return"\n        vShadowCoord = shadowMatrix * modelMatrix * vec4(a_position, 1.0);"},fragment_pre:function(){return"\n        uniform sampler2D shadowMap;\n        in vec4 vShadowCoord;\n\n        \n    float hardShadow1(sampler2D shadowMap) {\n        vec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n        vec2 uv = shadowCoord.xy;\n        float shadow = texture(shadowMap, uv).r;\n\n        float visibility = 1.0;\n        float shadowAmount = 0.5;\n\n        float cosTheta = clamp(dot(v_normal, vShadowCoord.xyz), 0.0, 1.0);\n        float bias = 0.00005 * tan(acos(cosTheta)); // cosTheta is dot( n,l ), clamped between 0 and 1\n        bias = clamp(bias, 0.0, 0.001);\n\n        if (shadow < shadowCoord.z - bias){\n            visibility = shadowAmount;\n        }\n        return visibility;\n    }\n\n    float hardShadow2(sampler2D shadowMap) {\n        vec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n        vec2 uv = shadowCoord.xy;\n\n        float lightDepth1 = texture(shadowMap, uv).r;\n        float lightDepth2 = clamp(shadowCoord.z, 0.0, 1.0);\n        float bias = 0.0001;\n\n        return step(lightDepth2, lightDepth1+bias);\n    }\n\n    float hardShadow3(sampler2D shadowMap) {\n        vec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n        vec2 uv = shadowCoord.xy;\n\n        float visibility = 1.0;\n        float shadowAmount = 0.5;\n        float bias = 0.00005;\n\n        vec2 poissonDisk[16] = vec2[](\n            vec2(-0.94201624, -0.39906216),\n            vec2(0.94558609, -0.76890725),\n            vec2(-0.094184101, -0.92938870),\n            vec2(0.34495938, 0.29387760),\n            vec2(-0.91588581, 0.45771432),\n            vec2(-0.81544232, -0.87912464),\n            vec2(-0.38277543, 0.27676845),\n            vec2(0.97484398, 0.75648379),\n            vec2(0.44323325, -0.97511554),\n            vec2(0.53742981, -0.47373420),\n            vec2(-0.26496911, -0.41893023),\n            vec2(0.79197514, 0.19090188),\n            vec2(-0.24188840, 0.99706507),\n            vec2(-0.81409955, 0.91437590),\n            vec2(0.19984126, 0.78641367),\n            vec2(0.14383161, -0.14100790)\n        );\n\n        for (int i=0;i<16;i++){\n            if ( texture(shadowMap, uv + poissonDisk[i]/700.0).r < shadowCoord.z-bias ){\n                visibility -= 0.02;\n            }\n        }\n\n        return visibility;\n    }\n\n    "},fragment:function(){return"\n        // shadows\n        float shadow = 1.0;\n\n        // OPTION 1\n        shadow = hardShadow1(shadowMap);\n\n        base *= shadow;\n        "}};e.SHADOW=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.hexIntToRgb=o,e.hexStringToRgb=a,e.componentToHex=i,e.rgbToHex=function(t,e,n){var r=i(t),o=i(e),a=i(n);return"#"+r+o+a},e.convert=function(t){var e=r.vec3.create(),n="number"==typeof t?o(t):a(t);return r.vec3.copy(e,(i=n,r.vec3.fromValues(i[0]/255,i[1]/255,i[2]/255))),e;var i};var r=n(1);function o(t){var e=t>>16,n=t>>8&255,o=255&t;return r.vec3.fromValues(e,n,o)}function a(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?r.vec3.fromValues(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null}function i(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=o,a},e.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*a-o*r;if(!i)return null;return i=1/i,t[0]=a*i,t[1]=-r*i,t[2]=-o*i,t[3]=n*i,t},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=o,e.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=r*-s+a*u,t[3]=o*-s+i*u,t},e.scale=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=a*u,t[3]=i*u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var r=n(3);function o(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=r*c+a*l,t[3]=o*c+i*l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}var i=o;e.mul=i;var s=a;e.sub=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,o,a,i){var s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=o,s[4]=a,s[5]=i,s},e.set=function(t,e,n,r,o,a,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=n*a-r*o;if(!u)return null;return u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-a*i)*u,t[5]=(r*i-n*s)*u,t},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=o,e.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*c,t[1]=o*l+i*c,t[2]=r*-c+a*l,t[3]=o*-c+i*l,t[4]=s,t[5]=u,t},e.scale=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=o*c,t[2]=a*l,t[3]=i*l,t[4]=s,t[5]=u,t},e.translate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=r*c+a*l+s,t[5]=o*c+i*l+u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=e[0],l=e[1],f=e[2],d=e[3],h=e[4],v=e[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))};var r=n(3);function o(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],d=n[3],h=n[4],v=n[5];return t[0]=r*c+a*l,t[1]=o*c+i*l,t[2]=r*f+a*d,t[3]=o*f+i*d,t[4]=r*h+a*v+s,t[5]=o*h+i*v+u,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}var i=o;e.mul=i;var s=a;e.sub=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,o,a,i,s,u,c,l,f,d,h,v,p,m){var b=new r.ARRAY_TYPE(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=o,b[4]=a,b[5]=i,b[6]=s,b[7]=u,b[8]=c,b[9]=l,b[10]=f,b[11]=d,b[12]=h,b[13]=v,b[14]=p,b[15]=m,b},e.set=function(t,e,n,r,o,a,i,s,u,c,l,f,d,h,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=v,t[14]=p,t[15]=m,t},e.identity=o,e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],a=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*s-r*i,g=n*u-o*i,y=n*c-a*i,M=r*u-o*s,x=r*c-a*s,E=o*c-a*u,w=l*p-f*v,O=l*m-d*v,A=l*b-h*v,P=f*m-d*p,T=f*b-h*p,S=d*b-h*m,C=_*S-g*T+y*P+M*A-x*O+E*w;if(!C)return null;return C=1/C,t[0]=(s*S-u*T+c*P)*C,t[1]=(o*T-r*S-a*P)*C,t[2]=(p*E-m*x+b*M)*C,t[3]=(d*x-f*E-h*M)*C,t[4]=(u*A-i*S-c*O)*C,t[5]=(n*S-o*A+a*O)*C,t[6]=(m*y-v*E-b*g)*C,t[7]=(l*E-d*y+h*g)*C,t[8]=(i*T-s*A+c*w)*C,t[9]=(r*A-n*T-a*w)*C,t[10]=(v*x-p*y+b*_)*C,t[11]=(f*y-l*x-h*_)*C,t[12]=(s*O-i*P-u*w)*C,t[13]=(n*P-r*O+o*w)*C,t[14]=(p*g-v*M-m*_)*C,t[15]=(l*M-f*g+d*_)*C,t},e.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],b=e[15];return t[0]=s*(d*b-h*m)-f*(u*b-c*m)+p*(u*h-c*d),t[1]=-(r*(d*b-h*m)-f*(o*b-a*m)+p*(o*h-a*d)),t[2]=r*(u*b-c*m)-s*(o*b-a*m)+p*(o*c-a*u),t[3]=-(r*(u*h-c*d)-s*(o*h-a*d)+f*(o*c-a*u)),t[4]=-(i*(d*b-h*m)-l*(u*b-c*m)+v*(u*h-c*d)),t[5]=n*(d*b-h*m)-l*(o*b-a*m)+v*(o*h-a*d),t[6]=-(n*(u*b-c*m)-i*(o*b-a*m)+v*(o*c-a*u)),t[7]=n*(u*h-c*d)-i*(o*h-a*d)+l*(o*c-a*u),t[8]=i*(f*b-h*p)-l*(s*b-c*p)+v*(s*h-c*f),t[9]=-(n*(f*b-h*p)-l*(r*b-a*p)+v*(r*h-a*f)),t[10]=n*(s*b-c*p)-i*(r*b-a*p)+v*(r*c-a*s),t[11]=-(n*(s*h-c*f)-i*(r*h-a*f)+l*(r*c-a*s)),t[12]=-(i*(f*m-d*p)-l*(s*m-u*p)+v*(s*d-u*f)),t[13]=n*(f*m-d*p)-l*(r*m-o*p)+v*(r*d-o*f),t[14]=-(n*(s*m-u*p)-i*(r*m-o*p)+v*(r*u-o*s)),t[15]=n*(s*d-u*f)-i*(r*d-o*f)+l*(r*u-o*s),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],h=t[12],v=t[13],p=t[14],m=t[15];return(e*i-n*a)*(f*m-d*p)-(e*s-r*a)*(l*m-d*v)+(e*u-o*a)*(l*p-f*v)+(n*s-r*i)*(c*m-d*h)-(n*u-o*i)*(c*p-f*h)+(r*u-o*s)*(c*v-l*h)},e.multiply=a,e.translate=function(t,e,n){var r=n[0],o=n[1],a=n[2],i=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=void 0,b=void 0;e===t?(t[12]=e[0]*r+e[4]*o+e[8]*a+e[12],t[13]=e[1]*r+e[5]*o+e[9]*a+e[13],t[14]=e[2]*r+e[6]*o+e[10]*a+e[14],t[15]=e[3]*r+e[7]*o+e[11]*a+e[15]):(i=e[0],s=e[1],u=e[2],c=e[3],l=e[4],f=e[5],d=e[6],h=e[7],v=e[8],p=e[9],m=e[10],b=e[11],t[0]=i,t[1]=s,t[2]=u,t[3]=c,t[4]=l,t[5]=f,t[6]=d,t[7]=h,t[8]=v,t[9]=p,t[10]=m,t[11]=b,t[12]=i*r+l*o+v*a+e[12],t[13]=s*r+f*o+p*a+e[13],t[14]=u*r+d*o+m*a+e[14],t[15]=c*r+h*o+b*a+e[15]);return t},e.scale=function(t,e,n){var r=n[0],o=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,o){var a=o[0],i=o[1],s=o[2],u=Math.sqrt(a*a+i*i+s*s),c=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=void 0,b=void 0,_=void 0,g=void 0,y=void 0,M=void 0,x=void 0,E=void 0,w=void 0,O=void 0,A=void 0,P=void 0,T=void 0,S=void 0,C=void 0,R=void 0,N=void 0;if(Math.abs(u)<r.EPSILON)return null;a*=u=1/u,i*=u,s*=u,c=Math.sin(n),l=Math.cos(n),f=1-l,d=e[0],h=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],g=e[7],y=e[8],M=e[9],x=e[10],E=e[11],w=a*a*f+l,O=i*a*f+s*c,A=s*a*f-i*c,P=a*i*f-s*c,T=i*i*f+l,S=s*i*f+a*c,C=a*s*f+i*c,R=i*s*f-a*c,N=s*s*f+l,t[0]=d*w+m*O+y*A,t[1]=h*w+b*O+M*A,t[2]=v*w+_*O+x*A,t[3]=p*w+g*O+E*A,t[4]=d*P+m*T+y*S,t[5]=h*P+b*T+M*S,t[6]=v*P+_*T+x*S,t[7]=p*P+g*T+E*S,t[8]=d*C+m*R+y*N,t[9]=h*C+b*R+M*N,t[10]=v*C+_*R+x*N,t[11]=p*C+g*R+E*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},e.rotateX=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[4],i=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*o+c*r,t[5]=i*o+l*r,t[6]=s*o+f*r,t[7]=u*o+d*r,t[8]=c*o-a*r,t[9]=l*o-i*r,t[10]=f*o-s*r,t[11]=d*o-u*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o-c*r,t[1]=i*o-l*r,t[2]=s*o-f*r,t[3]=u*o-d*r,t[8]=a*r+c*o,t[9]=i*r+l*o,t[10]=s*r+f*o,t[11]=u*r+d*o,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o+c*r,t[1]=i*o+l*r,t[2]=s*o+f*r,t[3]=u*o+d*r,t[4]=c*o-a*r,t[5]=l*o-i*r,t[6]=f*o-s*r,t[7]=d*o-u*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var o=n[0],a=n[1],i=n[2],s=Math.sqrt(o*o+a*a+i*i),u=void 0,c=void 0,l=void 0;if(Math.abs(s)<r.EPSILON)return null;return o*=s=1/s,a*=s,i*=s,u=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=o*o*l+c,t[1]=a*o*l+i*u,t[2]=i*o*l-a*u,t[3]=0,t[4]=o*a*l-i*u,t[5]=a*a*l+c,t[6]=i*a*l+o*u,t[7]=0,t[8]=o*i*l+a*u,t[9]=a*i*l-o*u,t[10]=i*i*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=r+r,u=o+o,c=a+a,l=r*s,f=r*u,d=r*c,h=o*u,v=o*c,p=a*c,m=i*s,b=i*u,_=i*c;return t[0]=1-(h+p),t[1]=f+_,t[2]=d-b,t[3]=0,t[4]=f-_,t[5]=1-(l+p),t[6]=v+m,t[7]=0,t[8]=d+b,t[9]=v-m,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[4],i=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+o*o),t[1]=Math.sqrt(a*a+i*i+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r);return t},e.fromRotationTranslationScale=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3],u=o+o,c=a+a,l=i+i,f=o*u,d=o*c,h=o*l,v=a*c,p=a*l,m=i*l,b=s*u,_=s*c,g=s*l,y=r[0],M=r[1],x=r[2];return t[0]=(1-(v+m))*y,t[1]=(d+g)*y,t[2]=(h-_)*y,t[3]=0,t[4]=(d-g)*M,t[5]=(1-(f+m))*M,t[6]=(p+b)*M,t[7]=0,t[8]=(h+_)*x,t[9]=(p-b)*x,t[10]=(1-(f+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,o){var a=e[0],i=e[1],s=e[2],u=e[3],c=a+a,l=i+i,f=s+s,d=a*c,h=a*l,v=a*f,p=i*l,m=i*f,b=s*f,_=u*c,g=u*l,y=u*f,M=r[0],x=r[1],E=r[2],w=o[0],O=o[1],A=o[2];return t[0]=(1-(p+b))*M,t[1]=(h+y)*M,t[2]=(v-g)*M,t[3]=0,t[4]=(h-y)*x,t[5]=(1-(d+b))*x,t[6]=(m+_)*x,t[7]=0,t[8]=(v+g)*E,t[9]=(m-_)*E,t[10]=(1-(d+p))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*O+t[8]*A),t[13]=n[1]+O-(t[1]*w+t[5]*O+t[9]*A),t[14]=n[2]+A-(t[2]*w+t[6]*O+t[10]*A),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,d=o*i,h=o*s,v=o*u,p=a*i,m=a*s,b=a*u;return t[0]=1-f-v,t[1]=l+b,t[2]=d-m,t[3]=0,t[4]=l-b,t[5]=1-c-v,t[6]=h+p,t[7]=0,t[8]=d+m,t[9]=h-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,o,a,i){var s=1/(n-e),u=1/(o-r),c=1/(a-i);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,o){var a=1/Math.tan(e/2),i=1/(r-o);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(o+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(o-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,o,a,i){var s=1/(e-n),u=1/(r-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(i+a)*c,t[15]=1,t},e.lookAt=function(t,e,n,a){var i=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=e[0],b=e[1],_=e[2],g=a[0],y=a[1],M=a[2],x=n[0],E=n[1],w=n[2];if(Math.abs(m-x)<r.EPSILON&&Math.abs(b-E)<r.EPSILON&&Math.abs(_-w)<r.EPSILON)return o(t);d=m-x,h=b-E,v=_-w,p=1/Math.sqrt(d*d+h*h+v*v),i=y*(v*=p)-M*(h*=p),s=M*(d*=p)-g*v,u=g*h-y*d,(p=Math.sqrt(i*i+s*s+u*u))?(i*=p=1/p,s*=p,u*=p):(i=0,s=0,u=0);c=h*u-v*s,l=v*i-d*u,f=d*s-h*i,(p=Math.sqrt(c*c+l*l+f*f))?(c*=p=1/p,l*=p,f*=p):(c=0,l=0,f=0);return t[0]=i,t[1]=c,t[2]=d,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=u,t[9]=f,t[10]=v,t[11]=0,t[12]=-(i*m+s*b+u*_),t[13]=-(c*m+l*b+f*_),t[14]=-(d*m+h*b+v*_),t[15]=1,t},e.targetTo=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=r[0],u=r[1],c=r[2],l=o-n[0],f=a-n[1],d=i-n[2],h=l*l+f*f+d*d;h>0&&(h=1/Math.sqrt(h),l*=h,f*=h,d*=h);var v=u*d-c*f,p=c*l-s*d,m=s*f-u*l;return t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=f*m-d*p,t[5]=d*v-l*m,t[6]=l*p-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=t[9],h=t[10],v=t[11],p=t[12],m=t[13],b=t[14],_=t[15],g=e[0],y=e[1],M=e[2],x=e[3],E=e[4],w=e[5],O=e[6],A=e[7],P=e[8],T=e[9],S=e[10],C=e[11],R=e[12],N=e[13],I=e[14],L=e[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-y)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-E)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-w)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-O)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-A)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(f-P)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(d-T)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(h-S)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(v-C)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(p-R)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-N)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(b-I)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(_-L)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(L))};var r=n(3);function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],v=e[11],p=e[12],m=e[13],b=e[14],_=e[15],g=n[0],y=n[1],M=n[2],x=n[3];return t[0]=g*r+y*s+M*f+x*p,t[1]=g*o+y*u+M*d+x*m,t[2]=g*a+y*c+M*h+x*b,t[3]=g*i+y*l+M*v+x*_,g=n[4],y=n[5],M=n[6],x=n[7],t[4]=g*r+y*s+M*f+x*p,t[5]=g*o+y*u+M*d+x*m,t[6]=g*a+y*c+M*h+x*b,t[7]=g*i+y*l+M*v+x*_,g=n[8],y=n[9],M=n[10],x=n[11],t[8]=g*r+y*s+M*f+x*p,t[9]=g*o+y*u+M*d+x*m,t[10]=g*a+y*c+M*h+x*b,t[11]=g*i+y*l+M*v+x*_,g=n[12],y=n[13],M=n[14],x=n[15],t[12]=g*r+y*s+M*f+x*p,t[13]=g*o+y*u+M*d+x*m,t[14]=g*a+y*c+M*h+x*b,t[15]=g*i+y*l+M*v+x*_,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var s=a;e.mul=s;var u=i;e.sub=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=s,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=u,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0);return n},e.multiply=c,e.rotateX=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=a*u-o*s,t[3]=i*u-r*s,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=o*u+i*s,t[2]=a*u+r*s,t[3]=i*u-o*s,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=a*u+i*s,t[3]=i*u-a*s,t},e.calculateW=function(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},e.slerp=l,e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a,s=i?1/i:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=a*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=f,e.fromEuler=function(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var a=Math.sin(e),i=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=a*u*l-i*s*c,t[1]=i*s*l+a*u*c,t[2]=i*u*c-a*s*l,t[3]=i*u*l+a*s*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var r=n(3),o=n(13),a=n(14),i=n(15);function s(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function c(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,t}function l(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3],u=n[0],c=n[1],l=n[2],f=n[3],d=void 0,h=void 0,v=void 0,p=void 0,m=void 0;return(h=o*u+a*c+i*l+s*f)<0&&(h=-h,u=-u,c=-c,l=-l,f=-f),1-h>1e-6?(d=Math.acos(h),v=Math.sin(d),p=Math.sin((1-r)*d)/v,m=Math.sin(r*d)/v):(p=1-r,m=r),t[0]=p*o+m*u,t[1]=p*a+m*c,t[2]=p*i+m*l,t[3]=p*s+m*f,t}function f(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(e[3*a+i]-e[3*i+a])*r,t[a]=(e[3*a+o]+e[3*o+a])*r,t[i]=(e[3*i+o]+e[3*o+i])*r}return t}var d=i.clone;e.clone=d;var h=i.fromValues;e.fromValues=h;var v=i.copy;e.copy=v;var p=i.set;e.set=p;var m=i.add;e.add=m;var b=c;e.mul=b;var _=i.scale;e.scale=_;var g=i.dot;e.dot=g;var y=i.lerp;e.lerp=y;var M=i.length;e.length=M;var x=M;e.len=x;var E=i.squaredLength;e.squaredLength=E;var w=E;e.sqrLen=w;var O=i.normalize;e.normalize=O;var A=i.exactEquals;e.exactEquals=A;var P=i.equals;e.equals=P;var T,S,C,R=(T=a.create(),S=a.fromValues(1,0,0),C=a.fromValues(0,1,0),function(t,e,n){var r=a.dot(e,n);return r<-.999999?(a.cross(T,S,e),a.len(T)<1e-6&&a.cross(T,C,e),a.normalize(T,T),u(t,T,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(a.cross(T,e,n),t[0]=T[0],t[1]=T[1],t[2]=T[2],t[3]=1+r,O(t,t))});e.rotationTo=R;var N,I,L=(N=s(),I=s(),function(t,e,n,r,o,a){return l(N,e,o,a),l(I,n,r,a),l(t,N,I,2*a*(1-a)),t});e.sqlerp=L;var k,j=(k=o.create(),function(t,e,n,r){return k[0]=n[0],k[3]=n[1],k[6]=n[2],k[1]=r[0],k[4]=r[1],k[7]=r[2],k[2]=-e[0],k[5]=-e[1],k[8]=-e[2],O(t,f(t,k))});e.setAxes=j},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=o,e.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=i,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=c,e.length=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var o=e[0],a=e[1];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},e.transformMat2d=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],o=t[1],a=e[0],i=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-i)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))};var r=n(3);function o(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function i(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function l(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function f(t){var e=t[0],n=t[1];return e*e+n*n}var d=l;e.len=d;var h=a;e.sub=h;var v=i;e.mul=v;var p=s;e.div=p;var m=u;e.dist=m;var b=c;e.sqrDist=b;var _=f;e.sqrLen=_;var g,y=(g=o(),function(t,e,n,r,o,a){var i=void 0,s=void 0;for(e||(e=2),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)g[0]=t[i],g[1]=t[i+1],o(g,g,a),t[i]=g[0],t[i+1]=g[1];return t});e.forEach=y},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.randomRange=function(t,e){return Math.random()*(e-t)+t},e.mod=function(t,e){return(t%e+e)%e}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,r.getContextType)()===o.CONTEXT.WEBGL2)return t;return("vertex"===e?l:f).forEach(function(e){t="function"==typeof e.replace?e.replace(t):t.replace(e.match,e.replace)}),t};var r=n(2),o=n(0),a=function(t){return new RegExp("\\b"+t+"\\b","gi")},i=function(t){return new RegExp(""+t,"gi")},s=[{match:a("in"),replace:"attribute"},{match:a("out"),replace:"varying"}],u=[{match:a("in"),replace:"varying"},{match:i("out vec4 outColor;"),replace:""},{match:a("outColor"),replace:"gl_FragColor"},{match:a("textureProj"),replace:"texture2DProj"},{match:a("texture"),replace:function(t){var e=new RegExp("\\btexture\\b","gi"),n=new RegExp("\\btexture\\b","i"),r=new RegExp(/texture\(([^)]+)\)/,"i"),o=t.match(e),a="";if(null===o)return t;var i=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){c.value;var f=t.match(r)[0];if(f){var d=f.replace("texture(","").split(",")[0],h=t.match("(.*?) "+d,"i")[1].replace(/^\s+|\s+$/gm,"");switch(h=h.split(" ")[1]){case"sampler2D":a="texture2D";break;case"samplerCube":a="textureCube"}}t=t.replace(n,a)}}catch(t){s=!0,u=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw u}}return t}}],c=[{match:i("#version 300 es"),replace:""}],l=[].concat(c,s),f=[].concat(c,u)},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1);var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=o.vec3.fromValues(e,n,r)}return r(t,[{key:"set",value:function(t,e,n){this.x=t,this.y=e,this.z=n}},{key:"x",set:function(t){this.data[0]=t},get:function(){return this.data[0]}},{key:"y",set:function(t){this.data[1]=t},get:function(){return this.data[1]}},{key:"z",set:function(t){this.data[2]=t},get:function(){return this.data[2]}}]),t}();e.default=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=n(4),a=n(0);e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.color||r.vec3.fromValues(1,1,1),i="#version 300 es\n            "+o.EXTENSIONS.vertex()+"\n\n            in vec3 a_position;\n\n            "+o.UBO.scene()+"\n            "+o.UBO.model()+"\n\n            void main() {\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n            }\n        ",s="#version 300 es\n            "+o.EXTENSIONS.fragment()+"\n\n            precision highp float;\n            precision highp int;\n\n            "+o.UBO.scene()+"\n\n            uniform vec3 u_color;\n\n            out vec4 outColor;\n\n            void main() {\n                vec4 base = vec4(u_color, 1.0);\n\n                "+o.FOG.linear()+"\n\n                outColor = base;\n            }\n        ";return Object.assign({type:a.SHADER_BASIC,mode:!0===e.wireframe?a.DRAW.LINES:a.DRAW.TRIANGLES},{vertex:i,fragment:s,uniforms:{u_color:{type:"vec3",value:n}}})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),a=n(9),i=(r=a)&&r.__esModule?r:{default:r},s=n(4),u=n(0);e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.color||o.vec3.fromValues(1,1,1);this.map=new i.default({transparent:!0}),e.map&&this.map.fromImage(e.map),e.texture&&(this.map=e.texture);var r="#version 300 es\n            "+s.EXTENSIONS.vertex()+"\n\n            in vec3 a_position;\n            in vec3 a_normal;\n            in vec2 a_uv;\n\n            "+s.UBO.scene()+"\n            "+s.UBO.model()+"\n            "+s.CLIPPING.vertex_pre()+"\n            "+s.SHADOW.vertex_pre()+"\n\n            out vec3 fragVertexEc;\n            out vec2 v_uv;\n            out vec3 v_normal;\n\n            void main() {\n                vec4 worldPosition = modelMatrix * vec4(a_position, 1.0);\n                vec4 position = projectionMatrix * viewMatrix * worldPosition;\n                gl_Position = position;\n\n                fragVertexEc = position.xyz; // worldPosition.xyz;\n                v_uv = a_uv;\n                v_normal = (normalMatrix * vec4(a_normal, 1.0)).xyz;\n\n                "+s.SHADOW.vertex()+"\n                "+s.CLIPPING.vertex()+"\n            }\n        ",a="#version 300 es\n            "+s.EXTENSIONS.fragment()+"\n\n            precision highp float;\n            precision highp int;\n\n            in vec3 fragVertexEc;\n            in vec2 v_uv;\n            in vec3 v_normal;\n\n            "+s.CLIPPING.fragment_pre()+"\n\n            "+s.UBO.scene()+"\n            "+s.UBO.model()+"\n            "+s.UBO.lights()+"\n\n            uniform sampler2D u_map;\n            uniform vec3 u_color;\n\n            "+s.SHADOW.fragment_pre()+"\n\n            out vec4 outColor;\n\n            void main() {\n                vec3 v_normal = normalize(cross(dFdx(fragVertexEc), dFdy(fragVertexEc)));\n\n                vec4 base = vec4(0.0, 0.0, 0.0, 1.0);\n                base += vec4(u_color, 1.0);\n                base *= texture(u_map, v_uv);\n\n                "+s.SHADOW.fragment()+"\n                "+s.LIGHT.factory()+"\n                "+s.FOG.linear()+"\n                "+s.CLIPPING.fragment()+"\n\n                outColor = base;\n            }\n        ";return Object.assign({type:u.SHADER_DEFAULT,mode:!0===e.wireframe?u.DRAW.LINES:u.DRAW.TRIANGLES},{vertex:r,fragment:a,uniforms:{u_map:{type:"sampler2D",value:this.map.texture},u_color:{type:"vec3",value:n}}})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(9),a=(r=o)&&r.__esModule?r:{default:r},i=n(4),s=n(0);e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=new a.default,e.map&&this.map.fromImage(e.map),e.texture&&(this.map=e.texture);var n="#version 300 es\n            "+i.EXTENSIONS.vertex()+"\n\n            in vec3 a_position;\n            in vec2 a_uv;\n\n            "+i.UBO.scene()+"\n            "+i.UBO.model()+"\n\n            out vec2 v_uv;\n\n            void main() {\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n                v_uv = a_uv;\n            }\n        ",r="#version 300 es\n            "+i.EXTENSIONS.fragment()+"\n\n            precision highp float;\n            precision highp int;\n\n            in vec2 v_uv;\n\n            "+i.UBO.scene()+"\n\n            uniform sampler2D u_map;\n\n            out vec4 outColor;\n\n            void main() {\n                // depth map\n                float z = texture(u_map, v_uv).r;\n                float n = 1.0;\n                float f = 1000.0;\n                float c = (2.0 * n) / (f + n - z * (f - n));\n\n                // draw depth\n                outColor = vec4(c);\n            }\n        ";return Object.assign({type:s.SHADER_BILLBOARD,mode:s.DRAW.TRIANGLES},{vertex:n,fragment:r,uniforms:{u_map:{type:"sampler2D",value:this.map.texture}}})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Normals=e.Axis=void 0;var r=a(n(44)),o=a(n(50));function a(t){return t&&t.__esModule?t:{default:t}}e.Axis=r.default,e.Normals=o.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o=u(n(7)),a=u(n(8)),s=n(6);function u(t){return t&&t.__esModule?t:{default:t}}function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),a=t&&t.size||10,u={positions:[].concat(c(r.vec3.fromValues(0,0,0)),c(r.vec3.fromValues(a,0,0)))},l={positions:[].concat(c(r.vec3.fromValues(0,0,0)),c(r.vec3.fromValues(0,a,0)))},f={positions:[].concat(c(r.vec3.fromValues(0,0,0)),c(r.vec3.fromValues(0,0,a)))},d=new s.Basic({color:r.vec3.fromValues(1,0,0),wireframe:!0}),h=new s.Basic({color:r.vec3.fromValues(0,1,0),wireframe:!0}),v=new s.Basic({color:r.vec3.fromValues(0,0,1),wireframe:!0}),p=new o.default({geometry:u,shader:d});n.add(p);var m=new o.default({geometry:l,shader:h});n.add(m);var b=new o.default({geometry:f,shader:v});return n.add(b),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2);var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(0,o.getContext)();this.boundLocation=n,this.data=new Float32Array(e),this.buffer=r.createBuffer(),r.bindBuffer(r.UNIFORM_BUFFER,this.buffer),r.bufferData(r.UNIFORM_BUFFER,this.data,r.STATIC_DRAW),r.bindBuffer(r.UNIFORM_BUFFER,null)}return r(t,[{key:"bind",value:function(){var t=(0,o.getContext)();t.bindBufferBase(t.UNIFORM_BUFFER,this.boundLocation,this.buffer)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,o.getContext)();this.data.set(t,e),n.bindBuffer(n.UNIFORM_BUFFER,this.buffer),n.bufferSubData(n.UNIFORM_BUFFER,0,this.data,0,null),n.bindBuffer(n.UNIFORM_BUFFER,null)}}]),t}();e.default=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),a=n(0);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=(0,o.getContext)(),n=(0,o.supports)().vertexArrayObject;(0,o.getContextType)()===a.CONTEXT.WEBGL2?(this.vao=e.createVertexArray(),e.bindVertexArray(this.vao)):n&&(this.vao=(0,o.supports)().vertexArrayObject.createVertexArrayOES(),n.bindVertexArrayOES(this.vao))}return r(t,[{key:"bind",value:function(){var t=(0,o.getContext)(),e=(0,o.supports)().vertexArrayObject;(0,o.getContextType)()===a.CONTEXT.WEBGL2?t.bindVertexArray(this.vao):e&&e.bindVertexArrayOES(this.vao)}},{key:"unbind",value:function(){var t=(0,o.getContext)(),e=(0,o.supports)().vertexArrayObject;(0,o.getContextType)()===a.CONTEXT.WEBGL2?t.bindVertexArray(null):e&&e.bindVertexArrayOES(null)}},{key:"destroy",value:function(){var t=(0,o.getContext)(),e=(0,o.supports)().vertexArrayObject;(0,o.getContextType)()===a.CONTEXT.WEBGL2?t.deleteVertexArray(this.vao):e&&e.deleteVertexArrayOES(this.vao),this.vao=null}}]),t}();e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.getTypeSize=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":case"mat2":return 4;case"mat3":return 9;case"mat4":return 16;default:throw new Error('"'+t+'" is an unknown type')}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.updateAttributes=e.bindAttributes=e.initAttributes=void 0;var r=n(2),o=n(0);e.initAttributes=function(t,e){var n=(0,r.getContext)();for(var o in t){var a=t[o],i=n.getAttribLocation(e,o),s=a.buffer;a.buffer||(s=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,a.value,n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),Object.assign(a,{location:i,buffer:s})}},e.bindAttributes=function(t){var e=(0,r.getContext)();Object.keys(t).forEach(function(n){var a=t[n],i=a.location,s=a.buffer,u=a.size,c=a.instanced;if(-1!==i){e.bindBuffer(e.ARRAY_BUFFER,s),e.vertexAttribPointer(i,u,e.FLOAT,!1,0,0),e.enableVertexAttribArray(i);var l=c?1:0;(0,r.getContextType)()===o.CONTEXT.WEBGL2?e.vertexAttribDivisor(i,l):(0,r.supports)().instancedArrays.vertexAttribDivisorANGLE(i,l),e.bindBuffer(e.ARRAY_BUFFER,null)}})},e.updateAttributes=function(t){var e=(0,r.getContext)();Object.keys(t).forEach(function(n){var r=t[n],o=r.location,a=r.buffer,i=r.value;-1!==o&&(e.enableVertexAttribArray(o),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null))})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.updateUniforms=e.initUniforms=void 0;var r=n(2);e.initUniforms=function(t,e){var n=(0,r.getContext)(),o=[n.TEXTURE0,n.TEXTURE1,n.TEXTURE2,n.TEXTURE3,n.TEXTURE4,n.TEXTURE5],a=0;Object.keys(t).forEach(function(r){var i=t[r],s=n.getUniformLocation(e,r);Object.assign(i,{location:s}),"sampler2D"===i.type&&(i.textureIndex=a,i.activeTexture=o[a],a++)})},e.updateUniforms=function(t){var e=(0,r.getContext)();Object.keys(t).forEach(function(n){var r=t[n];switch(r.type){case"mat4":e.uniformMatrix4fv(r.location,!1,r.value);break;case"mat3":e.uniformMatrix3fv(r.location,!1,r.value);break;case"vec4":e.uniform4fv(r.location,r.value);break;case"vec3":e.uniform3fv(r.location,r.value);break;case"vec2":e.uniform2fv(r.location,r.value);break;case"float":e.uniform1f(r.location,r.value);break;case"sampler2D":e.activeTexture(r.activeTexture),e.bindTexture(e.TEXTURE_2D,r.value),e.uniform1i(r.location,r.textureIndex);break;default:throw new Error('"'+r.type+'" is an unknown uniform type')}})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=c(n(7)),s=c(n(8)),u=n(6);function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=t&&t.size||1,s={positions:[]},c=t.model.scale.x,l=t.model.scale.y,f=t.model.scale.z,d=t.model.attributes.a_normal.value.length/3,h=0;h<d;h++){var v=3*h,p=c*t.model.attributes.a_position.value[v+0],m=l*t.model.attributes.a_position.value[v+1],b=f*t.model.attributes.a_position.value[v+2],_=p+r*t.model.attributes.a_normal.value[v+0],g=m+r*t.model.attributes.a_normal.value[v+1],y=b+r*t.model.attributes.a_normal.value[v+2];s.positions=s.positions.concat([p,m,b,_,g,y])}var M=new u.Basic({color:o.vec3.fromValues(0,1,1),wireframe:!0}),x=new a.default({geometry:s,shader:M});return n.add(x),n.reference=t.model,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),r(e,[{key:"update",value:function(){(function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(r):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this),o.vec3.copy(this.position.data,this.reference.position.data),o.vec3.copy(this.rotation.data,this.reference.rotation.data),this.lookToTarget=this.reference.lookToTarget}}]),e}();e.default=l},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":i(window))&&(n=window)}t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.resize=function(t,e,n,r){t.width=e*r,t.height=n*r,t.style.width=e+"px",t.style.height=n+"px"},e.unsupported=function(){var t=document.createElement("div");return t.innerHTML='Your browser doesn\'t support WebGL.<br><a href="https://get.webgl.org">Get WebGL</a>',t.style.display="table",t.style.margin="20px auto 0 auto",t.style.border="1px solid #333",t.style.backgroundColor="rgba(255, 255, 255, 0.1)",t.style.borderRadius="4px",t.style.padding="10px",t.style.fontFamily="monospace",t.style.fontSize="12px",t.style.textAlign="center",t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Directional=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=n(0);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(){s(this,t),this.position=o.vec3.create()}return r(t,[{key:"destroy",value:function(){}}]),t}(),c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.type=a.DIRECTIONAL_LIGHT,n.color=t.color||o.vec3.fromValues(1,1,1),n.intensity=t.intensity||.989,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u),e}();e.Directional=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=u(n(11)),i=u(n(18)),s=u(n(17));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e.width||1024,this.height=e.height||1024;var n=this.width,r=this.height;this.rt=new a.default({width:n,height:r}),this.matrices={view:o.mat4.create(),shadow:o.mat4.create(),bias:o.mat4.fromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1)},this.camera=new i.default({fov:60,near:1,far:1e3}),this.camera=new s.default,this.camera.position.z=1,this.setLightOrigin(e.light||o.vec3.fromValues(100,250,500))}return r(t,[{key:"setLightOrigin",value:function(t){o.vec3.copy(this.camera.position.data,t),o.mat4.identity(this.matrices.view),o.mat4.lookAt(this.matrices.view,this.camera.position.data,this.camera.target,this.camera.up),o.mat4.identity(this.matrices.shadow),o.mat4.multiply(this.matrices.shadow,this.camera.matrices.projection,this.matrices.view),o.mat4.multiply(this.matrices.shadow,this.matrices.bias,this.matrices.shadow)}}]),t}();e.default=c},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),a=n(16),i=l(n(21)),s=l(n(11)),u=l(n(22)),c=n(56);function l(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=new i.default(e),this.domElement=this.renderer.domElement,this.camera=new a.Orthographic,this.camera.position.z=100,this.passes=[],this.clearColor=o.vec4.fromValues(0,0,0,1),this.screen=new u.default(c.Basic),this.screen.compile(),this.buffers=[new s.default,new s.default],this.read=this.buffers[1],this.write=this.buffers[0]}return r(t,[{key:"setSize",value:function(t,e){this.renderer.setSize(t,e),this.read.setSize(t,e),this.write.setSize(t,e)}},{key:"setRatio",value:function(t){this.renderer.setRatio(t)}},{key:"pass",value:function(t){this.passes.push(t)}},{key:"compile",value:function(){for(var t=0;t<this.passes.length;t++)this.passes[t].compile()}},{key:"renderToTexture",value:function(t,e,n){this.renderer.rtt({renderTarget:t,scene:e,camera:n,clearColor:this.clearColor})}},{key:"resetBuffers",value:function(){this.read=this.buffers[1],this.write=this.buffers[0]}},{key:"swapBuffers",value:function(){this.temp=this.read,this.read=this.write,this.write=this.temp}},{key:"render",value:function(t,e){this.resetBuffers(),this.renderToTexture(this.write,t,e);for(var n=this.passes.length,r=0;r<n;r++)this.passes[r].enable&&(this.swapBuffers(),this.passes[r].setUniform("u_input",this.read.texture),this.renderToTexture(this.write,this.passes[r].scene,this.camera));this.screen.setUniform("u_input",this.write.texture),this.renderer.render(this.screen.scene,this.camera)}}]),t}();e.default=f},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Basic=void 0;var r,o=n(57),a=(r=o)&&r.__esModule?r:{default:r};e.Basic=a.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.default={uniforms:{u_input:{type:"sampler2D",value:null}},vertex:"\n    out vec2 v_uv;\n    void main() {\n        gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n        v_uv = a_uv;\n    }",fragment:"\n    in vec2 v_uv;\n\n    uniform sampler2D u_input;\n\n    void main() {\n        outColor = texture(u_input, v_uv);\n    }"}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.theme=e.theme||{font:"font-family:sans-serif;font-size:xx-small;font-weight:bold;line-height:15px;-moz-osx-font-smoothing: grayscale;-webkit-font-smoothing: antialiased;",color1:"#242424",color2:"#2a2a2a",color3:"#666",color4:"#999"};var n=document.createElement("div");n.style.cssText="position:fixed;bottom:0;left:0;min-width:80px;opacity:0.9;z-index:10000;",this.holder=document.createElement("div"),this.holder.style.cssText="padding:3px;background-color:"+this.theme.color1+";",n.appendChild(this.holder);var r=document.createElement("div");r.style.cssText=this.theme.font+";color:"+this.theme.color3+";",r.innerHTML="Performance",this.holder.appendChild(r),this.msTexts=[],this.domElement=n}return r(t,[{key:"rebuild",value:function(t){var e=this;this.msTexts=[],Object.keys(t).forEach(function(t){var n=document.createElement("div");n.style.cssText=e.theme.font+";color:"+e.theme.color4+";background-color:"+e.theme.color2+";",e.holder.appendChild(n),e.msTexts[t]=n})}},{key:"update",value:function(t){var e=this;Object.keys(this.msTexts).length!==Object.keys(t.performance).length&&this.rebuild(t.performance),Object.keys(t.performance).forEach(function(n){e.msTexts[n].textContent=n+": "+t.performance[n]})}}]),t}();e.default=o}])},"object"===i(e)&&"object"===i(t)?t.exports=a():(r=[],void 0===(o="function"==typeof(n=a)?n.apply(e,r):n)||(t.exports=o))}).call(e,n(1)(t))},function(t,e,n){"use strict";(function(t){var n,r,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"undefined"!=typeof self&&self,a=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return o}),e.setMatrixArrayType=function(t){o=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=1e-6;e.EPSILON=r;var o="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;e.RANDOM=a;var i=Math.PI/180},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3);var a=function(){function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=[],s={faces:(0,o.unflatten)(n,3),positions:(0,o.unflatten)(e,3)},u=Math.min(a,4);u-- >0;)s=this.subdivide(s);for(var c=0;c<s.positions.length;c++){var l=this.normalize(s.positions[c]),f=.5*(-Math.atan2(l[2],-l[0])/Math.PI+1),d=.5+Math.asin(l[1])/Math.PI;i.push([1-f,1-d])}e=s.positions;for(var h=0;h<e.length;h++)this.scale(e[h],r);var v={positions:(0,o.flatten)(s.positions),indices:(0,o.flatten)(s.faces),normals:null,uvs:(0,o.flatten)(i,2)};this.geometry={positions:v.positions,indices:v.indices,normals:(0,o.generateVertexNormals)(v.positions,v.indices),uvs:(0,o.flatten)(i,2)}}return r(t,[{key:"fixPoleUVs",value:function(t,e,n){var r=this.firstYIndex(t,1),o=this.firstYIndex(t,-1);if(-1!==r&&-1!==o){for(var a=t.slice(),i=n.slice(),s=a.length-1,u=0;u<e.length;u++){var c=e[u],l=c[0],f=c[1],d=c[2];l===r?h(c,r,f,d):l===o&&h(c,o,f,d)}t=a,n=i}function h(e,r,o,u){var c=n[o],l=n[u];n[r][0]=(c[0]+l[0])/2,s++,a.push(t[r].slice()),i.push(n[r].slice()),e[0]=s}}},{key:"firstYIndex",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Math.abs(r[1]-e)<=1e-4)return n}return-1}},{key:"normalize",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var r=0;r<t.length;r++)t[r]/=e;return t}},{key:"scale",value:function(t,e){for(var n=0;n<t.length;n++)t[n]*=e;return t}},{key:"subdivide",value:function(t){var e=t.positions,n=t.faces,r=[],o=[],a={},i=0;function s(t,e){var n=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}(t,e),r=function(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}(n),o=a[r];return o||(a[r]=n,a[r])}for(var u=0;u<n.length;u++){var c=n[u],l=c[0],f=c[1],d=c[2],h=e[l],v=e[f],p=e[d],m=s(h,v),b=s(v,p),_=s(p,h),g=o.indexOf(m);-1===g&&(g=i++,o.push(m));var y=o.indexOf(b);-1===y&&(y=i++,o.push(b));var M=o.indexOf(_);-1===M&&(M=i++,o.push(_));var x=o.indexOf(h);-1===x&&(x=i++,o.push(h));var E=o.indexOf(v);-1===E&&(E=i++,o.push(v));var w=o.indexOf(p);-1===w&&(w=i++,o.push(p)),r.push([x,g,M]),r.push([E,y,g]),r.push([w,M,y]),r.push([g,y,M])}return{faces:r,positions:o}}}]),t}();e.default=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(8),a=n(9),i=n(4),s=n(10),u=n(11),c=n(12),l=n(5),f=n(6);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return o}),n.d(e,"mat2d",function(){return a}),n.d(e,"mat3",function(){return i}),n.d(e,"mat4",function(){return s}),n.d(e,"quat",function(){return u}),n.d(e,"vec2",function(){return c}),n.d(e,"vec3",function(){return l}),n.d(e,"vec4",function(){return f})},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=o,e.unflatten=a,e.generateVertexNormals=i,e.mergeVertices=function(t){for(var e=a(t.positions,3),n={},r=[],s=[],u=Math.pow(10,4),c=0;c<e.length;c++){var l=e[c],f="\n            "+Math.round(l[0]*u)+"_\n            "+Math.round(l[1]*u)+"_\n            "+Math.round(l[2]*u)+"\n        ";void 0===n[f]?(n[f]=c,r.push(e[c]),s[c]=r.length-1):s[c]=s[n[f]]}for(var d=[],h=a(t.indices,3),v=0;v<h.length;v++){var p=h[v];p[0]=s[p[0]],p[1]=s[p[1]],p[2]=s[p[2]];for(var m=[p[0],p[1],p[2]],b=0;b<3;b++)if(m[b]===m[(b+1)%3]){d.push(v);break}}for(var _=d.length-1;_>=0;_--){var g=d[_];h.splice(g,1);for(var y=0;y<this.faceVertexUvs.length;y++)this.faceVertexUvs[y].splice(g,1)}var M=o(r),x=o(h);return{positions:new Float32Array(M),indices:new Uint16Array(x),normals:new Float32Array(i(M,x))}};var r=n(2);function o(t){for(var e=[],n=0;n<t.length;n++)Array.isArray(t[n])||t[n]instanceof Float32Array?e=e.concat(o(t[n])):e.push(t[n]);return e}function a(t,e){for(var n=[],r=0;r<t.length;r+=e){for(var o=[],a=0;a<e;a++)o.push(t[r+a]);n.push(o)}return n}function i(t,e){for(var n=a(e,3),i=a(t,3),s=[],u=r.vec3.create(),c=r.vec3.create(),l=r.vec3.create(),f=void 0,d=void 0,h=void 0,v=0;v<n.length;v++){var p=n[v],m=p[0],b=p[1],_=p[2];f=i[m],d=i[b],h=i[_],r.vec3.subtract(u,h,d),r.vec3.subtract(c,f,d),r.vec3.cross(l,u,c),void 0===s[m]&&(s[m]=r.vec3.create()),void 0===s[b]&&(s[b]=r.vec3.create()),void 0===s[_]&&(s[_]=r.vec3.create()),r.vec3.add(s[m],s[m],l),r.vec3.add(s[b],s[b],l),r.vec3.add(s[_],s[_],l)}for(var g=0;g<s.length;g++)r.vec3.normalize(s[g],s[g]);return o(s)}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,o,a,i,s,u,c){var l=new r.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=o,l[4]=a,l[5]=i,l[6]=s,l[7]=u,l[8]=c,l},e.set=function(t,e,n,r,o,a,i,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*i-s*c,d=-l*a+s*u,h=c*a-i*u,v=n*f+r*d+o*h;if(!v)return null;return v=1/v,t[0]=f*v,t[1]=(-l*r+o*c)*v,t[2]=(s*r-o*i)*v,t[3]=d*v,t[4]=(l*n-o*u)*v,t[5]=(-s*n+o*a)*v,t[6]=h*v,t[7]=(-c*n+r*u)*v,t[8]=(i*n-r*a)*v,t},e.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=i*l-s*c,t[1]=o*c-r*l,t[2]=r*s-o*i,t[3]=s*u-a*l,t[4]=n*l-o*u,t[5]=o*a-n*s,t[6]=a*c-i*u,t[7]=r*u-n*c,t[8]=n*i-r*a,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-i*u)+n*(-c*o+i*s)+r*(u*o-a*s)},e.multiply=o,e.translate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=d*r+h*i+c,t[7]=d*o+h*s+l,t[8]=d*a+h*u+f,t},e.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*r+d*i,t[1]=h*o+d*s,t[2]=h*a+d*u,t[3]=h*i-d*r,t[4]=h*s-d*o,t[5]=h*u-d*a,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,d=o*i,h=o*s,v=o*u,p=a*i,m=a*s,b=a*u;return t[0]=1-f-v,t[3]=l-b,t[6]=d+m,t[1]=l+b,t[4]=1-c-v,t[7]=h-p,t[2]=d-m,t[5]=h+p,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*s-r*i,g=n*u-o*i,y=n*c-a*i,M=r*u-o*s,x=r*c-a*s,E=o*c-a*u,w=l*p-f*v,O=l*m-d*v,A=l*b-h*v,P=f*m-d*p,T=f*b-h*p,S=d*b-h*m,C=_*S-g*T+y*P+M*A-x*O+E*w;if(!C)return null;return C=1/C,t[0]=(s*S-u*T+c*P)*C,t[1]=(u*A-i*S-c*O)*C,t[2]=(i*T-s*A+c*w)*C,t[3]=(o*T-r*S-a*P)*C,t[4]=(n*S-o*A+a*O)*C,t[5]=(r*A-n*T-a*w)*C,t[6]=(p*E-m*x+b*M)*C,t[7]=(m*y-v*E-b*g)*C,t[8]=(v*x-p*y+b*_)*C,t},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=e[0],h=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],g=e[7],y=e[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-h)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-v)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-b)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-_)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(f-y)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))};var r=n(0);function o(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],h=n[1],v=n[2],p=n[3],m=n[4],b=n[5],_=n[6],g=n[7],y=n[8];return t[0]=d*r+h*i+v*c,t[1]=d*o+h*s+v*l,t[2]=d*a+h*u+v*f,t[3]=p*r+m*i+b*c,t[4]=p*o+m*s+b*l,t[5]=p*a+m*u+b*f,t[6]=_*r+g*i+y*c,t[7]=_*o+g*s+y*l,t[8]=_*a+g*u+y*f,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}var i=o;e.mul=i;var s=a;e.sub=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=o,e.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=i,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=s,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=l,e.squaredDistance=f,e.squaredLength=d,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=v,e.cross=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2];return t[0]=o*u-a*s,t[1]=a*i-r*u,t[2]=r*s-o*i,t},e.lerp=function(t,e,n,r){var o=e[0],a=e[1],i=e[2];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t},e.hermite=function(t,e,n,r,o,a){var i=a*a,s=i*(2*a-3)+1,u=i*(a-2)+a,c=i*(a-1),l=i*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*l,t},e.bezier=function(t,e,n,r,o,a){var i=1-a,s=i*i,u=a*a,c=s*i,l=3*a*s,f=3*u*i,d=u*a;return t[0]=e[0]*c+n[0]*l+r[0]*f+o[0]*d,t[1]=e[1]*c+n[1]*l+r[1]*f+o[1]*d,t[2]=e[2]*c+n[2]*l+r[2]*f+o[2]*d,t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=o*e,t},e.transformMat4=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,t[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,t[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,t},e.transformMat3=function(t,e,n){var r=e[0],o=e[1],a=e[2];return t[0]=r*n[0]+o*n[3]+a*n[6],t[1]=r*n[1]+o*n[4]+a*n[7],t[2]=r*n[2]+o*n[5]+a*n[8],t},e.transformQuat=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*o,f=c*o+u*r-i*a,d=c*a+i*o-s*r,h=-i*r-s*o-u*a;return t[0]=l*c+h*-i+f*-u-d*-s,t[1]=f*c+h*-s+d*-i-l*-u,t[2]=d*c+h*-u+l*-s-f*-i,t},e.rotateX=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.angle=function(t,e){var n=i(t[0],t[1],t[2]),r=i(e[0],e[1],e[2]);h(n,n),h(r,r);var o=v(n,r);return o>1?0:o<-1?Math.PI:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=e[0],s=e[1],u=e[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var r=n(0);function o(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function i(t,e,n){var o=new r.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=n,o}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(n*n+r*r+o*o)}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function d(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){var n=e[0],r=e[1],o=e[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function v(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}var p=s;e.sub=p;var m=u;e.mul=m;var b=c;e.div=b;var _=l;e.dist=_;var g=f;e.sqrDist=g;var y=a;e.len=y;var M=d;e.sqrLen=M;var x,E=(x=o(),function(t,e,n,r,o,a){var i=void 0,s=void 0;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)x[0]=t[i],x[1]=t[i+1],x[2]=t[i+2],o(x,x,a),t[i]=x[0],t[i+1]=x[1],t[i+2]=x[2];return t});e.forEach=E},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=o,e.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=o,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=i,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=c,e.squaredDistance=l,e.length=f,e.squaredLength=d,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t[3]=s+r*(n[3]-s),t},e.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,t[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,t[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,t[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,t},e.transformQuat=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*o,f=c*o+u*r-i*a,d=c*a+i*o-s*r,h=-i*r-s*o-u*a;return t[0]=l*c+h*-i+f*-u-d*-s,t[1]=f*c+h*-s+d*-i-l*-u,t[2]=d*c+h*-u+l*-s-f*-i,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))};var r=n(0);function o(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function i(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.sqrt(n*n+r*r+o*o+a*a)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+o*o+a*a}function f(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.sqrt(e*e+n*n+r*r+o*o)}function d(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function h(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=o*i,t[3]=a*i),t}var v=a;e.sub=v;var p=i;e.mul=p;var m=s;e.div=m;var b=c;e.dist=b;var _=l;e.sqrDist=_;var g=f;e.len=g;var y=d;e.sqrLen=y;var M,x=(M=o(),function(t,e,n,r,o,a){var i=void 0,s=void 0;for(e||(e=4),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)M[0]=t[i],M[1]=t[i+1],M[2]=t[i+2],M[3]=t[i+3],o(M,M,a),t[i]=M[0],t[i+1]=M[1],t[i+2]=M[2],t[i+3]=M[3];return t});e.forEach=x},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.TorusKnot=e.Torus=e.Sphere=e.Box=e.Plane=e.Icosahedron=e.Dodecahedron=e.Octahedron=e.Hexahedron=e.Tetrahedron=e.utils=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=v(n(13)),a=v(n(14)),i=v(n(15)),s=v(n(16)),u=v(n(17)),c=v(n(18)),l=v(n(19)),f=v(n(20)),d=v(n(21)),h=v(n(22));function v(t){return t&&t.__esModule?t:{default:t}}e.utils=r,e.Tetrahedron=o.default,e.Hexahedron=a.default,e.Octahedron=i.default,e.Dodecahedron=s.default,e.Icosahedron=u.default,e.Plane=c.default,e.Box=l.default,e.Sphere=f.default,e.Torus=d.default,e.TorusKnot=h.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=o,a},e.set=function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*a-o*r;if(!i)return null;return i=1/i,t[0]=a*i,t[1]=-r*i,t[2]=-o*i,t[3]=n*i,t},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=o,e.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=r*-s+a*u,t[3]=o*-s+i*u,t},e.scale=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=a*u,t[3]=i*u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var r=n(0);function o(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=r*c+a*l,t[3]=o*c+i*l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}var i=o;e.mul=i;var s=a;e.sub=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,o,a,i){var s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=o,s[4]=a,s[5]=i,s},e.set=function(t,e,n,r,o,a,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=n*a-r*o;if(!u)return null;return u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-a*i)*u,t[5]=(r*i-n*s)*u,t},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=o,e.rotate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*c,t[1]=o*l+i*c,t[2]=r*-c+a*l,t[3]=o*-c+i*l,t[4]=s,t[5]=u,t},e.scale=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=o*c,t[2]=a*l,t[3]=i*l,t[4]=s,t[5]=u,t},e.translate=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=r*c+a*l+s,t[5]=o*c+i*l+u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=e[0],l=e[1],f=e[2],d=e[3],h=e[4],v=e[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-h)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))};var r=n(0);function o(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],d=n[3],h=n[4],v=n[5];return t[0]=r*c+a*l,t[1]=o*c+i*l,t[2]=r*f+a*d,t[3]=o*f+i*d,t[4]=r*h+a*v+s,t[5]=o*h+i*v+u,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}var i=o;e.mul=i;var s=a;e.sub=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,o,a,i,s,u,c,l,f,d,h,v,p,m){var b=new r.ARRAY_TYPE(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=o,b[4]=a,b[5]=i,b[6]=s,b[7]=u,b[8]=c,b[9]=l,b[10]=f,b[11]=d,b[12]=h,b[13]=v,b[14]=p,b[15]=m,b},e.set=function(t,e,n,r,o,a,i,s,u,c,l,f,d,h,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=v,t[14]=p,t[15]=m,t},e.identity=o,e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],a=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*s-r*i,g=n*u-o*i,y=n*c-a*i,M=r*u-o*s,x=r*c-a*s,E=o*c-a*u,w=l*p-f*v,O=l*m-d*v,A=l*b-h*v,P=f*m-d*p,T=f*b-h*p,S=d*b-h*m,C=_*S-g*T+y*P+M*A-x*O+E*w;if(!C)return null;return C=1/C,t[0]=(s*S-u*T+c*P)*C,t[1]=(o*T-r*S-a*P)*C,t[2]=(p*E-m*x+b*M)*C,t[3]=(d*x-f*E-h*M)*C,t[4]=(u*A-i*S-c*O)*C,t[5]=(n*S-o*A+a*O)*C,t[6]=(m*y-v*E-b*g)*C,t[7]=(l*E-d*y+h*g)*C,t[8]=(i*T-s*A+c*w)*C,t[9]=(r*A-n*T-a*w)*C,t[10]=(v*x-p*y+b*_)*C,t[11]=(f*y-l*x-h*_)*C,t[12]=(s*O-i*P-u*w)*C,t[13]=(n*P-r*O+o*w)*C,t[14]=(p*g-v*M-m*_)*C,t[15]=(l*M-f*g+d*_)*C,t},e.adjoint=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],b=e[15];return t[0]=s*(d*b-h*m)-f*(u*b-c*m)+p*(u*h-c*d),t[1]=-(r*(d*b-h*m)-f*(o*b-a*m)+p*(o*h-a*d)),t[2]=r*(u*b-c*m)-s*(o*b-a*m)+p*(o*c-a*u),t[3]=-(r*(u*h-c*d)-s*(o*h-a*d)+f*(o*c-a*u)),t[4]=-(i*(d*b-h*m)-l*(u*b-c*m)+v*(u*h-c*d)),t[5]=n*(d*b-h*m)-l*(o*b-a*m)+v*(o*h-a*d),t[6]=-(n*(u*b-c*m)-i*(o*b-a*m)+v*(o*c-a*u)),t[7]=n*(u*h-c*d)-i*(o*h-a*d)+l*(o*c-a*u),t[8]=i*(f*b-h*p)-l*(s*b-c*p)+v*(s*h-c*f),t[9]=-(n*(f*b-h*p)-l*(r*b-a*p)+v*(r*h-a*f)),t[10]=n*(s*b-c*p)-i*(r*b-a*p)+v*(r*c-a*s),t[11]=-(n*(s*h-c*f)-i*(r*h-a*f)+l*(r*c-a*s)),t[12]=-(i*(f*m-d*p)-l*(s*m-u*p)+v*(s*d-u*f)),t[13]=n*(f*m-d*p)-l*(r*m-o*p)+v*(r*d-o*f),t[14]=-(n*(s*m-u*p)-i*(r*m-o*p)+v*(r*u-o*s)),t[15]=n*(s*d-u*f)-i*(r*d-o*f)+l*(r*u-o*s),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],h=t[12],v=t[13],p=t[14],m=t[15];return(e*i-n*a)*(f*m-d*p)-(e*s-r*a)*(l*m-d*v)+(e*u-o*a)*(l*p-f*v)+(n*s-r*i)*(c*m-d*h)-(n*u-o*i)*(c*p-f*h)+(r*u-o*s)*(c*v-l*h)},e.multiply=a,e.translate=function(t,e,n){var r=n[0],o=n[1],a=n[2],i=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=void 0,b=void 0;e===t?(t[12]=e[0]*r+e[4]*o+e[8]*a+e[12],t[13]=e[1]*r+e[5]*o+e[9]*a+e[13],t[14]=e[2]*r+e[6]*o+e[10]*a+e[14],t[15]=e[3]*r+e[7]*o+e[11]*a+e[15]):(i=e[0],s=e[1],u=e[2],c=e[3],l=e[4],f=e[5],d=e[6],h=e[7],v=e[8],p=e[9],m=e[10],b=e[11],t[0]=i,t[1]=s,t[2]=u,t[3]=c,t[4]=l,t[5]=f,t[6]=d,t[7]=h,t[8]=v,t[9]=p,t[10]=m,t[11]=b,t[12]=i*r+l*o+v*a+e[12],t[13]=s*r+f*o+p*a+e[13],t[14]=u*r+d*o+m*a+e[14],t[15]=c*r+h*o+b*a+e[15]);return t},e.scale=function(t,e,n){var r=n[0],o=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,o){var a=o[0],i=o[1],s=o[2],u=Math.sqrt(a*a+i*i+s*s),c=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=void 0,b=void 0,_=void 0,g=void 0,y=void 0,M=void 0,x=void 0,E=void 0,w=void 0,O=void 0,A=void 0,P=void 0,T=void 0,S=void 0,C=void 0,R=void 0,N=void 0;if(Math.abs(u)<r.EPSILON)return null;a*=u=1/u,i*=u,s*=u,c=Math.sin(n),l=Math.cos(n),f=1-l,d=e[0],h=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],g=e[7],y=e[8],M=e[9],x=e[10],E=e[11],w=a*a*f+l,O=i*a*f+s*c,A=s*a*f-i*c,P=a*i*f-s*c,T=i*i*f+l,S=s*i*f+a*c,C=a*s*f+i*c,R=i*s*f-a*c,N=s*s*f+l,t[0]=d*w+m*O+y*A,t[1]=h*w+b*O+M*A,t[2]=v*w+_*O+x*A,t[3]=p*w+g*O+E*A,t[4]=d*P+m*T+y*S,t[5]=h*P+b*T+M*S,t[6]=v*P+_*T+x*S,t[7]=p*P+g*T+E*S,t[8]=d*C+m*R+y*N,t[9]=h*C+b*R+M*N,t[10]=v*C+_*R+x*N,t[11]=p*C+g*R+E*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t},e.rotateX=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[4],i=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=a*o+c*r,t[5]=i*o+l*r,t[6]=s*o+f*r,t[7]=u*o+d*r,t[8]=c*o-a*r,t[9]=l*o-i*r,t[10]=f*o-s*r,t[11]=d*o-u*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],d=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o-c*r,t[1]=i*o-l*r,t[2]=s*o-f*r,t[3]=u*o-d*r,t[8]=a*r+c*o,t[9]=i*r+l*o,t[10]=s*r+f*o,t[11]=u*r+d*o,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],d=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=a*o+c*r,t[1]=i*o+l*r,t[2]=s*o+f*r,t[3]=u*o+d*r,t[4]=c*o-a*r,t[5]=l*o-i*r,t[6]=f*o-s*r,t[7]=d*o-u*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var o=n[0],a=n[1],i=n[2],s=Math.sqrt(o*o+a*a+i*i),u=void 0,c=void 0,l=void 0;if(Math.abs(s)<r.EPSILON)return null;return o*=s=1/s,a*=s,i*=s,u=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=o*o*l+c,t[1]=a*o*l+i*u,t[2]=i*o*l-a*u,t[3]=0,t[4]=o*a*l-i*u,t[5]=a*a*l+c,t[6]=i*a*l+o*u,t[7]=0,t[8]=o*i*l+a*u,t[9]=a*i*l-o*u,t[10]=i*i*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=r+r,u=o+o,c=a+a,l=r*s,f=r*u,d=r*c,h=o*u,v=o*c,p=a*c,m=i*s,b=i*u,_=i*c;return t[0]=1-(h+p),t[1]=f+_,t[2]=d-b,t[3]=0,t[4]=f-_,t[5]=1-(l+p),t[6]=v+m,t[7]=0,t[8]=d+b,t[9]=v-m,t[10]=1-(l+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[4],i=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+o*o),t[1]=Math.sqrt(a*a+i*i+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r);return t},e.fromRotationTranslationScale=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3],u=o+o,c=a+a,l=i+i,f=o*u,d=o*c,h=o*l,v=a*c,p=a*l,m=i*l,b=s*u,_=s*c,g=s*l,y=r[0],M=r[1],x=r[2];return t[0]=(1-(v+m))*y,t[1]=(d+g)*y,t[2]=(h-_)*y,t[3]=0,t[4]=(d-g)*M,t[5]=(1-(f+m))*M,t[6]=(p+b)*M,t[7]=0,t[8]=(h+_)*x,t[9]=(p-b)*x,t[10]=(1-(f+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,o){var a=e[0],i=e[1],s=e[2],u=e[3],c=a+a,l=i+i,f=s+s,d=a*c,h=a*l,v=a*f,p=i*l,m=i*f,b=s*f,_=u*c,g=u*l,y=u*f,M=r[0],x=r[1],E=r[2],w=o[0],O=o[1],A=o[2];return t[0]=(1-(p+b))*M,t[1]=(h+y)*M,t[2]=(v-g)*M,t[3]=0,t[4]=(h-y)*x,t[5]=(1-(d+b))*x,t[6]=(m+_)*x,t[7]=0,t[8]=(v+g)*E,t[9]=(m-_)*E,t[10]=(1-(d+p))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*O+t[8]*A),t[13]=n[1]+O-(t[1]*w+t[5]*O+t[9]*A),t[14]=n[2]+A-(t[2]*w+t[6]*O+t[10]*A),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,d=o*i,h=o*s,v=o*u,p=a*i,m=a*s,b=a*u;return t[0]=1-f-v,t[1]=l+b,t[2]=d-m,t[3]=0,t[4]=l-b,t[5]=1-c-v,t[6]=h+p,t[7]=0,t[8]=d+m,t[9]=h-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,o,a,i){var s=1/(n-e),u=1/(o-r),c=1/(a-i);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,o){var a=1/Math.tan(e/2),i=1/(r-o);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(o+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*o*r*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(o+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(o-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,o,a,i){var s=1/(e-n),u=1/(r-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(i+a)*c,t[15]=1,t},e.lookAt=function(t,e,n,a){var i=void 0,s=void 0,u=void 0,c=void 0,l=void 0,f=void 0,d=void 0,h=void 0,v=void 0,p=void 0,m=e[0],b=e[1],_=e[2],g=a[0],y=a[1],M=a[2],x=n[0],E=n[1],w=n[2];if(Math.abs(m-x)<r.EPSILON&&Math.abs(b-E)<r.EPSILON&&Math.abs(_-w)<r.EPSILON)return o(t);d=m-x,h=b-E,v=_-w,p=1/Math.sqrt(d*d+h*h+v*v),i=y*(v*=p)-M*(h*=p),s=M*(d*=p)-g*v,u=g*h-y*d,(p=Math.sqrt(i*i+s*s+u*u))?(i*=p=1/p,s*=p,u*=p):(i=0,s=0,u=0);c=h*u-v*s,l=v*i-d*u,f=d*s-h*i,(p=Math.sqrt(c*c+l*l+f*f))?(c*=p=1/p,l*=p,f*=p):(c=0,l=0,f=0);return t[0]=i,t[1]=c,t[2]=d,t[3]=0,t[4]=s,t[5]=l,t[6]=h,t[7]=0,t[8]=u,t[9]=f,t[10]=v,t[11]=0,t[12]=-(i*m+s*b+u*_),t[13]=-(c*m+l*b+f*_),t[14]=-(d*m+h*b+v*_),t[15]=1,t},e.targetTo=function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=r[0],u=r[1],c=r[2],l=o-n[0],f=a-n[1],d=i-n[2],h=l*l+f*f+d*d;h>0&&(h=1/Math.sqrt(h),l*=h,f*=h,d*=h);var v=u*d-c*f,p=c*l-s*d,m=s*f-u*l;return t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=f*m-d*p,t[5]=d*v-l*m,t[6]=l*p-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=t[9],h=t[10],v=t[11],p=t[12],m=t[13],b=t[14],_=t[15],g=e[0],y=e[1],M=e[2],x=e[3],E=e[4],w=e[5],O=e[6],A=e[7],P=e[8],T=e[9],S=e[10],C=e[11],R=e[12],N=e[13],I=e[14],L=e[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-y)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-E)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-w)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-O)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-A)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(f-P)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(d-T)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(h-S)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(v-C)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(p-R)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-N)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(b-I)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(_-L)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(L))};var r=n(0);function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],h=e[10],v=e[11],p=e[12],m=e[13],b=e[14],_=e[15],g=n[0],y=n[1],M=n[2],x=n[3];return t[0]=g*r+y*s+M*f+x*p,t[1]=g*o+y*u+M*d+x*m,t[2]=g*a+y*c+M*h+x*b,t[3]=g*i+y*l+M*v+x*_,g=n[4],y=n[5],M=n[6],x=n[7],t[4]=g*r+y*s+M*f+x*p,t[5]=g*o+y*u+M*d+x*m,t[6]=g*a+y*c+M*h+x*b,t[7]=g*i+y*l+M*v+x*_,g=n[8],y=n[9],M=n[10],x=n[11],t[8]=g*r+y*s+M*f+x*p,t[9]=g*o+y*u+M*d+x*m,t[10]=g*a+y*c+M*h+x*b,t[11]=g*i+y*l+M*v+x*_,g=n[12],y=n[13],M=n[14],x=n[15],t[12]=g*r+y*s+M*f+x*p,t[13]=g*o+y*u+M*d+x*m,t[14]=g*a+y*c+M*h+x*b,t[15]=g*i+y*l+M*v+x*_,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var s=a;e.mul=s;var u=i;e.sub=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=s,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=u,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0);return n},e.multiply=c,e.rotateX=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=a*u-o*s,t[3]=i*u-r*s,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=o*u+i*s,t[2]=a*u+r*s,t[3]=i*u-o*s,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=a*u+i*s,t[3]=i*u-a*s,t},e.calculateW=function(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},e.slerp=l,e.invert=function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a,s=i?1/i:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=a*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=f,e.fromEuler=function(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var a=Math.sin(e),i=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=a*u*l-i*s*c,t[1]=i*s*l+a*u*c,t[2]=i*u*c-a*s*l,t[3]=i*u*l+a*s*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var r=n(0),o=n(4),a=n(5),i=n(6);function s(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function u(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function c(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,t}function l(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3],u=n[0],c=n[1],l=n[2],f=n[3],d=void 0,h=void 0,v=void 0,p=void 0,m=void 0;return(h=o*u+a*c+i*l+s*f)<0&&(h=-h,u=-u,c=-c,l=-l,f=-f),1-h>1e-6?(d=Math.acos(h),v=Math.sin(d),p=Math.sin((1-r)*d)/v,m=Math.sin(r*d)/v):(p=1-r,m=r),t[0]=p*o+m*u,t[1]=p*a+m*c,t[2]=p*i+m*l,t[3]=p*s+m*f,t}function f(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(e[3*a+i]-e[3*i+a])*r,t[a]=(e[3*a+o]+e[3*o+a])*r,t[i]=(e[3*i+o]+e[3*o+i])*r}return t}var d=i.clone;e.clone=d;var h=i.fromValues;e.fromValues=h;var v=i.copy;e.copy=v;var p=i.set;e.set=p;var m=i.add;e.add=m;var b=c;e.mul=b;var _=i.scale;e.scale=_;var g=i.dot;e.dot=g;var y=i.lerp;e.lerp=y;var M=i.length;e.length=M;var x=M;e.len=x;var E=i.squaredLength;e.squaredLength=E;var w=E;e.sqrLen=w;var O=i.normalize;e.normalize=O;var A=i.exactEquals;e.exactEquals=A;var P=i.equals;e.equals=P;var T,S,C,R=(T=a.create(),S=a.fromValues(1,0,0),C=a.fromValues(0,1,0),function(t,e,n){var r=a.dot(e,n);return r<-.999999?(a.cross(T,S,e),a.len(T)<1e-6&&a.cross(T,C,e),a.normalize(T,T),u(t,T,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(a.cross(T,e,n),t[0]=T[0],t[1]=T[1],t[2]=T[2],t[3]=1+r,O(t,t))});e.rotationTo=R;var N,I,L=(N=s(),I=s(),function(t,e,n,r,o,a){return l(N,e,o,a),l(I,n,r,a),l(t,N,I,2*a*(1-a)),t});e.sqlerp=L;var k,j=(k=o.create(),function(t,e,n,r){return k[0]=n[0],k[3]=n[1],k[6]=n[2],k[1]=r[0],k[4]=r[1],k[7]=r[2],k[2]=-e[0],k[5]=-e[1],k[8]=-e[2],O(t,f(t,k))});e.setAxes=j},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.create=o,e.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=i,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=c,e.length=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var o=e[0],a=e[1];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},e.transformMat2d=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],o=t[1],a=e[0],i=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-i)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))};var r=n(0);function o(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function i(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function l(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function f(t){var e=t[0],n=t[1];return e*e+n*n}var d=l;e.len=d;var h=a;e.sub=h;var v=i;e.mul=v;var p=s;e.div=p;var m=u;e.dist=m;var b=c;e.sqrDist=b;var _=f;e.sqrLen=_;var g,y=(g=o(),function(t,e,n,r,o,a){var i=void 0,s=void 0;for(e||(e=2),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)g[0]=t[i],g[1]=t[i+1],o(g,g,a),t[i]=g[0],t[i+1]=g[1];return t});e.forEach=y},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),a=(r=o)&&r.__esModule?r:{default:r};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}var u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,n));return s(r,r.geometry)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),a=(r=o)&&r.__esModule?r:{default:r};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}var u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],o=0;o<r.length;o+=3)r[o+0]*=t,r[o+1]*=t,r[o+2]*=t;var a=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r,[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],t,n));return s(a,a.geometry)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),a=(r=o)&&r.__esModule?r:{default:r};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}var u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,n));return s(r,r.geometry)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),a=(r=o)&&r.__esModule?r:{default:r};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}var u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(1+Math.sqrt(5))/2,o=1/r,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-r,0,-o,r,0,o,-r,0,o,r,-o,-r,0,-o,r,0,o,-r,0,o,r,0,-r,0,-o,r,0,-o,-r,0,o,r,0,o],i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,n));return s(i,i.geometry)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(1),a=(r=o)&&r.__esModule?r:{default:r};function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":i(e))&&"function"!=typeof e?t:e}var u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=.5+Math.sqrt(5)/2,o=[-1,+r,0,1,+r,0,-1,-r,0,1,-r,0,0,-1,+r,0,1,+r,0,-1,-r,0,1,-r,+r,0,-1,+r,0,1,-r,0,-1,-r,0,1],a=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,n));return s(a,a.geometry)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"XY";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=[],s=[],u=[],c=[],l=0,f=2*e,d=2*n,h=f/r,v=d/o,p=.5*-f,m=.5*-d,b=1/r,_=1/o,g=0;g<o;g++)for(var y=0;y<r;y++){var M=h*y+p,x=v*g+m,E=y/r,w=g/o;switch(a){case"XZ":i=(i=(i=(i=i.concat([M,0,x])).concat([M+h,0,x])).concat([M+h,0,x+v])).concat([M,0,x+v]),u=(u=(u=(u=u.concat([0,1,0])).concat([0,1,0])).concat([0,1,0])).concat([0,1,0]),c=(c=(c=(c=c.concat([E,1-w])).concat([E+b,1-w])).concat([E+b,1-(w+_)])).concat([E,1-(w+_)]);break;case"YZ":i=(i=(i=(i=i.concat([0,x,M])).concat([0,x,M+h])).concat([0,x+v,M+h])).concat([0,x+v,M]),u=(u=(u=(u=u.concat([1,0,0])).concat([1,0,0])).concat([1,0,0])).concat([1,0,0]),c=(c=(c=(c=c.concat([1-E,w])).concat([1-(E+b),w])).concat([1-(E+b),w+_])).concat([1-E,w+_]);break;default:i=(i=(i=(i=i.concat([M,x,0])).concat([M+h,x,0])).concat([M+h,x+v,0])).concat([M,x+v,0]),u=(u=(u=(u=u.concat([0,0,1])).concat([0,0,1])).concat([0,0,1])).concat([0,0,1]),c=(c=(c=(c=c.concat([E,w])).concat([E+b,w])).concat([E+b,w+_])).concat([E,w+_])}s.push(4*l+0),s.push(4*l+1),s.push(4*l+2),s.push(4*l+0),s.push(4*l+2),s.push(4*l+3),l++}return{positions:i,indices:s,normals:u,uvs:c}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],a=0;a<o.length;a+=3)o[a+0]*=e,o[a+1]*=n,o[a+2]*=r;return{positions:o,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*-Math.PI,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Math.PI,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=[],f=[],d=[],h=[],v=r.vec3.create(),p=r.vec3.create(),m=u+c,b=0,_=[],g=0;g<=a;g++){for(var y=[],M=g/a,x=0;x<=n;x++){var E=x/n;v[0]=-e*Math.cos(i+E*s)*Math.sin(u+M*c),v[1]=e*Math.cos(u+M*c),v[2]=e*Math.sin(i+E*s)*Math.sin(u+M*c),l.push.apply(l,o(v)),r.vec3.normalize(p,v),d.push.apply(d,o(p)),h.push(E,1-M),y.push(b++)}_.push(y)}for(var w=0;w<a;w++)for(var O=0;O<n;O++){var A=_[w][O+1],P=_[w][O],T=_[w+1][O],S=_[w+1][O+1];(0!==w||u>0)&&f.push(A,P,S),(w!==a-1||m<Math.PI)&&f.push(P,T,S)}return{positions:l,indices:f,normals:d,uvs:h}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.375,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=[],c=[],l=[],f=[],d=r.vec3.create(),h=r.vec3.create(),v=r.vec3.create(),p=0;p<=i;p++)for(var m=0;m<=a;m++){var b=m/a*s,_=p/i*Math.PI*2;h[0]=(e+n*Math.cos(_))*Math.cos(b),h[1]=(e+n*Math.cos(_))*Math.sin(b),h[2]=n*Math.sin(_),u.push.apply(u,o(h)),d[0]=e*Math.cos(b),d[1]=e*Math.sin(b),r.vec3.subtract(v,h,d),r.vec3.normalize(v,v),l.push.apply(l,o(v)),f.push(m/a),f.push(p/i)}for(var g=1;g<=i;g++)for(var y=1;y<=a;y++){var M=(a+1)*g+(y-1),x=(a+1)*(g-1)+(y-1),E=(a+1)*(g-1)+y,w=(a+1)*g+y;c.push(M,x,w),c.push(x,E,w)}return{positions:u,indices:c,normals:l,uvs:f}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.375,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=[],l=[],f=[],d=[],h=o.vec3.create(),v=o.vec3.create(),p=o.vec3.create(),m=o.vec3.create(),b=o.vec3.create(),_=o.vec3.create(),g=o.vec3.create(),y=0;y<=r;y++){var M=y/r*s*Math.PI*2;this.calculatePositionOnCurve(M,s,u,e,p),this.calculatePositionOnCurve(M+.01,s,u,e,m),o.vec3.subtract(_,m,p),o.vec3.add(g,m,p),o.vec3.cross(b,_,g),o.vec3.cross(g,b,_),o.vec3.normalize(b,b),o.vec3.normalize(g,g);for(var x=0;x<=i;x++){var E=x/i*Math.PI*2,w=-n*Math.cos(E),O=n*Math.sin(E);h[0]=p[0]+(w*g[0]+O*b[0]),h[1]=p[1]+(w*g[1]+O*b[1]),h[2]=p[2]+(w*g[2]+O*b[2]),c.push.apply(c,a(h)),o.vec3.subtract(v,h,p),o.vec3.normalize(v,v),f.push.apply(f,a(v)),d.push(y/r,x/i)}}for(var A=1;A<=r;A++)for(var P=1;P<=i;P++){var T=(i+1)*(A-1)+(P-1),S=(i+1)*A+(P-1),C=(i+1)*A+P,R=(i+1)*(A-1)+P;l.push(T,S,R),l.push(S,C,R)}return{positions:c,indices:l,normals:f,uvs:d}}return r(t,[{key:"calculatePositionOnCurve",value:function(t,e,n,r,o){var a=Math.cos(t),i=Math.sin(t),s=n/e*t,u=Math.cos(s);o[0]=r*(2+u)*.5*a,o[1]=r*(2+u)*i*.5,o[2]=r*Math.sin(s)*.5}}]),t}();e.default=i}])},"object"===i(e)&&"object"===i(t)?t.exports=a():(r=[],void 0===(o="function"==typeof(n=a)?n.apply(e,r):n)||(t.exports=o))}).call(e,n(1)(t))},function(t,e,n){t.exports=n(8),t.exports.color=n(9)},function(t,e){var n,r,o,a,i,s=t.exports=s||{};s.gui=s.gui||{},s.utils=s.utils||{},s.controllers=s.controllers||{},s.dom=s.dom||{},s.color=s.color||{},s.utils.css={load:function(t,e){var n=(e=e||document).createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}},s.utils.common=(n=Array.prototype.forEach,r=Array.prototype.slice,{BREAK:{},extend:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,r){if(n&&t.forEach===n)t.forEach(e,r);else if(t.length===t.length+0){for(var o=0,a=t.length;o<a;o++)if(o in t&&e.call(r,t[o],o)===this.BREAK)return}else for(var o in t)if(e.call(r,t[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}),s.controllers.Controller=(o=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0},s.utils.common.extend(o.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),o),s.dom.dom=function(t){var e={};t.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(n,r){t.each(n,function(t){e[t]=r})});var n=/(\d+(\.\d+)?)px/;function r(e){if("0"===e||t.isUndefined(e))return 0;var r=e.match(n);return t.isNull(r)?0:parseFloat(r[1])}var o={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,r){t.isUndefined(n)&&(n=!0),t.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(n,r,o,a){o=o||{};var i=e[r];if(!i)throw new Error("Event type "+r+" not supported.");var s=document.createEvent(i);switch(i){case"MouseEvents":var u=o.x||o.clientX||0,c=o.y||o.clientY||0;s.initMouseEvent(r,o.bubbles||!1,o.cancelable||!0,window,o.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=s.initKeyboardEvent||s.initKeyEvent;t.defaults(o,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(r,o.bubbles||!1,o.cancelable,window,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,o.keyCode,o.charCode);break;default:s.initEvent(r,o.bubbles||!1,o.cancelable||!0)}t.defaults(s,a),n.dispatchEvent(s)},bind:function(t,e,n,r){return r=r||!1,t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),o},unbind:function(t,e,n,r){return r=r||!1,t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),o},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1==n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return o},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!=r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return o},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var e=getComputedStyle(t);return r(e["border-left-width"])+r(e["border-right-width"])+r(e["padding-left"])+r(e["padding-right"])+r(e.width)},getHeight:function(t){var e=getComputedStyle(t);return r(e["border-top-width"])+r(e["border-bottom-width"])+r(e["padding-top"])+r(e["padding-bottom"])+r(e.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do{e.left+=t.offsetLeft,e.top+=t.offsetTop}while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return o}(s.utils.common),s.controllers.OptionController=function(t,e,n){var r=function(t,o,a){r.superclass.call(this,t,o);var i=this;if(this.__select=document.createElement("select"),n.isArray(a)){var s={};n.each(a,function(t){s[t]=t}),a=s}n.each(a,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),i.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;i.setValue(t)}),this.domElement.appendChild(this.__select)};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.controllers.NumberController=function(t,e){var n=function(t,r,o){var a;n.superclass.call(this,t,r),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=(a=(a=this.__impliedStep).toString()).indexOf(".")>-1?a.length-a.indexOf(".")-1:0};return n.superclass=t,e.extend(n.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),n}(s.controllers.Controller,s.utils.common),s.controllers.NumberControllerBox=function(t,e,n){var r=function(t,o,a){this.__truncationSuspended=!1,r.superclass.call(this,t,o,a);var i,s=this;function u(){var t=parseFloat(s.__input.value);n.isNaN(t)||s.setValue(t)}function c(t){var e=i-t.clientY;s.setValue(s.getValue()+e*s.__impliedStep),i=t.clientY}function l(){e.unbind(window,"mousemove",c),e.unbind(window,"mouseup",l)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",u),e.bind(this.__input,"blur",function(){u(),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}),e.bind(this.__input,"mousedown",function(t){e.bind(window,"mousemove",c),e.bind(window,"mouseup",l),i=t.clientY}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){var t,e,n;return this.__input.value=this.__truncationSuspended?this.getValue():(t=this.getValue(),e=this.__precision,n=Math.pow(10,e),Math.round(t*n)/n),r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.NumberController,s.dom.dom,s.utils.common),s.controllers.NumberControllerSlider=function(t,e,n,r,o){var a=function(t,n,r,o,i){a.superclass.call(this,t,n,{min:r,max:o,step:i});var s=this;function u(t){t.preventDefault();var n,r,o,a,i,u=e.getOffset(s.__background),c=e.getWidth(s.__background);return s.setValue((n=t.clientX,r=u.left,o=u.left+c,a=s.__min,i=s.__max,a+(n-r)/(o-r)*(i-a))),!1}function c(){e.unbind(window,"mousemove",u),e.unbind(window,"mouseup",c),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",function(t){e.bind(window,"mousemove",u),e.bind(window,"mouseup",c),u(t)}),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=t,a.useDefaultStyles=function(){n.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},r.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",a.superclass.prototype.updateDisplay.call(this)}}),a}(s.controllers.NumberController,s.dom.dom,s.utils.css,s.utils.common),s.controllers.FunctionController=function(t,e,n){var r=function(t,n,o){r.superclass.call(this,t,n);var a=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===o?"Fire":o,e.bind(this.__button,"click",function(t){return t.preventDefault(),a.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=t,n.extend(r.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.controllers.BooleanController=function(t,e,n){var r=function(t,n){r.superclass.call(this,t,n);var o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",function(){o.setValue(!o.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.color.toString=(a=s.utils.common,function(t){if(1==t.a||a.isUndefined(t.a)){for(var e=t.hex.toString(16);e.length<6;)e="0"+e;return"#"+e}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}),s.color.interpret=function(t,e){var n,r,o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(o){if(o.litmus(t))return e.each(o.conversions,function(o,a){if(n=o.read(t),!1===r&&!1!==n)return r=n,n.conversionName=a,n.conversion=o,e.BREAK}),e.BREAK}),r}}(s.color.toString,s.utils.common),s.GUI=s.gui.GUI=function(t,e,n,r,o,a,i,s,u,c,l,f,d,h,v){t.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var p,m,b="Default",_=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),g=!0,y=!1,M=[],x=function(t){var e=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),h.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=v.defaults(t,{autoPlace:!0,width:x.DEFAULT_WIDTH}),t=v.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),v.isUndefined(t.load)?t.load={preset:b}:t.preset&&(t.load.preset=t.preset),v.isUndefined(t.parent)&&t.hideable&&M.push(this),t.resizable=v.isUndefined(t.parent)&&t.resizable,t.autoPlace&&v.isUndefined(t.scrollable)&&(t.scrollable=!0);var n=_&&"true"===localStorage.getItem(A(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return e.parent?e.getRoot().preset:t.load.preset},set:function(n){e.parent?e.getRoot().preset=n:t.load.preset=n,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}(this),e.revert()}},width:{get:function(){return t.width},set:function(n){t.width=n,P(e,n)}},name:{get:function(){return t.name},set:function(e){t.name=e,o&&(o.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(n){t.closed=n,t.closed?h.addClass(e.__ul,x.CLASS_CLOSED):h.removeClass(e.__ul,x.CLASS_CLOSED),this.onResize(),e.__closeButton&&(e.__closeButton.innerHTML=n?x.TEXT_OPEN:x.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return n},set:function(t){_&&(n=t,t?h.bind(window,"unload",i):h.unbind(window,"unload",i),localStorage.setItem(A(e,"isLocal"),t))}}}),v.isUndefined(t.parent)){if(t.closed=!1,h.addClass(this.domElement,x.CLASS_MAIN),h.makeSelectable(this.domElement,!1),_&&n){e.useLocalStorage=!0;var r=localStorage.getItem(A(this,"gui"));r&&(t.load=JSON.parse(r))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=x.TEXT_CLOSED,h.addClass(this.__closeButton,x.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),h.bind(this.__closeButton,"click",function(){e.closed=!e.closed})}else{void 0===t.closed&&(t.closed=!0);var o=document.createTextNode(t.name);h.addClass(o,"controller-name");var a=w(e,o);h.addClass(this.__ul,x.CLASS_CLOSED),h.addClass(a,"title"),h.bind(a,"click",function(t){return t.preventDefault(),e.closed=!e.closed,!1}),t.closed||(this.closed=!1)}function i(){localStorage.setItem(A(e,"gui"),JSON.stringify(e.getSaveObject()))}t.autoPlace&&(v.isUndefined(t.parent)&&(g&&(m=document.createElement("div"),h.addClass(m,"dg"),h.addClass(m,x.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(m),g=!1),m.appendChild(this.domElement),h.addClass(this.domElement,x.CLASS_AUTO_PLACE)),this.parent||P(e,t.width)),h.bind(window,"resize",function(){e.onResize()}),h.bind(this.__ul,"webkitTransitionEnd",function(){e.onResize()}),h.bind(this.__ul,"transitionend",function(){e.onResize()}),h.bind(this.__ul,"oTransitionEnd",function(){e.onResize()}),this.onResize(),t.resizable&&function(t){var e;function n(n){return n.preventDefault(),e=n.clientX,h.addClass(t.__closeButton,x.CLASS_DRAG),h.bind(window,"mousemove",r),h.bind(window,"mouseup",o),!1}function r(n){return n.preventDefault(),t.width+=e-n.clientX,t.onResize(),e=n.clientX,!1}function o(){h.removeClass(t.__closeButton,x.CLASS_DRAG),h.unbind(window,"mousemove",r),h.unbind(window,"mouseup",o)}t.__resize_handle=document.createElement("div"),v.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),h.bind(t.__resize_handle,"mousedown",n),h.bind(t.__closeButton,"mousedown",n),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this);e.getRoot();t.parent||function(){var t=e.getRoot();t.width+=1,v.defer(function(){t.width-=1})}()};function E(t,e,n,c){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var f;if(c.color)f=new l(e,n);else{var d=[e,n].concat(c.factoryArgs);f=r.apply(t,d)}c.before instanceof o&&(c.before=c.before.__li),O(t,f),h.addClass(f.domElement,"c");var p=document.createElement("span");h.addClass(p,"property-name"),p.innerHTML=f.property;var m=document.createElement("div");m.appendChild(p),m.appendChild(f.domElement);var b=w(t,m,c.before);return h.addClass(b,x.CLASS_CONTROLLER_ROW),h.addClass(b,typeof f.getValue()),function(t,e,n){if(n.__li=e,n.__gui=t,v.extend(n,{options:function(e){return arguments.length>1?(n.remove(),E(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[v.toArray(arguments)]})):v.isArray(e)||v.isObject(e)?(n.remove(),E(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var r=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});v.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],o=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),o.apply(r,t)}}),h.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var o=function(e){return v.isNumber(n.__min)&&v.isNumber(n.__max)?(n.remove(),E(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=v.compose(o,n.min),n.max=v.compose(o,n.max)}else n instanceof a?(h.bind(e,"click",function(){h.fakeEvent(n.__checkbox,"click")}),h.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof i?(h.bind(e,"click",function(){h.fakeEvent(n.__button,"click")}),h.bind(e,"mouseover",function(){h.addClass(n.__button,"hover")}),h.bind(e,"mouseout",function(){h.removeClass(n.__button,"hover")})):n instanceof l&&(h.addClass(e,"color"),n.updateDisplay=v.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=v.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&C(t.getRoot(),!0),e},n.setValue)}(t,b,f),t.__controllers.push(f),f}function w(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,params.before):t.__ul.appendChild(r),t.onResize(),r}function O(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!=r){var o=n.__rememberedObjectIndecesToControllers[r];if(void 0===o&&(o={},n.__rememberedObjectIndecesToControllers[r]=o),o[e.property]=e,n.load&&n.load.remembered){var a,i=n.load.remembered;if(i[t.preset])a=i[t.preset];else{if(!i[b])return;a=i[b]}if(a[r]&&void 0!==a[r][e.property]){var s=a[r][e.property];e.initialValue=s,e.setValue(s)}}}}function A(t,e){return document.location.href+"."+e}function P(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function T(t,e){var n={};return v.each(t.__rememberedObjects,function(r,o){var a={},i=t.__rememberedObjectIndecesToControllers[o];v.each(i,function(t,n){a[n]=e?t.initialValue:t.getValue()}),n[o]=a}),n}function S(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function C(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}return x.toggleHide=function(){y=!y,v.each(M,function(t){t.domElement.style.zIndex=y?-999:999,t.domElement.style.opacity=y?0:1})},x.CLASS_AUTO_PLACE="a",x.CLASS_AUTO_PLACE_CONTAINER="ac",x.CLASS_MAIN="main",x.CLASS_CONTROLLER_ROW="cr",x.CLASS_TOO_TALL="taller-than-window",x.CLASS_CLOSED="closed",x.CLASS_CLOSE_BUTTON="close-button",x.CLASS_DRAG="drag",x.DEFAULT_WIDTH=245,x.TEXT_CLOSED="Close Controls",x.TEXT_OPEN="Open Controls",h.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||x.toggleHide()},!1),v.extend(x.prototype,{add:function(t,e){return E(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return E(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;v.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&m.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new x(e);this.__folders[t]=n;var r=w(this,n.domElement);return h.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=h.getOffset(t.__ul).top,n=0;v.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=h.getHeight(e))}),window.innerHeight-e-20<n?(h.addClass(t.domElement,x.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(h.removeClass(t.domElement,x.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&v.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(v.isUndefined(p)&&((p=new d).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;v.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&function(t){var e=t.__save_row=document.createElement("li");h.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),h.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",h.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",h.addClass(r,"button"),h.addClass(r,"save");var o=document.createElement("span");o.innerHTML="New",h.addClass(o,"button"),h.addClass(o,"save-as");var a=document.createElement("span");a.innerHTML="Revert",h.addClass(a,"button"),h.addClass(a,"revert");var i=t.__preset_select=document.createElement("select");t.load&&t.load.remembered?v.each(t.load.remembered,function(e,n){S(t,n,n==t.preset)}):S(t,b,!1);if(h.bind(i,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(i),e.appendChild(n),e.appendChild(r),e.appendChild(o),e.appendChild(a),_){var s=document.getElementById("dg-save-locally"),u=document.getElementById("dg-local-explain");s.style.display="block";var c=document.getElementById("dg-local-storage");function l(){u.style.display=t.useLocalStorage?"block":"none"}"true"===localStorage.getItem(A(t,"isLocal"))&&c.setAttribute("checked","checked"),l(),h.bind(c,"change",function(){t.useLocalStorage=!t.useLocalStorage,l()})}var f=document.getElementById("dg-new-constructor");h.bind(f,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||p.hide()}),h.bind(n,"click",function(){f.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),p.show(),f.focus(),f.select()}),h.bind(r,"click",function(){t.save()}),h.bind(o,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),h.bind(a,"click",function(){t.revert()})}(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&P(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=T(this)),t.folders={},v.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=T(this),C(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[b]=T(this,!0)),this.load.remembered[t]=T(this),this.preset=t,S(this,t,!0)},revert:function(t){v.each(this.__controllers,function(e){this.getRoot().load.remembered?O(t||this.getRoot(),e):e.setValue(e.initialValue)},this),v.each(this.__folders,function(t){t.revert(t)}),t||C(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&function t(e){0!=e.length&&f(function(){t(e)});v.each(e,function(t){t.updateDisplay()})}(this.__listening)}}),x}(s.utils.css,0,0,s.controllers.factory=function(t,e,n,r,o,a,i){return function(s,u){var c=s[u];return i.isArray(arguments[2])||i.isObject(arguments[2])?new t(s,u,arguments[2]):i.isNumber(c)?i.isNumber(arguments[2])&&i.isNumber(arguments[3])?new n(s,u,arguments[2],arguments[3]):new e(s,u,{min:arguments[2],max:arguments[3]}):i.isString(c)?new r(s,u):i.isFunction(c)?new o(s,u,""):i.isBoolean(c)?new a(s,u):void 0}}(s.controllers.OptionController,s.controllers.NumberControllerBox,s.controllers.NumberControllerSlider,s.controllers.StringController=function(t,e,n){var r=function(t,n){r.superclass.call(this,t,n);var o=this;function a(){o.setValue(o.__input.value)}this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",a),e.bind(this.__input,"change",a),e.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(s.controllers.Controller,s.dom.dom,s.utils.common),s.controllers.FunctionController,s.controllers.BooleanController,s.utils.common),s.controllers.Controller,s.controllers.BooleanController,s.controllers.FunctionController,s.controllers.NumberControllerBox,s.controllers.NumberControllerSlider,s.controllers.OptionController,s.controllers.ColorController=function(t,e,n,r,o){var a=function(t,i){a.superclass.call(this,t,i),this.__color=new n(this.getValue()),this.__temp=new n(0);var u=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&h.call(this)}),e.bind(this.__input,"blur",h),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(u.__selector,"drag")})});var c,l=document.createElement("div");function f(t){p(t),e.bind(window,"mousemove",p),e.bind(window,"mouseup",d)}function d(){e.unbind(window,"mousemove",p),e.unbind(window,"mouseup",d)}function h(){var t=r(this.value);!1!==t?(u.__color.__state=t,u.setValue(u.__color.toOriginal())):this.value=u.__color.toString()}function v(){e.unbind(window,"mousemove",m),e.unbind(window,"mouseup",v)}function p(t){t.preventDefault();var n=e.getWidth(u.__saturation_field),r=e.getOffset(u.__saturation_field),o=(t.clientX-r.left+document.body.scrollLeft)/n,a=1-(t.clientY-r.top+document.body.scrollTop)/n;return a>1?a=1:a<0&&(a=0),o>1?o=1:o<0&&(o=0),u.__color.v=a,u.__color.s=o,u.setValue(u.__color.toOriginal()),!1}function m(t){t.preventDefault();var n=e.getHeight(u.__hue_field),r=e.getOffset(u.__hue_field),o=1-(t.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),u.__color.h=360*o,u.setValue(u.__color.toOriginal()),!1}o.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),o.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),o.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),o.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),o.extend(l.style,{width:"100%",height:"100%",background:"none"}),s(l,"top","rgba(0,0,0,0)","#000"),o.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(c=this.__hue_field).style.background="",c.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",c.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",f),e.bind(this.__field_knob,"mousedown",f),e.bind(this.__hue_field,"mousedown",function(t){m(t),e.bind(window,"mousemove",m),e.bind(window,"mouseup",v)}),this.__saturation_field.appendChild(l),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=t,o.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=r(this.getValue());if(!1!==t){var e=!1;o.each(n.COMPONENTS,function(n){if(!o.isUndefined(t[n])&&!o.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&o.extend(this.__color.__state,t)}o.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var a=this.__color.v<.5||this.__color.s>.5?255:0,i=255-a;o.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+a+","+a+","+a+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toString()),o.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+a+","+a+","+a+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})}});var i=["-moz-","-o-","-webkit-","-ms-",""];function s(t,e,n,r){t.style.background="",o.each(i,function(o){t.style.cssText+="background: "+o+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}return a}(s.controllers.Controller,s.dom.dom,s.color.Color=function(t,e,n,r){var o=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function a(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function i(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(u(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,o){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function u(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}return o.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(o.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(o.prototype,"r",2),a(o.prototype,"g",1),a(o.prototype,"b",0),i(o.prototype,"h"),i(o.prototype,"s"),i(o.prototype,"v"),Object.defineProperty(o.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(o.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),o}(s.color.interpret,s.color.math={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),a=n*(1-e),i=n*(1-o*e),s=n*(1-(1-o)*e),u=[[n,s,a],[i,n,a],[a,n,s],[a,i,n],[s,a,n],[n,a,i]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,o=Math.min(t,e,n),a=Math.max(t,e,n),i=a-o;return 0==a?{h:NaN,s:0,v:0}:(r=t==a?(e-n)/i:e==a?2+(n-t)/i:4+(t-e)/i,(r/=6)<0&&(r+=1),{h:360*r,s:i/a,v:a/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(i=8*e)|t&~(255<<i)}},s.color.toString,s.utils.common),s.color.interpret,s.utils.common),s.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)},s.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(s.dom.dom,s.utils.common),s.dom.dom,s.utils.common)},function(t,e){var n,r,o,a,i=t.exports=i||{};i.color=i.color||{},i.utils=i.utils||{},i.utils.common=(n=Array.prototype.forEach,r=Array.prototype.slice,{BREAK:{},extend:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(r.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=r.call(arguments);return function(){for(var e=r.call(arguments),n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},each:function(t,e,r){if(n&&t.forEach===n)t.forEach(e,r);else if(t.length===t.length+0){for(var o=0,a=t.length;o<a;o++)if(o in t&&e.call(r,t[o],o)===this.BREAK)return}else for(var o in t)if(e.call(r,t[o],o)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():r.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}),i.color.toString=(o=i.utils.common,function(t){if(1==t.a||o.isUndefined(t.a)){for(var e=t.hex.toString(16);e.length<6;)e="0"+e;return"#"+e}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}),i.Color=i.color.Color=function(t,e,n,r){var o=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};function a(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(s(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(s(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function i(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(u(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,n,o){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,o);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function u(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}return o.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(o.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(o.prototype,"r",2),a(o.prototype,"g",1),a(o.prototype,"b",0),i(o.prototype,"h"),i(o.prototype,"s"),i(o.prototype,"v"),Object.defineProperty(o.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(o.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),o}(i.color.interpret=function(t,e){var n,r,o=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(o,function(o){if(o.litmus(t))return e.each(o.conversions,function(o,a){if(n=o.read(t),!1===r&&!1!==n)return r=n,n.conversionName=a,n.conversion=o,e.BREAK}),e.BREAK}),r}}(i.color.toString,i.utils.common),i.color.math={hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,o=t/60-Math.floor(t/60),a=n*(1-e),i=n*(1-o*e),s=n*(1-(1-o)*e),u=[[n,s,a],[i,n,a],[a,n,s],[a,i,n],[s,a,n],[n,a,i]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(t,e,n){var r,o=Math.min(t,e,n),a=Math.max(t,e,n),i=a-o;return 0==a?{h:NaN,s:0,v:0}:(r=t==a?(e-n)/i:e==a?2+(n-t)/i:4+(t-e)/i,(r/=6)<0&&(r+=1),{h:360*r,s:i/a,v:a/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,n){return n<<(a=8*e)|t&~(255<<a)}},i.color.toString,i.utils.common)},,,,,,,,,function(t,e,n){"use strict";(function(t){var e=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=s(n(7)),o=s(n(2)),a=n(5),i=n(6);function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=a.chunks.UBO;new(function(n){function s(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=u(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(a))),r.resize=function(){r.model.uniforms.u_ratio.value=t.innerWidth/t.innerHeight,r.renderer.setSize(t.innerWidth,t.innerHeight),r.renderer.setRatio(t.devicePixelRatio)},r.update=function(){r.renderer.render(r.scene,r.camera),requestAnimationFrame(r.update)},u(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o.default),e(s,[{key:"setup",value:function(){this.renderer=new a.Renderer,document.body.appendChild(this.renderer.domElement),this.scene=new a.Scene,this.scene.fog.enable=!0,this.camera=new a.cameras.Orthographic}},{key:"debug",value:function(){var t=this;this.settings={frequency:100,speed:10};var e=new r.default.GUI;e.close(),e.add(this.settings,"frequency",0,100).onChange(function(){t.model.uniforms.u_frequency.value=t.settings.frequency}),e.add(this.settings,"speed",-10,10).onChange(function(){t.model.uniforms.u_speed.value=t.settings.speed})}},{key:"init",value:function(){var e="#version 300 es\n            in vec3 a_position;\n            in vec3 a_normal;\n            in vec2 a_uv;\n\n            "+c.scene()+"\n            "+c.model()+"\n\n            out vec2 v_uv;\n\n            void main() {\n                v_uv = a_uv;\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n            }\n        ",n="#version 300 es\n            precision highp float;\n            precision highp int;\n\n            in vec2 v_uv;\n\n            "+c.scene()+"\n            "+c.model()+"\n\n            uniform float u_ratio;\n            uniform float u_frequency;\n            uniform float u_speed;\n\n            out vec4 outColor;\n\n            float circle(vec2 uv) {\n                float a = atan(uv.y, uv.x);\n                float pi = 3.141592653589793;\n                a = a - pi / 4.0;\n\n                vec2 newuv = vec2(uv.x * cos(a), uv.y * sin(a));\n\n                float d = length(newuv);\n                float c = cos(d * u_frequency - iGlobalTime * u_speed);\n                c *= 100.0;\n                return c;\n            }\n\n            void main() {\n                vec2 uv = v_uv * 2.0 - 1.0;\n                uv.x *= u_ratio;\n\n                float c = circle(uv);\n\n                outColor = vec4(vec3(c), 1.0);\n            }\n        ",r=new i.Plane(1,1);this.model=new a.Model,this.model.setAttribute("a_position","vec3",new Float32Array(r.positions)),this.model.setIndex(new Uint16Array(r.indices)),this.model.setAttribute("a_uv","vec2",new Float32Array(r.uvs)),this.model.setUniform("u_ratio","float",t.innerWidth/t.innerHeight),this.model.setUniform("u_frequency","float",this.settings.frequency),this.model.setUniform("u_speed","float",this.settings.speed),this.model.setShader(e,n),this.scene.add(this.model)}}]),s}())}).call(e,n(0))}]);