!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([,function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){var n,r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,u){"object"===o(e)&&"object"===o(t)?t.exports=u():(r=[],void 0!==(a="function"==typeof(n=u)?n.apply(e,r):n)&&(t.exports=a))}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=17)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),a=n(24),o=n(25),i=n(6),u=n(26),s=n(27),c=n(28),l=n(7),f=n(8);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return a}),n.d(e,"mat2d",function(){return o}),n.d(e,"mat3",function(){return i}),n.d(e,"mat4",function(){return u}),n.d(e,"quat",function(){return s}),n.d(e,"vec2",function(){return c}),n.d(e,"vec3",function(){return l}),n.d(e,"vec4",function(){return f})},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return a}),e.setMatrixArrayType=function(t){a=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=1e-6;e.EPSILON=r;var a="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;e.RANDOM=o;var i=Math.PI/180},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.MAX_DIRECTIONAL=2,e.DIRECTIONAL_LIGHT=1e3,e.SHADER_CUSTOM=2e3,e.SHADER_BASIC=2001,e.SHADER_DEFAULT=2002,e.GL={POINTS:0,LINES:1,TRIANGLES:4}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=null;e.library="lowww-core",e.version="1.0.11",e.setContext=function(t){r=t},e.getContext=function(){return r}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),o=function(t){return t&&t.__esModule?t:{default:t}}(n(32)),i=0,u=0,s=a.vec3.create(),c=!1,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uid=i++,this.parent=null,this.children=[],this.position=new o.default,this.rotation=new o.default,this.scale=new o.default(1,1,1),this._transparent=!1,this._visible=!0,this.quaternion=a.quat.create(),this.target=a.vec3.create(),this.up=a.vec3.fromValues(0,1,0),this.lookToTarget=!1,this.matrices={parent:a.mat4.create(),model:a.mat4.create(),lookAt:a.mat4.create()},this.dirty={sorting:!1,transparent:!1,attributes:!1}}return r(t,[{key:"updateMatrices",value:function(){a.mat4.identity(this.matrices.parent),a.mat4.identity(this.matrices.model),a.mat4.identity(this.matrices.lookAt),a.quat.identity(this.quaternion),this.parent&&(a.mat4.copy(this.matrices.parent,this.parent.matrices.model),a.mat4.multiply(this.matrices.model,this.matrices.model,this.matrices.parent)),this.lookToTarget?(a.mat4.targetTo(this.matrices.lookAt,this.position.data,this.target,this.up),a.mat4.multiply(this.matrices.model,this.matrices.model,this.matrices.lookAt)):(a.mat4.translate(this.matrices.model,this.matrices.model,this.position.data),a.quat.rotateX(this.quaternion,this.quaternion,this.rotation.x),a.quat.rotateY(this.quaternion,this.quaternion,this.rotation.y),a.quat.rotateZ(this.quaternion,this.quaternion,this.rotation.z),u=a.quat.getAxisAngle(s,this.quaternion),a.mat4.rotate(this.matrices.model,this.matrices.model,u,s)),a.mat4.scale(this.matrices.model,this.matrices.model,this.scale.data)}},{key:"init",value:function(){}},{key:"add",value:function(t){t.parent=this,this.children.push(t),this.dirty.sorting=!0}},{key:"remove",value:function(t){var e=this.children.indexOf(t);-1!==e&&(t.destroy(),this.children.splice(e,1),this.dirty.sorting=!0)}},{key:"traverse",value:function(t){void 0===t&&(t=this,c=!1);for(var e=0;e<t.children.length;e++)this.traverse(t.children[e]);return null!==t.parent&&t.updateMatrices(),(t.dirty.sorting||t.dirty.transparent)&&(t.dirty.transparent=!1,c=!0),c}},{key:"transparent",set:function(t){this.dirty.transparent=this.transparent!==t,this._transparent=t},get:function(){return this._transparent}},{key:"visible",set:function(t){this.dirty.sorting=this.visible!==t,this._visible=t},get:function(){return this._visible}}]),t}();e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.NOISE=e.FOG=e.LIGHT=e.UBO=void 0;var r=n(18),a=n(19),o=n(20),i=n(21);e.UBO=o.UBO,e.LIGHT=r.LIGHT,e.FOG=a.FOG,e.NOISE=i.NOISE},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1],v=n[2],p=n[3],m=n[4],b=n[5],_=n[6],M=n[7],g=n[8];return t[0]=h*r+d*i+v*c,t[1]=h*a+d*u+v*l,t[2]=h*o+d*s+v*f,t[3]=p*r+m*i+b*c,t[4]=p*a+m*u+b*l,t[5]=p*o+m*s+b*f,t[6]=_*r+M*i+g*c,t[7]=_*a+M*u+g*l,t[8]=_*o+M*s+g*f,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,a,i,u,s,c){var l=new o.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=a,l[5]=i,l[6]=u,l[7]=s,l[8]=c,l},e.set=function(t,e,n,r,a,o,i,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=l*i-u*c,h=-l*o+u*s,d=c*o-i*s,v=n*f+r*h+a*d;return v?(v=1/v,t[0]=f*v,t[1]=(-l*r+a*c)*v,t[2]=(u*r-a*i)*v,t[3]=h*v,t[4]=(l*n-a*s)*v,t[5]=(-u*n+a*o)*v,t[6]=d*v,t[7]=(-c*n+r*s)*v,t[8]=(i*n-r*o)*v,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8];return t[0]=i*l-u*c,t[1]=a*c-r*l,t[2]=r*u-a*i,t[3]=u*s-o*l,t[4]=n*l-a*s,t[5]=a*o-n*u,t[6]=o*c-i*s,t[7]=r*s-n*c,t[8]=n*i-r*o,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8];return e*(c*o-i*s)+n*(-c*a+i*u)+r*(s*a-o*u)},e.multiply=r,e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=h*r+d*i+c,t[7]=h*a+d*u+l,t[8]=h*o+d*s+f,t},e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*s,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*s-h*o,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,b=o*s;return t[0]=1-f-v,t[3]=l-b,t[6]=h+m,t[1]=l+b,t[4]=1-c-v,t[7]=d-p,t[2]=h-m,t[5]=d+p,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*u-r*i,M=n*s-a*i,g=n*c-o*i,y=r*s-a*u,x=r*c-o*u,E=a*c-o*s,w=l*p-f*v,A=l*m-h*v,P=l*b-d*v,O=f*m-h*p,S=f*b-d*p,R=h*b-d*m,T=_*R-M*S+g*O+y*P-x*A+E*w;return T?(T=1/T,t[0]=(u*R-s*S+c*O)*T,t[1]=(s*P-i*R-c*A)*T,t[2]=(i*S-u*P+c*w)*T,t[3]=(a*S-r*R-o*O)*T,t[4]=(n*R-a*P+o*A)*T,t[5]=(r*P-n*S-o*w)*T,t[6]=(p*E-m*x+b*y)*T,t[7]=(m*g-v*E-b*M)*T,t[8]=(v*x-p*g+b*_)*T,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=e[0],d=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],M=e[7],g=e[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-p)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-_)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-M)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-g)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))};var o=n(1),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(){var t=new v.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){var r=new v.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function f(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new v.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=i,e.multiply=u,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=c,e.squaredDistance=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},e.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),l=i*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*c+a[0]*l,t[1]=e[1]*u+n[1]*s+r[1]*c+a[1]*l,t[2]=e[2]*u+n[2]*s+r[2]*c+a[2]*l,t},e.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,l=3*o*u,f=3*s*i,h=s*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+a[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+a[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+a[2]*h,t},e.random=function(t,e){e=e||1;var n=2*v.RANDOM()*Math.PI,r=2*v.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t},e.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){var n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);h(n,n),h(r,r);var a=d(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=e[0],i=e[1],u=e[2];return Math.abs(n-o)<=v.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var v=n(1),p=i;e.sub=p;var m=u;e.mul=m;var b=s;e.div=b;var _=c;e.dist=_;var M=l;e.sqrDist=M;var g=a;e.len=g;var y=f;e.sqrLen=y;var x=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}();e.forEach=x},function(t,e,n){function r(){var t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o}function l(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function f(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function h(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){var a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=s,e.squaredDistance=c,e.length=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-i)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))};var d=n(1),v=a;e.sub=v;var p=o;e.mul=p;var m=i;e.div=m;var b=s;e.dist=b;var _=c;e.sqrDist=_;var M=l;e.len=M;var g=f;e.sqrLen=g;var y=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();e.forEach=y},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Default=e.Basic=void 0;var a=r(n(34)),o=r(n(10));e.Basic=a.default,e.Default=o.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(n(11)),o=n(5),i=n(2);e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=e.color||r.vec3.fromValues(1,1,1),u=new a.default({transparent:!0});e.map&&u.fromImage(e.map);var s="#version 300 es\n            in vec3 a_position;\n            in vec3 a_normal;\n            in vec2 a_uv;\n\n            "+o.UBO.scene()+"\n            "+o.UBO.model()+"\n\n            out vec3 fragVertexEc;\n            out vec2 v_uv;\n            out vec3 v_normal;\n\n            void main() {\n                vec4 position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n                gl_Position = position;\n\n                fragVertexEc = position.xyz;\n                v_uv = a_uv;\n                v_normal = normalize(mat3(normalMatrix) * a_normal);\n            }\n        ",c="#version 300 es\n            precision highp float;\n            precision highp int;\n\n            in vec3 fragVertexEc;\n            in vec2 v_uv;\n            in vec3 v_normal;\n\n            "+o.UBO.scene()+"\n            "+o.UBO.model()+"\n            "+o.UBO.lights()+"\n\n            uniform sampler2D u_map;\n            uniform vec3 u_color;\n\n            out vec4 outColor;\n\n            void main() {\n                vec3 v_normal = normalize(cross(dFdx(fragVertexEc), dFdy(fragVertexEc)));\n\n                vec4 base = vec4(0.0, 0.0, 0.0, 0.0);\n                base += vec4(u_color, 1.0);\n                base *= texture(u_map, v_uv);\n\n                "+o.LIGHT.factory()+"\n                "+o.FOG.linear()+"\n\n                outColor = base;\n            }\n        ";return Object.assign({type:i.SHADER_DEFAULT,mode:!0===e.wireframe?i.GL.LINES:i.GL.TRIANGLES},{vertex:s,fragment:c,uniforms:[{key:"u_map",type:"sampler2D",value:u.texture},{key:"u_color",type:"vec3",value:n},{key:"u_use_lights",type:"float",value:!1}]})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=(0,a.getContext)();Object.assign(this,{magFilter:n.NEAREST,minFilter:n.NEAREST,wrapS:n.CLAMP_TO_EDGE,wrapT:n.CLAMP_TO_EDGE,transparent:!1},e);var r=new Uint8Array([255,255,255,255]);this.texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,this.magFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.minFilter),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this.wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this.wrapT),this.transparent&&n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.bindTexture(n.TEXTURE_2D,null)}return r(t,[{key:"fromImage",value:function(t){var e=this,n=new Image;n.crossOrigin="",n.onload=function(){e.update(n)},n.src=t}},{key:"update",value:function(t){var e=(0,a.getContext)();e.bindTexture(e.TEXTURE_2D,this.texture),e.generateMipmap(e.TEXTURE_2D),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}}]),t}();e.default=o},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(n(13)),i=r(n(10)),u=n(2),s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=t.geometry,a=r.positions,s=r.indices,c=r.normals,l=r.uvs,f=t.shader||new i.default({color:t.color,map:t.map}),h=f.vertex,d=f.fragment,v=f.uniforms,p=f.type,m=f.mode;return n.type=void 0!==p?p:u.SHADER_CUSTOM,void 0!==m&&(n.mode=m),n.setAttribute("a_position","vec3",new Float32Array(a)),s&&n.setIndex(new Uint16Array(s)),c&&n.setAttribute("a_normal","vec3",new Float32Array(c)),l&&n.setAttribute("a_uv","vec2",new Float32Array(l)),v.forEach(function(t){n.setUniform(t.key,t.type,t.value)}),n.setShader(h,d),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(4)),i=n(14),u=n(3),s=n(2),c=n(15),l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.attributes={},t.uniforms={},t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=1,t.instanceCount=0,t.isInstance=!1,t.mode=s.GL.TRIANGLES,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"setAttribute",value:function(t,e,n){var r=(0,c.getTypeSize)(e);this.attributes[t]={value:n,size:r}}},{key:"setIndex",value:function(t){this.indices={value:t}}},{key:"setUniform",value:function(t,e,n){this.uniforms[t]={value:n,type:e}}},{key:"setShader",value:function(t,e){this.vertex=t,this.fragment=e}},{key:"setInstanceAttribute",value:function(t,e,n){var r=(0,c.getTypeSize)(e);this.attributes[t]={value:n,size:r,instanced:!0}}},{key:"setInstanceCount",value:function(t){this.instanceCount=t,this.instanceCount>0?this.isInstance=!0:this.isInstance=!1}},{key:"init",value:function(){var t=(0,u.getContext)();this.vertex&&this.fragment&&(this.program=(0,i.createProgram)(t,this.vertex,this.fragment),this.vao=new c.Vao,(0,c.initAttributes)(this.attributes,this.program),(0,c.initUniforms)(this.uniforms,this.program),this.indices&&(this.indices.buffer=t.createBuffer()),this.vao.bind(),this.bind(),this.vao.unbind(),this.unbind())}},{key:"destroy",value:function(){}},{key:"bind",value:function(){var t=(0,u.getContext)();this.indices&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indices.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.value,t.STATIC_DRAW)),(0,c.bindAttributes)(this.attributes)}},{key:"unbind",value:function(){var t=(0,u.getContext)();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}},{key:"update",value:function(){var t=(0,u.getContext)();this.dirty.attributes&&((0,c.updateAttributes)(this.attributes),this.dirty.attributes=!0),(0,c.updateUniforms)(this.uniforms),this.polygonOffset?(t.enable(t.POLYGON_OFFSET_FILL),t.polygonOffset(this.polygonOffsetFactor,this.polygonOffsetUnits)):t.disable(t.POLYGON_OFFSET_FILL),this.transparent&&(t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA))}},{key:"draw",value:function(){var t=(0,u.getContext)();this.isInstance?t.drawElementsInstanced(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0,this.instanceCount):this.indices?t.drawElements(this.mode,this.indices.value.length,t.UNSIGNED_SHORT,0):t.drawArrays(this.mode,0,this.attributes.a_position.value.length/3)}}]),e}();e.default=l},function(t,e,n){function r(t,e,n){var r=t.createShader(n);t.shaderSource(r,e),t.compileShader(r);if(!t.getShaderParameter(r,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(r);throw t.deleteShader(r),console.error(a,e),new Error(a)}return r}Object.defineProperty(e,"__esModule",{value:!0});e.createProgram=function(t,e,n){var a=r(t,e,t.VERTEX_SHADER),o=r(t,n,t.FRAGMENT_SHADER),i=t.createProgram();return t.attachShader(i,a),t.attachShader(i,o),t.linkProgram(i),i}},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.updateUniforms=e.initUniforms=e.updateAttributes=e.bindAttributes=e.initAttributes=e.createProgram=e.getTypeSize=e.Vao=e.Ubo=void 0;var a=r(n(37)),o=r(n(38)),i=n(39),u=n(14),s=n(40),c=n(41);e.Ubo=a.default,e.Vao=o.default,e.getTypeSize=i.getTypeSize,e.createProgram=u.createProgram,e.initAttributes=s.initAttributes,e.bindAttributes=s.bindAttributes,e.updateAttributes=s.updateAttributes,e.initUniforms=c.initUniforms,e.updateUniforms=c.updateUniforms},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=function(t){return t&&t.__esModule?t:{default:t}}(n(4)),i=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.directional=[],t.fog={color:r.vec4.fromValues(0,0,0,1),start:500,end:1e3,density:25e-5,enable:!1},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=i},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Performance=e.Texture=e.Mesh=e.Model=e.Scene=e.Object3=e.Renderer=e.GL=e.helpers=e.shaders=e.cameras=e.utils=e.chunks=void 0;var o=a(n(5)),i=a(n(22)),u=a(n(30)),s=a(n(9)),c=a(n(35)),l=n(2),f=r(n(42)),h=r(n(4)),d=r(n(16)),v=r(n(13)),p=r(n(12)),m=r(n(11)),b=r(n(45));e.chunks=o,e.utils=i,e.cameras=u,e.shaders=s,e.helpers=c,e.GL=l.GL,e.Renderer=f.default,e.Object3=h.default,e.Scene=d.default,e.Model=v.default,e.Mesh=p.default,e.Texture=m.default,e.Performance=b.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={factory:function(){return"\n        // factory light\n        vec3 inverseLightDirection = normalize(vec3(-0.25, -0.25, 1)); // light position\n        vec3 directionalColor = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n        vec3 factory = mix(vec3(0.0), directionalColor, 0.989); // light intensity\n        base.rgb *= factory;\n\n        // if valid, calculate real lights\n        if (u_use_lights > 0.0) {\n            "+r.directional()+"\n        }"},directional:function(){return"\n            vec3 dcolor = vec3(0.0);\n\n            for (int i = 0; i < MAX_DIRECTIONAL; i++) {\n                vec3 inverseLightDirection = normalize(directionalLights[i].dlPosition.xyz);\n                vec3 light = vec3(max(dot(v_normal, inverseLightDirection), 0.0));\n                vec3 directionalColor = directionalLights[i].dlColor.rgb * light;\n                dcolor += mix(dcolor, directionalColor, directionalLights[i].flIntensity);\n            }\n            dcolor /= float(MAX_DIRECTIONAL);\n\n            base.rgb *= dcolor;\n        "}};e.LIGHT=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={linear:function(){return"\n        if (fogSettings.a > 0.0) {\n            \n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = (fogEnd - dist) / (fogEnd - fogStart);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential:function(){return"\n        if (fogSettings.a > 0.0) {\n            \n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp(dist * fogDensity);\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"},exponential2:function(){return"\n        if (fogSettings.a > 0.0) {\n            \n    float fogStart = fogSettings.x;\n    float fogEnd = fogSettings.y;\n    float fogDensity = fogSettings.z;\n\n    float dist = 0.0;\n    float fogFactor = 0.0;\n    dist = gl_FragCoord.z / gl_FragCoord.w;\n            fogFactor = 1.0 / exp((dist * fogDensity) * (dist * fogDensity));\n            fogFactor = clamp(fogFactor, 0.0, 1.0);\n            base = mix(fogColor, base, fogFactor);\n        }"}};e.FOG=r},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.UBO=void 0;var r=n(2),a={scene:function(){return"\n            uniform perScene {\n                mat4 projectionMatrix;\n                mat4 viewMatrix;\n                vec4 fogSettings;\n                vec4 fogColor;\n                float iGlobalTime;\n            };"},model:function(){return"\n            uniform perModel {\n                mat4 modelMatrix;\n                mat4 normalMatrix;\n            };"},lights:function(){return"\n            #define MAX_DIRECTIONAL "+r.MAX_DIRECTIONAL+"\n\n            struct Directional {\n                vec4 dlPosition;\n                vec4 dlColor;\n                float flIntensity;\n            };\n\n            uniform directional {\n                Directional directionalLights[MAX_DIRECTIONAL];\n            };\n\n            uniform float u_use_lights;"}};e.UBO=a},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.NOISE=function(){return"\n    vec3 mod289(vec3 x){return x-floor(x*(1./289.))*289.;}vec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}vec4 permute(vec4 x){return mod289((x*34.+1.)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284-.853735*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.-15.)+10.);}float cnoise(vec3 P){vec3 Pi0=floor(P),Pi1=Pi0+vec3(1.);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep),Pi1=mod(Pi0+vec3(1.),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P),Pf1=Pf0-vec3(1.);vec4 ix=vec4(Pi0.r,Pi1.r,Pi0.r,Pi1.r),iy=vec4(Pi0.gg,Pi1.gg),iz0=Pi0.bbbb,iz1=Pi1.bbbb,ixy=permute(permute(ix)+iy),ixy0=permute(ixy+iz0),ixy1=permute(ixy+iz1),gx0=ixy0*(1./7.),gy0=fract(floor(gx0)*(1./7.))-.5;gx0=fract(gx0);vec4 gz0=vec4(.5)-abs(gx0)-abs(gy0),sz0=step(gz0,vec4(0.));gx0-=sz0*(step(0.,gx0)-.5);gy0-=sz0*(step(0.,gy0)-.5);vec4 gx1=ixy1*(1./7.),gy1=fract(floor(gx1)*(1./7.))-.5;gx1=fract(gx1);vec4 gz1=vec4(.5)-abs(gx1)-abs(gy1),sz1=step(gz1,vec4(0.));gx1-=sz1*(step(0.,gx1)-.5);gy1-=sz1*(step(0.,gy1)-.5);vec3 g000=vec3(gx0.r,gy0.r,gz0.r),g100=vec3(gx0.g,gy0.g,gz0.g),g010=vec3(gx0.b,gy0.b,gz0.b),g110=vec3(gx0.a,gy0.a,gz0.a),g001=vec3(gx1.r,gy1.r,gz1.r),g101=vec3(gx1.g,gy1.g,gz1.g),g011=vec3(gx1.b,gy1.b,gz1.b),g111=vec3(gx1.a,gy1.a,gz1.a);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.r;g010*=norm0.g;g100*=norm0.b;g110*=norm0.a;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.r;g011*=norm1.g;g101*=norm1.b;g111*=norm1.a;float n000=dot(g000,Pf0),n100=dot(g100,vec3(Pf1.r,Pf0.gb)),n010=dot(g010,vec3(Pf0.r,Pf1.g,Pf0.b)),n110=dot(g110,vec3(Pf1.rg,Pf0.b)),n001=dot(g001,vec3(Pf0.rg,Pf1.b)),n101=dot(g101,vec3(Pf1.r,Pf0.g,Pf1.b)),n011=dot(g011,vec3(Pf0.r,Pf1.gb)),n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.b);vec2 n_yz=mix(n_z.rg,n_z.ba,fade_xyz.g);float n_xyz=mix(n_yz.r,n_yz.g,fade_xyz.r);return 2.2*n_xyz;}\n"}},function(t,e,n){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.math=e.color=void 0;var a=r(n(23)),o=r(n(29));e.color=a,e.math=o},function(t,e,n){function r(t){var e=t>>16,n=t>>8&255,r=255&t;return i.vec3.fromValues(e,n,r)}function a(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?i.vec3.fromValues(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):null}function o(t){var e=t.toString(16);return 1===e.length?"0"+e:e}Object.defineProperty(e,"__esModule",{value:!0}),e.hexIntToRgb=r,e.hexStringToRgb=a,e.componentToHex=o,e.rgbToHex=function(t,e,n){return"#"+o(t)+o(e)+o(n)},e.convert=function(t){var e=i.vec3.create(),n="number"==typeof t?r(t):a(t);return i.vec3.copy(e,function(t){return i.vec3.fromValues(t[0]/255,t[1]/255,t[2]/255)}(n)),e};var i=n(0)},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*c+o*l,t[3]=a*c+i*l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,r){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=e[0],s=e[1],c=e[2],l=e[3];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var o=n(1),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],v=n[5];return t[0]=r*c+o*l,t[1]=a*c+i*l,t[2]=r*f+o*h,t[3]=a*f+i*h,t[4]=r*d+o*v+u,t[5]=a*d+i*v+s,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,r,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u},e.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=n*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-n*u)*s,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=a*l+i*c,t[2]=r*-c+o*l,t[3]=a*-c+i*l,t[4]=u,t[5]=s,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=a*c,t[2]=o*l,t[3]=i*l,t[4]=u,t[5]=s,t},e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*c+o*l+u,t[5]=a*c+i*l+s,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=e[0],l=e[1],f=e[2],h=e[3],d=e[4],v=e[5];return Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-v)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))};var o=n(1),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],m=e[13],b=e[14],_=e[15],M=n[0],g=n[1],y=n[2],x=n[3];return t[0]=M*r+g*u+y*f+x*p,t[1]=M*a+g*s+y*h+x*m,t[2]=M*o+g*c+y*d+x*b,t[3]=M*i+g*l+y*v+x*_,M=n[4],g=n[5],y=n[6],x=n[7],t[4]=M*r+g*u+y*f+x*p,t[5]=M*a+g*s+y*h+x*m,t[6]=M*o+g*c+y*d+x*b,t[7]=M*i+g*l+y*v+x*_,M=n[8],g=n[9],y=n[10],x=n[11],t[8]=M*r+g*u+y*f+x*p,t[9]=M*a+g*s+y*h+x*m,t[10]=M*o+g*c+y*d+x*b,t[11]=M*i+g*l+y*v+x*_,M=n[12],g=n[13],y=n[14],x=n[15],t[12]=M*r+g*u+y*f+x*p,t[13]=M*a+g*s+y*h+x*m,t[14]=M*o+g*c+y*d+x*b,t[15]=M*i+g*l+y*v+x*_,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,r,a,i,u,s,c,l,f,h,d,v,p,m){var b=new o.ARRAY_TYPE(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=a,b[5]=i,b[6]=u,b[7]=s,b[8]=c,b[9]=l,b[10]=f,b[11]=h,b[12]=d,b[13]=v,b[14]=p,b[15]=m,b},e.set=function(t,e,n,r,a,o,i,u,s,c,l,f,h,d,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=v,t[14]=p,t[15]=m,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*u-r*i,M=n*s-a*i,g=n*c-o*i,y=r*s-a*u,x=r*c-o*u,E=a*c-o*s,w=l*p-f*v,A=l*m-h*v,P=l*b-d*v,O=f*m-h*p,S=f*b-d*p,R=h*b-d*m,T=_*R-M*S+g*O+y*P-x*A+E*w;return T?(T=1/T,t[0]=(u*R-s*S+c*O)*T,t[1]=(a*S-r*R-o*O)*T,t[2]=(p*E-m*x+b*y)*T,t[3]=(h*x-f*E-d*y)*T,t[4]=(s*P-i*R-c*A)*T,t[5]=(n*R-a*P+o*A)*T,t[6]=(m*g-v*E-b*M)*T,t[7]=(l*E-h*g+d*M)*T,t[8]=(i*S-u*P+c*w)*T,t[9]=(r*P-n*S-o*w)*T,t[10]=(v*x-p*g+b*_)*T,t[11]=(f*g-l*x-d*_)*T,t[12]=(u*A-i*O-s*w)*T,t[13]=(n*O-r*A+a*w)*T,t[14]=(p*M-v*y-m*_)*T,t[15]=(l*y-f*M+h*_)*T,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15];return t[0]=u*(h*b-d*m)-f*(s*b-c*m)+p*(s*d-c*h),t[1]=-(r*(h*b-d*m)-f*(a*b-o*m)+p*(a*d-o*h)),t[2]=r*(s*b-c*m)-u*(a*b-o*m)+p*(a*c-o*s),t[3]=-(r*(s*d-c*h)-u*(a*d-o*h)+f*(a*c-o*s)),t[4]=-(i*(h*b-d*m)-l*(s*b-c*m)+v*(s*d-c*h)),t[5]=n*(h*b-d*m)-l*(a*b-o*m)+v*(a*d-o*h),t[6]=-(n*(s*b-c*m)-i*(a*b-o*m)+v*(a*c-o*s)),t[7]=n*(s*d-c*h)-i*(a*d-o*h)+l*(a*c-o*s),t[8]=i*(f*b-d*p)-l*(u*b-c*p)+v*(u*d-c*f),t[9]=-(n*(f*b-d*p)-l*(r*b-o*p)+v*(r*d-o*f)),t[10]=n*(u*b-c*p)-i*(r*b-o*p)+v*(r*c-o*u),t[11]=-(n*(u*d-c*f)-i*(r*d-o*f)+l*(r*c-o*u)),t[12]=-(i*(f*m-h*p)-l*(u*m-s*p)+v*(u*h-s*f)),t[13]=n*(f*m-h*p)-l*(r*m-a*p)+v*(r*h-a*f),t[14]=-(n*(u*m-s*p)-i*(r*m-a*p)+v*(r*s-a*u)),t[15]=n*(u*h-s*f)-i*(r*h-a*f)+l*(r*s-a*u),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],v=t[13],p=t[14],m=t[15];return(e*i-n*o)*(f*m-h*p)-(e*u-r*o)*(l*m-h*v)+(e*s-a*o)*(l*p-f*v)+(n*u-r*i)*(c*m-h*d)-(n*s-a*i)*(c*p-f*d)+(r*s-a*u)*(c*v-l*d)},e.multiply=r,e.translate=function(t,e,n){var r=n[0],a=n[1],o=n[2],i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,b=void 0;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*o+e[12],t[13]=e[1]*r+e[5]*a+e[9]*o+e[13],t[14]=e[2]*r+e[6]*a+e[10]*o+e[14],t[15]=e[3]*r+e[7]*a+e[11]*o+e[15]):(i=e[0],u=e[1],s=e[2],c=e[3],l=e[4],f=e[5],h=e[6],d=e[7],v=e[8],p=e[9],m=e[10],b=e[11],t[0]=i,t[1]=u,t[2]=s,t[3]=c,t[4]=l,t[5]=f,t[6]=h,t[7]=d,t[8]=v,t[9]=p,t[10]=m,t[11]=b,t[12]=i*r+l*a+v*o+e[12],t[13]=u*r+f*a+p*o+e[13],t[14]=s*r+h*a+m*o+e[14],t[15]=c*r+d*a+b*o+e[15]),t},e.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,r){var a=r[0],i=r[1],u=r[2],s=Math.sqrt(a*a+i*i+u*u),c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,b=void 0,_=void 0,M=void 0,g=void 0,y=void 0,x=void 0,E=void 0,w=void 0,A=void 0,P=void 0,O=void 0,S=void 0,R=void 0,T=void 0,L=void 0,I=void 0;return Math.abs(s)<o.EPSILON?null:(s=1/s,a*=s,i*=s,u*=s,c=Math.sin(n),l=Math.cos(n),f=1-l,h=e[0],d=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],M=e[7],g=e[8],y=e[9],x=e[10],E=e[11],w=a*a*f+l,A=i*a*f+u*c,P=u*a*f-i*c,O=a*i*f-u*c,S=i*i*f+l,R=u*i*f+a*c,T=a*u*f+i*c,L=i*u*f-a*c,I=u*u*f+l,t[0]=h*w+m*A+g*P,t[1]=d*w+b*A+y*P,t[2]=v*w+_*A+x*P,t[3]=p*w+M*A+E*P,t[4]=h*O+m*S+g*R,t[5]=d*O+b*S+y*R,t[6]=v*O+_*S+x*R,t[7]=p*O+M*S+E*R,t[8]=h*T+m*L+g*I,t[9]=d*T+b*L+y*I,t[10]=v*T+_*L+x*I,t[11]=p*T+M*L+E*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*r,t[5]=i*a+l*r,t[6]=u*a+f*r,t[7]=s*a+h*r,t[8]=c*a-o*r,t[9]=l*a-i*r,t[10]=f*a-u*r,t[11]=h*a-s*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-c*r,t[1]=i*a-l*r,t[2]=u*a-f*r,t[3]=s*a-h*r,t[8]=o*r+c*a,t[9]=i*r+l*a,t[10]=u*r+f*a,t[11]=s*r+h*a,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*r,t[1]=i*a+l*r,t[2]=u*a+f*r,t[3]=s*a+h*r,t[4]=c*a-o*r,t[5]=l*a-i*r,t[6]=f*a-u*r,t[7]=h*a-s*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var r=n[0],a=n[1],i=n[2],u=Math.sqrt(r*r+a*a+i*i),s=void 0,c=void 0,l=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,r*=u,a*=u,i*=u,s=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=r*r*l+c,t[1]=a*r*l+i*s,t[2]=i*r*l-a*s,t[3]=0,t[4]=r*a*l-i*s,t[5]=a*a*l+c,t[6]=i*a*l+r*s,t[7]=0,t[8]=r*i*l+a*s,t[9]=a*i*l-r*s,t[10]=i*i*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,s=a+a,c=o+o,l=r*u,f=r*s,h=r*c,d=a*s,v=a*c,p=o*c,m=i*u,b=i*s,_=i*c;return t[0]=1-(d+p),t[1]=f+_,t[2]=h-b,t[3]=0,t[4]=f-_,t[5]=1-(l+p),t[6]=v+m,t[7]=0,t[8]=h+b,t[9]=v-m,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[4],i=e[5],u=e[6],s=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+c*c+l*l),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,c=o+o,l=i+i,f=a*s,h=a*c,d=a*l,v=o*c,p=o*l,m=i*l,b=u*s,_=u*c,M=u*l,g=r[0],y=r[1],x=r[2];return t[0]=(1-(v+m))*g,t[1]=(h+M)*g,t[2]=(d-_)*g,t[3]=0,t[4]=(h-M)*y,t[5]=(1-(f+m))*y,t[6]=(p+b)*y,t[7]=0,t[8]=(d+_)*x,t[9]=(p-b)*x,t[10]=(1-(f+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],s=e[3],c=o+o,l=i+i,f=u+u,h=o*c,d=o*l,v=o*f,p=i*l,m=i*f,b=u*f,_=s*c,M=s*l,g=s*f,y=r[0],x=r[1],E=r[2],w=a[0],A=a[1],P=a[2];return t[0]=(1-(p+b))*y,t[1]=(d+g)*y,t[2]=(v-M)*y,t[3]=0,t[4]=(d-g)*x,t[5]=(1-(h+b))*x,t[6]=(m+_)*x,t[7]=0,t[8]=(v+M)*E,t[9]=(m-_)*E,t[10]=(1-(h+p))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*A+t[8]*P),t[13]=n[1]+A-(t[1]*w+t[5]*A+t[9]*P),t[14]=n[2]+P-(t[2]*w+t[6]*A+t[10]*P),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,b=o*s;return t[0]=1-f-v,t[1]=l+b,t[2]=h-m,t[3]=0,t[4]=l-b,t[5]=1-c-v,t[6]=d+p,t[7]=0,t[8]=h+m,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),s=1/(a-r),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),s=1/(r-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*s,t[14]=(i+o)*c,t[15]=1,t},e.lookAt=function(t,e,n,r){var a=void 0,i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=e[0],m=e[1],b=e[2],_=r[0],M=r[1],g=r[2],y=n[0],x=n[1],E=n[2];return Math.abs(p-y)<o.EPSILON&&Math.abs(m-x)<o.EPSILON&&Math.abs(b-E)<o.EPSILON?mat4.identity(t):(f=p-y,h=m-x,d=b-E,v=1/Math.sqrt(f*f+h*h+d*d),f*=v,h*=v,d*=v,a=M*d-g*h,i=g*f-_*d,u=_*h-M*f,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),s=h*u-d*i,c=d*a-f*u,l=f*i-h*a,(v=Math.sqrt(s*s+c*c+l*l))?(s*=v=1/v,c*=v,l*=v):(s=0,c=0,l=0),t[0]=a,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=h,t[7]=0,t[8]=u,t[9]=l,t[10]=d,t[11]=0,t[12]=-(a*p+i*m+u*b),t[13]=-(s*p+c*m+l*b),t[14]=-(f*p+h*m+d*b),t[15]=1,t)},e.targetTo=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=r[0],s=r[1],c=r[2],l=a-n[0],f=o-n[1],h=i-n[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var v=s*h-c*f,p=c*l-u*h,m=u*f-s*l;return t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=f*m-h*p,t[5]=h*v-l*m,t[6]=l*p-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],v=t[11],p=t[12],m=t[13],b=t[14],_=t[15],M=e[0],g=e[1],y=e[2],x=e[3],E=e[4],w=e[5],A=e[6],P=e[7],O=e[8],S=e[9],R=e[10],T=e[11],L=e[12],I=e[13],C=e[14],N=e[15];return Math.abs(n-M)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(r-g)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-y)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(i-x)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-E)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-w)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-A)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-P)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(f-O)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-S)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-R)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(v-T)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(p-L)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(m-I)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(b-C)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(_-N)<=o.EPSILON*Math.max(1,Math.abs(_),Math.abs(N))};var o=n(1),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(){var t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function o(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*l+i*u+a*c-o*s,t[1]=a*l+i*s+o*u-r*c,t[2]=o*l+i*c+r*s-a*u,t[3]=i*l-r*u-a*s-o*c,t}function i(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=n[0],c=n[1],l=n[2],f=n[3],h=void 0,d=void 0,v=void 0,p=void 0,m=void 0;return(d=a*s+o*c+i*l+u*f)<0&&(d=-d,s=-s,c=-c,l=-l,f=-f),1-d>1e-6?(h=Math.acos(d),v=Math.sin(h),p=Math.sin((1-r)*h)/v,m=Math.sin(r*h)/v):(p=1-r,m=r),t[0]=p*a+m*s,t[1]=p*o+m*c,t[2]=p*i+m*l,t[3]=p*u+m*f,t}function u(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+a]+e[3*a+o])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=a,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=o,e.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},e.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},e.slerp=i,e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var o=Math.sin(e),i=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*s*l-i*u*c,t[1]=i*u*l+o*s*c,t[2]=i*s*c-o*u*l,t[3]=i*s*l+o*u*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=n(1),c=n(6),l=n(7),f=n(8),h=f.clone;e.clone=h;var d=f.fromValues;e.fromValues=d;var v=f.copy;e.copy=v;var p=f.set;e.set=p;var m=f.add;e.add=m;var b=o;e.mul=b;var _=f.scale;e.scale=_;var M=f.dot;e.dot=M;var g=f.lerp;e.lerp=g;var y=f.length;e.length=y;var x=y;e.len=x;var E=f.squaredLength;e.squaredLength=E;var w=E;e.sqrLen=w;var A=f.normalize;e.normalize=A;var P=f.exactEquals;e.exactEquals=P;var O=f.equals;e.equals=O;var S=function(){var t=l.create(),e=l.fromValues(1,0,0),n=l.fromValues(0,1,0);return function(r,o,i){var u=l.dot(o,i);return u<-.999999?(l.cross(t,e,o),l.len(t)<1e-6&&l.cross(t,n,o),l.normalize(t,t),a(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(l.cross(t,o,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,A(r,r))}}();e.rotationTo=S;var R=function(){var t=r(),e=r();return function(n,r,a,o,u,s){return i(t,r,u,s),i(e,a,o,s),i(n,t,e,2*s*(1-s)),n}}();e.sqlerp=R;var T=function(){var t=c.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],A(e,u(e,t))}}();e.setAxes=T},function(t,e,n){function r(){var t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function c(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function l(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new f.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=s,e.length=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},e.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var f=n(1),h=c;e.len=h;var d=a;e.sub=d;var v=o;e.mul=v;var p=i;e.div=p;var m=u;e.dist=m;var b=s;e.sqrDist=b;var _=l;e.sqrLen=_;var M=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}();e.forEach=M},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.randomRange=function(t,e){return Math.random()*(e-t)+t}},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Perspective=e.Orthographic=void 0;var a=r(n(31)),o=r(n(33));e.Orthographic=a.default,e.Perspective=o.default},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n(4)),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:.1,far:100},t),n.matrices.projection=a.mat4.create(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"lookAt",value:function(t){a.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(){a.mat4.ortho(this.matrices.projection,-1,1,-1,1,this.near,this.far)}}]),e}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=a.vec3.fromValues(e,n,r)}return r(t,[{key:"set",value:function(t,e,n){this.x=t,this.y=e,this.z=n}},{key:"x",set:function(t){a.vec3.set(this.data,t,this.data[1],this.data[2])},get:function(){return this.data[0]}},{key:"y",set:function(t){a.vec3.set(this.data,this.data[0],t,this.data[2])},get:function(){return this.data[1]}},{key:"z",set:function(t){a.vec3.set(this.data,this.data[0],this.data[1],t)},get:function(){return this.data[2]}}]),t}();e.default=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n(4)),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(n,{near:1,far:1e3,fov:35},t),n.matrices.projection=a.mat4.create(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default),r(e,[{key:"lookAt",value:function(t){a.vec3.copy(this.target,t)}},{key:"updateCameraMatrix",value:function(t,e){a.mat4.perspective(this.matrices.projection,this.fov*(Math.PI/180),t/e,this.near,this.far)}}]),e}();e.default=u},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(5),o=n(2);e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var n=e.color||r.vec3.fromValues(1,1,1),i="#version 300 es\n            in vec3 a_position;\n\n            "+a.UBO.scene()+"\n            "+a.UBO.model()+"\n\n            void main() {\n                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n            }\n        ",u="#version 300 es\n            precision highp float;\n            precision highp int;\n\n            "+a.UBO.scene()+"\n\n            uniform vec3 u_color;\n\n            out vec4 outColor;\n\n            void main() {\n                vec4 base = vec4(u_color, 1.0);\n\n                "+a.FOG.linear()+"\n\n                outColor = base;\n            }\n        ";return Object.assign({type:o.SHADER_BASIC,mode:!0===e.wireframe?o.GL.LINES:o.GL.TRIANGLES},{vertex:i,fragment:u,uniforms:[{key:"u_color",type:"vec3",value:n}]})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.AxisHelper=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(36));e.AxisHelper=r.default},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),u=r(n(12)),s=r(n(4)),c=n(9),l=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=t&&t.size||10,s={positions:[].concat(a(i.vec3.fromValues(0,0,0)),a(i.vec3.fromValues(r,0,0)))},l={positions:[].concat(a(i.vec3.fromValues(0,0,0)),a(i.vec3.fromValues(0,r,0)))},f={positions:[].concat(a(i.vec3.fromValues(0,0,0)),a(i.vec3.fromValues(0,0,r)))},h=new c.Basic({color:i.vec3.fromValues(1,0,0),wireframe:!0}),d=new c.Basic({color:i.vec3.fromValues(0,1,0),wireframe:!0}),v=new c.Basic({color:i.vec3.fromValues(0,0,1),wireframe:!0}),p=new u.default({geometry:s,shader:h});n.add(p);var m=new u.default({geometry:l,shader:d});n.add(m);var b=new u.default({geometry:f,shader:v});return n.add(b),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),e}();e.default=l},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(0,a.getContext)();this.boundLocation=n,this.data=new Float32Array(e),this.buffer=r.createBuffer(),r.bindBuffer(r.UNIFORM_BUFFER,this.buffer),r.bufferData(r.UNIFORM_BUFFER,this.data,r.STATIC_DRAW),r.bindBuffer(r.UNIFORM_BUFFER,null)}return r(t,[{key:"bind",value:function(){var t=(0,a.getContext)();t.bindBufferBase(t.UNIFORM_BUFFER,this.boundLocation,this.buffer)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,a.getContext)();this.data.set(t,e),n.bindBuffer(n.UNIFORM_BUFFER,this.buffer),n.bufferSubData(n.UNIFORM_BUFFER,0,this.data,0,null),n.bindBuffer(n.UNIFORM_BUFFER,null)}}]),t}();e.default=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=(0,a.getContext)();this.vao=e.createVertexArray(),e.bindVertexArray(this.vao)}return r(t,[{key:"bind",value:function(){(0,a.getContext)().bindVertexArray(this.vao)}},{key:"unbind",value:function(){(0,a.getContext)().bindVertexArray(null)}},{key:"destroy",value:function(){(0,a.getContext)().deleteVertexArray(this.vao),this.vao=null}}]),t}();e.default=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.getTypeSize=function(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":case"mat2":return 4;case"mat3":return 9;case"mat4":return 16;default:throw new Error('"'+t+'" is an unknown type')}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.updateAttributes=e.bindAttributes=e.initAttributes=void 0;var r=n(3);e.initAttributes=function(t,e){var n=(0,r.getContext)();for(var a in t){var o=t[a],i=n.getAttribLocation(e,a),u=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,u),n.bufferData(n.ARRAY_BUFFER,o.value,n.STATIC_DRAW),Object.assign(o,{location:i,buffer:u})}},e.bindAttributes=function(t){var e=(0,r.getContext)();Object.keys(t).forEach(function(n){var r=t[n],a=r.location,o=r.buffer,i=r.size,u=r.instanced;-1!==a&&(e.bindBuffer(e.ARRAY_BUFFER,o),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,i,e.FLOAT,!1,0,0),u&&e.vertexAttribDivisor(a,1),e.bindBuffer(e.ARRAY_BUFFER,null))})},e.updateAttributes=function(t){var e=(0,r.getContext)();Object.keys(t).forEach(function(n){var r=t[n],a=r.location,o=r.buffer,i=r.value;-1!==a&&(e.enableVertexAttribArray(a),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW))})}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.updateUniforms=e.initUniforms=void 0;var r=n(3);e.initUniforms=function(t,e){var n=(0,r.getContext)(),a=[n.TEXTURE0,n.TEXTURE1,n.TEXTURE2,n.TEXTURE3,n.TEXTURE4,n.TEXTURE5];Object.keys(t).forEach(function(r,o){var i=t[r],u=n.getUniformLocation(e,r);Object.assign(i,{location:u}),"sampler2D"===i.type&&(i.textureIndex=o,i.activeTexture=a[o])})},e.updateUniforms=function(t){var e=(0,r.getContext)();Object.keys(t).forEach(function(n){var r=t[n];switch(r.type){case"mat4":e.uniformMatrix4fv(r.location,!1,r.value);break;case"mat3":e.uniformMatrix3fv(r.location,!1,r.value);break;case"vec4":e.uniform4fv(r.location,r.value);break;case"vec3":e.uniform3fv(r.location,r.value);break;case"vec2":e.uniform2fv(r.location,r.value);break;case"float":e.uniform1f(r.location,r.value);break;case"sampler2D":e.uniform1i(r.location,r.textureIndex),e.activeTexture(r.activeTexture),e.bindTexture(e.TEXTURE_2D,r.value);break;default:throw new Error('"'+r.type+'" is an unknown uniform type')}})}},function(t,e,n){(function(t){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),i=n(3),u=n(2),s=n(44),c=n(15),l=function(t){return t&&t.__esModule?t:{default:t}}(n(16)),f=void 0,h=void 0,d=!1,v=Date.now(),p={view:o.mat4.create(),normal:o.mat4.create(),modelView:o.mat4.create(),inversedModelView:o.mat4.create()},m=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.supported=!1,this.opaque=[],this.transparent=[],this.performance={opaque:0,transparent:0,vertices:0,instances:0},this.domElement=n.canvas||document.createElement("canvas"),delete n.canvas;var r=this.domElement.getContext("webgl2",Object.assign({},{antialias:!1},n));if(r){if(!1!==n.greeting){var a,o="color:#f33;font-size:x-small",u=["%c"+i.library+"\n%cversion: %c"+i.version+" %crunning: %c"+r.getParameter(r.VERSION),"color:#666;font-size:x-small;font-weight:bold;","color:#777;font-size:x-small",o,"color:#777;font-size:x-small",o];(a=console).log.apply(a,u)}(0,i.setContext)(r),this.init()}else this.domElement=(0,s.unsupported)();f=n.ratio||t.devicePixelRatio}return a(e,[{key:"init",value:function(){this.supported=!0,this.perScene=new c.Ubo([].concat(r(o.mat4.create()),r(o.mat4.create()),r(o.vec4.create()),r(o.vec4.create()),r(o.vec4.create())),0),this.perModel=new c.Ubo([].concat(r(o.mat4.create()),r(o.mat4.create())),1),this.directional=new c.Ubo(new Float32Array(12*u.MAX_DIRECTIONAL),2);var t=(0,i.getContext)();this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,256,256,0,t.RGBA,t.UNSIGNED_BYTE,null),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,256,256),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"setSize",value:function(t,e){if(this.supported){var n=t*f,r=e*f;(0,s.resize)(this.domElement,n,r,f)}}},{key:"setRatio",value:function(t){f=t}},{key:"changeProgram",value:function(t){var e=(0,i.getContext)();e.useProgram(t);var n=e.getUniformBlockIndex(t,"perScene"),r=e.getUniformBlockIndex(t,"perModel"),a=e.getUniformBlockIndex(t,"directional");e.uniformBlockBinding(t,n,this.perScene.boundLocation),e.uniformBlockBinding(t,r,this.perModel.boundLocation),a===this.directional.boundLocation&&e.uniformBlockBinding(t,a,this.directional.boundLocation)}},{key:"render",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.supported){var a=(0,i.getContext)();a.viewport(0,0,a.canvas.width,a.canvas.height),n&&(a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)),a.enable(a.DEPTH_TEST),a.enable(a.CULL_FACE),a.disable(a.BLEND),e.updateCameraMatrix(a.canvas.width,a.canvas.height),o.mat4.identity(p.view),o.mat4.lookAt(p.view,e.position.data,e.target,e.up),(d=t.traverse())&&(this.opaque=[],this.transparent=[],this.performance.opaque=0,this.performance.transparent=0,this.performance.vertices=0,this.performance.instances=0,this.sort(t)),this.perScene.bind(),this.perModel.bind(),this.directional.bind(),this.perScene.update([].concat(r(e.matrices.projection),r(p.view),[t.fog.start,t.fog.end,t.fog.density,t.fog.enable],r(t.fog.color),[(Date.now()-v)/1e3,0,0,0]));for(var u=0;u<t.directional.length;u++)this.directional.update([].concat(r(t.directional[u].position.data),[0]).concat([].concat(r(t.directional[u].color),[0]),[t.directional[u].intensity,0,0,0]),12*u);for(var s=0;s<this.opaque.length;s++)this.renderObject(this.opaque[s]);this.transparent.sort(function(t,e){return t.position.z-e.position.z});for(var c=0;c<this.transparent.length;c++)this.renderObject(this.transparent[c])}}},{key:"updateMatrices",value:function(t){o.mat4.identity(p.modelView),o.mat4.copy(p.modelView,t),o.mat4.invert(p.inversedModelView,p.modelView),o.mat4.transpose(p.inversedModelView,p.inversedModelView),o.mat4.identity(p.normal),o.mat4.copy(p.normal,p.inversedModelView)}},{key:"sort",value:function(t){for(var e=0;e<t.children.length;e++)this.sort(t.children[e]);!t.visible||t instanceof l.default||(t.transparent?(this.transparent.push(t),this.performance.transparent++):(this.opaque.push(t),this.performance.opaque++),t.attributes&&(this.performance.vertices+=t.attributes.a_position.value.length/3),t.isInstance&&(this.performance.instances+=t.instanceCount)),t.dirty.sorting=!1}},{key:"renderObject",value:function(t){null!==t.parent&&(this.updateMatrices(t.matrices.model),t.program?(h!==t.program&&(h=t.program,this.changeProgram(h)),t.bind(),this.perModel.update([].concat(r(t.matrices.model),r(p.normal))),t.update(),t.draw(),t.unbind()):t.init())}}]),e}();e.default=m}).call(e,n(43))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.resize=function(t,e,n,r){t.width=e,t.height=n,t.style.width=e/r+"px",t.style.height=n/r+"px"},e.unsupported=function(){var t=document.createElement("div");return t.innerHTML='Your browser doesn\'t support WebGL2.<br><a href="https://get.webgl.org/webgl2/">Get WebGL2</a>',t.style.display="table",t.style.margin="20px auto 0 auto",t.style.border="1px solid #333",t.style.backgroundColor="rgba(255, 255, 255, 0.1)",t.style.borderRadius="4px",t.style.padding="10px",t.style.fontFamily="monospace",t.style.fontSize="12px",t.style.textAlign="center",t}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.theme=e.theme||{font:"font-family:sans-serif;font-size:xx-small;font-weight:bold;line-height:15px;-moz-osx-font-smoothing: grayscale;-webkit-font-smoothing: antialiased;",color1:"#242424",color2:"#2a2a2a",color3:"#666",color4:"#999"};var n=document.createElement("div");n.style.cssText="position:fixed;bottom:0;left:0;min-width:80px;opacity:0.9;z-index:10000;",this.holder=document.createElement("div"),this.holder.style.cssText="padding:3px;background-color:"+this.theme.color1+";",n.appendChild(this.holder);var r=document.createElement("div");r.style.cssText=this.theme.font+";color:"+this.theme.color3+";",r.innerHTML="Performance",this.holder.appendChild(r),this.msTexts=[],this.domElement=n}return r(t,[{key:"rebuild",value:function(t){var e=this;this.msTexts=[],Object.keys(t).forEach(function(t){var n=document.createElement("div");n.style.cssText=e.theme.font+";color:"+e.theme.color4+";background-color:"+e.theme.color2+";",e.holder.appendChild(n),e.msTexts[t]=n})}},{key:"update",value:function(t){var e=this;Object.keys(this.msTexts).length!==Object.keys(t.performance).length&&this.rebuild(t.performance),Object.keys(t.performance).forEach(function(n){e.msTexts[n].textContent=n+": "+t.performance[n]})}}]),t}();e.default=a}])})}).call(e,n(1)(t))},function(t,e,n){"use strict";(function(t){var n,r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,u){"object"===o(e)&&"object"===o(t)?t.exports=u():(r=[],void 0!==(a="function"==typeof(n=u)?n.apply(e,r):n)&&(t.exports=a))}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return a}),e.setMatrixArrayType=function(t){a=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=1e-6;e.EPSILON=r;var a="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;e.RANDOM=o;var i=Math.PI/180},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(3),o=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=[],u={faces:(0,a.unflatten)(n,3),positions:(0,a.unflatten)(e,3)},s=Math.min(o,4);s-- >0;)u=this.subdivide(u);for(var c=0;c<u.positions.length;c++){var l=this.normalize(u.positions[c]),f=.5*(-Math.atan2(l[2],-l[0])/Math.PI+1),h=.5+Math.asin(l[1])/Math.PI;i.push([1-f,1-h])}e=u.positions;for(var d=0;d<e.length;d++)this.scale(e[d],r);var v={positions:(0,a.flatten)(u.positions),indices:(0,a.flatten)(u.faces),normals:null,uvs:(0,a.flatten)(i,2)};this.geometry={positions:v.positions,indices:v.indices,normals:(0,a.generateVertexNormals)(v.positions,v.indices),uvs:(0,a.flatten)(i,2)}}return r(t,[{key:"fixPoleUVs",value:function(t,e,n){function r(e,r,a,o){var c=n[a],l=n[o];n[r][0]=(c[0]+l[0])/2,s++,i.push(t[r].slice()),u.push(n[r].slice()),e[0]=s}var a=this.firstYIndex(t,1),o=this.firstYIndex(t,-1);if(-1!==a&&-1!==o){for(var i=t.slice(),u=n.slice(),s=i.length-1,c=0;c<e.length;c++){var l=e[c],f=l[0],h=l[1],d=l[2];f===a?r(l,a,h,d):f===o&&r(l,o,h,d)}t=i,n=u}}},{key:"firstYIndex",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Math.abs(r[1]-e)<=1e-4)return n}return-1}},{key:"normalize",value:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(var r=0;r<t.length;r++)t[r]/=e;return t}},{key:"scale",value:function(t,e){for(var n=0;n<t.length;n++)t[n]*=e;return t}},{key:"subdivide",value:function(t){function e(t,e){var n=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}(t,e),r=function(t){return t[0].toPrecision(6)+","+t[1].toPrecision(6)+","+t[2].toPrecision(6)}(n),a=i[r];return a||(i[r]=n,i[r])}for(var n=t.positions,r=t.faces,a=[],o=[],i={},u=0,s=0;s<r.length;s++){var c=r[s],l=c[0],f=c[1],h=c[2],d=n[l],v=n[f],p=n[h],m=e(d,v),b=e(v,p),_=e(p,d),M=o.indexOf(m);-1===M&&(M=u++,o.push(m));var g=o.indexOf(b);-1===g&&(g=u++,o.push(b));var y=o.indexOf(_);-1===y&&(y=u++,o.push(_));var x=o.indexOf(d);-1===x&&(x=u++,o.push(d));var E=o.indexOf(v);-1===E&&(E=u++,o.push(v));var w=o.indexOf(p);-1===w&&(w=u++,o.push(p)),a.push([x,M,y]),a.push([E,g,M]),a.push([w,y,g]),a.push([M,g,y])}return{faces:a,positions:o}}}]),t}();e.default=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(8),o=n(9),i=n(4),u=n(10),s=n(11),c=n(12),l=n(5),f=n(6);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return a}),n.d(e,"mat2d",function(){return o}),n.d(e,"mat3",function(){return i}),n.d(e,"mat4",function(){return u}),n.d(e,"quat",function(){return s}),n.d(e,"vec2",function(){return c}),n.d(e,"vec3",function(){return l}),n.d(e,"vec4",function(){return f})},function(t,e,n){function r(t){for(var e=[],n=0;n<t.length;n++)Array.isArray(t[n])||t[n]instanceof Float32Array?e=e.concat(r(t[n])):e.push(t[n]);return e}function a(t,e){for(var n=[],r=0;r<t.length;r+=e){for(var a=[],o=0;o<e;o++)a.push(t[r+o]);n.push(a)}return n}function o(t,e){for(var n=a(e,3),o=a(t,3),u=[],s=i.vec3.create(),c=i.vec3.create(),l=i.vec3.create(),f=void 0,h=void 0,d=void 0,v=0;v<n.length;v++){var p=n[v],m=p[0],b=p[1],_=p[2];f=o[m],h=o[b],d=o[_],i.vec3.subtract(s,d,h),i.vec3.subtract(c,f,h),i.vec3.cross(l,s,c),void 0===u[m]&&(u[m]=i.vec3.create()),void 0===u[b]&&(u[b]=i.vec3.create()),void 0===u[_]&&(u[_]=i.vec3.create()),i.vec3.add(u[m],u[m],l),i.vec3.add(u[b],u[b],l),i.vec3.add(u[_],u[_],l)}for(var M=0;M<u.length;M++)i.vec3.normalize(u[M],u[M]);return r(u)}Object.defineProperty(e,"__esModule",{value:!0}),e.flatten=r,e.unflatten=a,e.generateVertexNormals=o,e.mergeVertices=function(t){for(var e=a(t.positions,3),n={},i=[],u=[],s=Math.pow(10,4),c=0;c<e.length;c++){var l=e[c],f="\n            "+Math.round(l[0]*s)+"_\n            "+Math.round(l[1]*s)+"_\n            "+Math.round(l[2]*s)+"\n        ";void 0===n[f]?(n[f]=c,i.push(e[c]),u[c]=i.length-1):u[c]=u[n[f]]}for(var h=[],d=a(t.indices,3),v=0;v<d.length;v++){var p=d[v];p[0]=u[p[0]],p[1]=u[p[1]],p[2]=u[p[2]];for(var m=[p[0],p[1],p[2]],b=0;b<3;b++)if(m[b]===m[(b+1)%3]){h.push(v);break}}for(var _=h.length-1;_>=0;_--){var M=h[_];d.splice(M,1);for(var g=0;g<this.faceVertexUvs.length;g++)this.faceVertexUvs[g].splice(M,1)}var y=r(i),x=r(d);return{positions:new Float32Array(y),indices:new Uint16Array(x),normals:new Float32Array(o(y,x))}};var i=n(2)},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1],v=n[2],p=n[3],m=n[4],b=n[5],_=n[6],M=n[7],g=n[8];return t[0]=h*r+d*i+v*c,t[1]=h*a+d*u+v*l,t[2]=h*o+d*s+v*f,t[3]=p*r+m*i+b*c,t[4]=p*a+m*u+b*l,t[5]=p*o+m*s+b*f,t[6]=_*r+M*i+g*c,t[7]=_*a+M*u+g*l,t[8]=_*o+M*s+g*f,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,a,i,u,s,c){var l=new o.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=a,l[5]=i,l[6]=u,l[7]=s,l[8]=c,l},e.set=function(t,e,n,r,a,o,i,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=l*i-u*c,h=-l*o+u*s,d=c*o-i*s,v=n*f+r*h+a*d;return v?(v=1/v,t[0]=f*v,t[1]=(-l*r+a*c)*v,t[2]=(u*r-a*i)*v,t[3]=h*v,t[4]=(l*n-a*s)*v,t[5]=(-u*n+a*o)*v,t[6]=d*v,t[7]=(-c*n+r*s)*v,t[8]=(i*n-r*o)*v,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8];return t[0]=i*l-u*c,t[1]=a*c-r*l,t[2]=r*u-a*i,t[3]=u*s-o*l,t[4]=n*l-a*s,t[5]=a*o-n*u,t[6]=o*c-i*s,t[7]=r*s-n*c,t[8]=n*i-r*o,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8];return e*(c*o-i*s)+n*(-c*a+i*u)+r*(s*a-o*u)},e.multiply=r,e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=h*r+d*i+c,t[7]=h*a+d*u+l,t[8]=h*o+d*s+f,t},e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*s,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*s-h*o,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,b=o*s;return t[0]=1-f-v,t[3]=l-b,t[6]=h+m,t[1]=l+b,t[4]=1-c-v,t[7]=d-p,t[2]=h-m,t[5]=d+p,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*u-r*i,M=n*s-a*i,g=n*c-o*i,y=r*s-a*u,x=r*c-o*u,E=a*c-o*s,w=l*p-f*v,A=l*m-h*v,P=l*b-d*v,O=f*m-h*p,S=f*b-d*p,R=h*b-d*m,T=_*R-M*S+g*O+y*P-x*A+E*w;return T?(T=1/T,t[0]=(u*R-s*S+c*O)*T,t[1]=(s*P-i*R-c*A)*T,t[2]=(i*S-u*P+c*w)*T,t[3]=(a*S-r*R-o*O)*T,t[4]=(n*R-a*P+o*A)*T,t[5]=(r*P-n*S-o*w)*T,t[6]=(p*E-m*x+b*y)*T,t[7]=(m*g-v*E-b*M)*T,t[8]=(v*x-p*g+b*_)*T,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=e[0],d=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],M=e[7],g=e[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-p)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-_)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-M)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-g)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(){var t=new v.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){var r=new v.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function f(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new v.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=i,e.multiply=u,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=c,e.squaredDistance=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},e.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),l=i*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*c+a[0]*l,t[1]=e[1]*u+n[1]*s+r[1]*c+a[1]*l,t[2]=e[2]*u+n[2]*s+r[2]*c+a[2]*l,t},e.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,l=3*o*u,f=3*s*i,h=s*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+a[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+a[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+a[2]*h,t},e.random=function(t,e){e=e||1;var n=2*v.RANDOM()*Math.PI,r=2*v.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t},e.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){var n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);h(n,n),h(r,r);var a=d(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=e[0],i=e[1],u=e[2];return Math.abs(n-o)<=v.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var v=n(0),p=i;e.sub=p;var m=u;e.mul=m;var b=s;e.div=b;var _=c;e.dist=_;var M=l;e.sqrDist=M;var g=a;e.len=g;var y=f;e.sqrLen=y;var x=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}();e.forEach=x},function(t,e,n){function r(){var t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o}function l(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function f(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function h(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){var a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=s,e.squaredDistance=c,e.length=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-i)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))};var d=n(0),v=a;e.sub=v;var p=o;e.mul=p;var m=i;e.div=m;var b=s;e.dist=b;var _=c;e.sqrDist=_;var M=l;e.len=M;var g=f;e.sqrLen=g;var y=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();e.forEach=y},function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TorusKnot=e.Torus=e.Sphere=e.Box=e.Plane=e.Icosahedron=e.Dodecahedron=e.Octahedron=e.Hexahedron=e.Tetrahedron=e.utils=void 0;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(3)),o=r(n(13)),i=r(n(14)),u=r(n(15)),s=r(n(16)),c=r(n(17)),l=r(n(18)),f=r(n(19)),h=r(n(20)),d=r(n(21)),v=r(n(22));e.utils=a,e.Tetrahedron=o.default,e.Hexahedron=i.default,e.Octahedron=u.default,e.Dodecahedron=s.default,e.Icosahedron=c.default,e.Plane=l.default,e.Box=f.default,e.Sphere=h.default,e.Torus=d.default,e.TorusKnot=v.default},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*c+o*l,t[3]=a*c+i*l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,r){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=e[0],s=e[1],c=e[2],l=e[3];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],v=n[5];return t[0]=r*c+o*l,t[1]=a*c+i*l,t[2]=r*f+o*h,t[3]=a*f+i*h,t[4]=r*d+o*v+u,t[5]=a*d+i*v+s,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,r,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u},e.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=n*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-n*u)*s,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=a*l+i*c,t[2]=r*-c+o*l,t[3]=a*-c+i*l,t[4]=u,t[5]=s,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=a*c,t[2]=o*l,t[3]=i*l,t[4]=u,t[5]=s,t},e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*c+o*l+u,t[5]=a*c+i*l+s,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=e[0],l=e[1],f=e[2],h=e[3],d=e[4],v=e[5];return Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-v)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],m=e[13],b=e[14],_=e[15],M=n[0],g=n[1],y=n[2],x=n[3];return t[0]=M*r+g*u+y*f+x*p,t[1]=M*a+g*s+y*h+x*m,t[2]=M*o+g*c+y*d+x*b,t[3]=M*i+g*l+y*v+x*_,M=n[4],g=n[5],y=n[6],x=n[7],t[4]=M*r+g*u+y*f+x*p,t[5]=M*a+g*s+y*h+x*m,t[6]=M*o+g*c+y*d+x*b,t[7]=M*i+g*l+y*v+x*_,M=n[8],g=n[9],y=n[10],x=n[11],t[8]=M*r+g*u+y*f+x*p,t[9]=M*a+g*s+y*h+x*m,t[10]=M*o+g*c+y*d+x*b,t[11]=M*i+g*l+y*v+x*_,M=n[12],g=n[13],y=n[14],x=n[15],t[12]=M*r+g*u+y*f+x*p,t[13]=M*a+g*s+y*h+x*m,t[14]=M*o+g*c+y*d+x*b,t[15]=M*i+g*l+y*v+x*_,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,r,a,i,u,s,c,l,f,h,d,v,p,m){var b=new o.ARRAY_TYPE(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=a,b[5]=i,b[6]=u,b[7]=s,b[8]=c,b[9]=l,b[10]=f,b[11]=h,b[12]=d,b[13]=v,b[14]=p,b[15]=m,b},e.set=function(t,e,n,r,a,o,i,u,s,c,l,f,h,d,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=v,t[14]=p,t[15]=m,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*u-r*i,M=n*s-a*i,g=n*c-o*i,y=r*s-a*u,x=r*c-o*u,E=a*c-o*s,w=l*p-f*v,A=l*m-h*v,P=l*b-d*v,O=f*m-h*p,S=f*b-d*p,R=h*b-d*m,T=_*R-M*S+g*O+y*P-x*A+E*w;return T?(T=1/T,t[0]=(u*R-s*S+c*O)*T,t[1]=(a*S-r*R-o*O)*T,t[2]=(p*E-m*x+b*y)*T,t[3]=(h*x-f*E-d*y)*T,t[4]=(s*P-i*R-c*A)*T,t[5]=(n*R-a*P+o*A)*T,t[6]=(m*g-v*E-b*M)*T,t[7]=(l*E-h*g+d*M)*T,t[8]=(i*S-u*P+c*w)*T,t[9]=(r*P-n*S-o*w)*T,t[10]=(v*x-p*g+b*_)*T,t[11]=(f*g-l*x-d*_)*T,t[12]=(u*A-i*O-s*w)*T,t[13]=(n*O-r*A+a*w)*T,t[14]=(p*M-v*y-m*_)*T,t[15]=(l*y-f*M+h*_)*T,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15];return t[0]=u*(h*b-d*m)-f*(s*b-c*m)+p*(s*d-c*h),t[1]=-(r*(h*b-d*m)-f*(a*b-o*m)+p*(a*d-o*h)),t[2]=r*(s*b-c*m)-u*(a*b-o*m)+p*(a*c-o*s),t[3]=-(r*(s*d-c*h)-u*(a*d-o*h)+f*(a*c-o*s)),t[4]=-(i*(h*b-d*m)-l*(s*b-c*m)+v*(s*d-c*h)),t[5]=n*(h*b-d*m)-l*(a*b-o*m)+v*(a*d-o*h),t[6]=-(n*(s*b-c*m)-i*(a*b-o*m)+v*(a*c-o*s)),t[7]=n*(s*d-c*h)-i*(a*d-o*h)+l*(a*c-o*s),t[8]=i*(f*b-d*p)-l*(u*b-c*p)+v*(u*d-c*f),t[9]=-(n*(f*b-d*p)-l*(r*b-o*p)+v*(r*d-o*f)),t[10]=n*(u*b-c*p)-i*(r*b-o*p)+v*(r*c-o*u),t[11]=-(n*(u*d-c*f)-i*(r*d-o*f)+l*(r*c-o*u)),t[12]=-(i*(f*m-h*p)-l*(u*m-s*p)+v*(u*h-s*f)),t[13]=n*(f*m-h*p)-l*(r*m-a*p)+v*(r*h-a*f),t[14]=-(n*(u*m-s*p)-i*(r*m-a*p)+v*(r*s-a*u)),t[15]=n*(u*h-s*f)-i*(r*h-a*f)+l*(r*s-a*u),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],v=t[13],p=t[14],m=t[15];return(e*i-n*o)*(f*m-h*p)-(e*u-r*o)*(l*m-h*v)+(e*s-a*o)*(l*p-f*v)+(n*u-r*i)*(c*m-h*d)-(n*s-a*i)*(c*p-f*d)+(r*s-a*u)*(c*v-l*d)},e.multiply=r,e.translate=function(t,e,n){var r=n[0],a=n[1],o=n[2],i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,b=void 0;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*o+e[12],t[13]=e[1]*r+e[5]*a+e[9]*o+e[13],t[14]=e[2]*r+e[6]*a+e[10]*o+e[14],t[15]=e[3]*r+e[7]*a+e[11]*o+e[15]):(i=e[0],u=e[1],s=e[2],c=e[3],l=e[4],f=e[5],h=e[6],d=e[7],v=e[8],p=e[9],m=e[10],b=e[11],t[0]=i,t[1]=u,t[2]=s,t[3]=c,t[4]=l,t[5]=f,t[6]=h,t[7]=d,t[8]=v,t[9]=p,t[10]=m,t[11]=b,t[12]=i*r+l*a+v*o+e[12],t[13]=u*r+f*a+p*o+e[13],t[14]=s*r+h*a+m*o+e[14],t[15]=c*r+d*a+b*o+e[15]),t},e.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,r){var a=r[0],i=r[1],u=r[2],s=Math.sqrt(a*a+i*i+u*u),c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,b=void 0,_=void 0,M=void 0,g=void 0,y=void 0,x=void 0,E=void 0,w=void 0,A=void 0,P=void 0,O=void 0,S=void 0,R=void 0,T=void 0,L=void 0,I=void 0;return Math.abs(s)<o.EPSILON?null:(s=1/s,a*=s,i*=s,u*=s,c=Math.sin(n),l=Math.cos(n),f=1-l,h=e[0],d=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],M=e[7],g=e[8],y=e[9],x=e[10],E=e[11],w=a*a*f+l,A=i*a*f+u*c,P=u*a*f-i*c,O=a*i*f-u*c,S=i*i*f+l,R=u*i*f+a*c,T=a*u*f+i*c,L=i*u*f-a*c,I=u*u*f+l,t[0]=h*w+m*A+g*P,t[1]=d*w+b*A+y*P,t[2]=v*w+_*A+x*P,t[3]=p*w+M*A+E*P,t[4]=h*O+m*S+g*R,t[5]=d*O+b*S+y*R,t[6]=v*O+_*S+x*R,t[7]=p*O+M*S+E*R,t[8]=h*T+m*L+g*I,t[9]=d*T+b*L+y*I,t[10]=v*T+_*L+x*I,t[11]=p*T+M*L+E*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*r,t[5]=i*a+l*r,t[6]=u*a+f*r,t[7]=s*a+h*r,t[8]=c*a-o*r,t[9]=l*a-i*r,t[10]=f*a-u*r,t[11]=h*a-s*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-c*r,t[1]=i*a-l*r,t[2]=u*a-f*r,t[3]=s*a-h*r,t[8]=o*r+c*a,t[9]=i*r+l*a,t[10]=u*r+f*a,t[11]=s*r+h*a,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*r,t[1]=i*a+l*r,t[2]=u*a+f*r,t[3]=s*a+h*r,t[4]=c*a-o*r,t[5]=l*a-i*r,t[6]=f*a-u*r,t[7]=h*a-s*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var r=n[0],a=n[1],i=n[2],u=Math.sqrt(r*r+a*a+i*i),s=void 0,c=void 0,l=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,r*=u,a*=u,i*=u,s=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=r*r*l+c,t[1]=a*r*l+i*s,t[2]=i*r*l-a*s,t[3]=0,t[4]=r*a*l-i*s,t[5]=a*a*l+c,t[6]=i*a*l+r*s,t[7]=0,t[8]=r*i*l+a*s,t[9]=a*i*l-r*s,t[10]=i*i*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,s=a+a,c=o+o,l=r*u,f=r*s,h=r*c,d=a*s,v=a*c,p=o*c,m=i*u,b=i*s,_=i*c;return t[0]=1-(d+p),t[1]=f+_,t[2]=h-b,t[3]=0,t[4]=f-_,t[5]=1-(l+p),t[6]=v+m,t[7]=0,t[8]=h+b,t[9]=v-m,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[4],i=e[5],u=e[6],s=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+c*c+l*l),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,c=o+o,l=i+i,f=a*s,h=a*c,d=a*l,v=o*c,p=o*l,m=i*l,b=u*s,_=u*c,M=u*l,g=r[0],y=r[1],x=r[2];return t[0]=(1-(v+m))*g,t[1]=(h+M)*g,t[2]=(d-_)*g,t[3]=0,t[4]=(h-M)*y,t[5]=(1-(f+m))*y,t[6]=(p+b)*y,t[7]=0,t[8]=(d+_)*x,t[9]=(p-b)*x,t[10]=(1-(f+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],s=e[3],c=o+o,l=i+i,f=u+u,h=o*c,d=o*l,v=o*f,p=i*l,m=i*f,b=u*f,_=s*c,M=s*l,g=s*f,y=r[0],x=r[1],E=r[2],w=a[0],A=a[1],P=a[2];return t[0]=(1-(p+b))*y,t[1]=(d+g)*y,t[2]=(v-M)*y,t[3]=0,t[4]=(d-g)*x,t[5]=(1-(h+b))*x,t[6]=(m+_)*x,t[7]=0,t[8]=(v+M)*E,t[9]=(m-_)*E,t[10]=(1-(h+p))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*A+t[8]*P),t[13]=n[1]+A-(t[1]*w+t[5]*A+t[9]*P),t[14]=n[2]+P-(t[2]*w+t[6]*A+t[10]*P),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,b=o*s;return t[0]=1-f-v,t[1]=l+b,t[2]=h-m,t[3]=0,t[4]=l-b,t[5]=1-c-v,t[6]=d+p,t[7]=0,t[8]=h+m,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),s=1/(a-r),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),s=1/(r-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*s,t[14]=(i+o)*c,t[15]=1,t},e.lookAt=function(t,e,n,r){var a=void 0,i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=e[0],m=e[1],b=e[2],_=r[0],M=r[1],g=r[2],y=n[0],x=n[1],E=n[2];return Math.abs(p-y)<o.EPSILON&&Math.abs(m-x)<o.EPSILON&&Math.abs(b-E)<o.EPSILON?mat4.identity(t):(f=p-y,h=m-x,d=b-E,v=1/Math.sqrt(f*f+h*h+d*d),f*=v,h*=v,d*=v,a=M*d-g*h,i=g*f-_*d,u=_*h-M*f,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),s=h*u-d*i,c=d*a-f*u,l=f*i-h*a,(v=Math.sqrt(s*s+c*c+l*l))?(s*=v=1/v,c*=v,l*=v):(s=0,c=0,l=0),t[0]=a,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=h,t[7]=0,t[8]=u,t[9]=l,t[10]=d,t[11]=0,t[12]=-(a*p+i*m+u*b),t[13]=-(s*p+c*m+l*b),t[14]=-(f*p+h*m+d*b),t[15]=1,t)},e.targetTo=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=r[0],s=r[1],c=r[2],l=a-n[0],f=o-n[1],h=i-n[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var v=s*h-c*f,p=c*l-u*h,m=u*f-s*l;return t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=f*m-h*p,t[5]=h*v-l*m,t[6]=l*p-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],v=t[11],p=t[12],m=t[13],b=t[14],_=t[15],M=e[0],g=e[1],y=e[2],x=e[3],E=e[4],w=e[5],A=e[6],P=e[7],O=e[8],S=e[9],R=e[10],T=e[11],L=e[12],I=e[13],C=e[14],N=e[15];return Math.abs(n-M)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(r-g)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-y)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(i-x)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-E)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-w)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-A)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-P)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(f-O)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-S)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-R)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(v-T)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(p-L)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(m-I)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(b-C)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(_-N)<=o.EPSILON*Math.max(1,Math.abs(_),Math.abs(N))};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(){var t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function o(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*l+i*u+a*c-o*s,t[1]=a*l+i*s+o*u-r*c,t[2]=o*l+i*c+r*s-a*u,t[3]=i*l-r*u-a*s-o*c,t}function i(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=n[0],c=n[1],l=n[2],f=n[3],h=void 0,d=void 0,v=void 0,p=void 0,m=void 0;return(d=a*s+o*c+i*l+u*f)<0&&(d=-d,s=-s,c=-c,l=-l,f=-f),1-d>1e-6?(h=Math.acos(d),v=Math.sin(h),p=Math.sin((1-r)*h)/v,m=Math.sin(r*h)/v):(p=1-r,m=r),t[0]=p*a+m*s,t[1]=p*o+m*c,t[2]=p*i+m*l,t[3]=p*u+m*f,t}function u(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+a]+e[3*a+o])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=a,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=o,e.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},e.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},e.slerp=i,e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var o=Math.sin(e),i=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*s*l-i*u*c,t[1]=i*u*l+o*s*c,t[2]=i*s*c-o*u*l,t[3]=i*s*l+o*u*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=n(0),c=n(4),l=n(5),f=n(6),h=f.clone;e.clone=h;var d=f.fromValues;e.fromValues=d;var v=f.copy;e.copy=v;var p=f.set;e.set=p;var m=f.add;e.add=m;var b=o;e.mul=b;var _=f.scale;e.scale=_;var M=f.dot;e.dot=M;var g=f.lerp;e.lerp=g;var y=f.length;e.length=y;var x=y;e.len=x;var E=f.squaredLength;e.squaredLength=E;var w=E;e.sqrLen=w;var A=f.normalize;e.normalize=A;var P=f.exactEquals;e.exactEquals=P;var O=f.equals;e.equals=O;var S=function(){var t=l.create(),e=l.fromValues(1,0,0),n=l.fromValues(0,1,0);return function(r,o,i){var u=l.dot(o,i);return u<-.999999?(l.cross(t,e,o),l.len(t)<1e-6&&l.cross(t,n,o),l.normalize(t,t),a(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(l.cross(t,o,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,A(r,r))}}();e.rotationTo=S;var R=function(){var t=r(),e=r();return function(n,r,a,o,u,s){return i(t,r,u,s),i(e,a,o,s),i(n,t,e,2*s*(1-s)),n}}();e.sqlerp=R;var T=function(){var t=c.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],A(e,u(e,t))}}();e.setAxes=T},function(t,e,n){function r(){var t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function c(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function l(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new f.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=s,e.length=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},e.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var f=n(0),h=c;e.len=h;var d=a;e.sub=d;var v=o;e.mul=v;var p=i;e.div=p;var m=u;e.dist=m;var b=s;e.sqrDist=b;var _=l;e.sqrLen=_;var M=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}();e.forEach=M},function(t,e,n){function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],n,a));return t=o.geometry,r(o,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=i},function(t,e,n){function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var o=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],i=0;i<o.length;i+=3)o[i+0]*=n,o[i+1]*=n,o[i+2]*=n;var u=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o,[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],n,a));return t=u.geometry,r(u,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=i},function(t,e,n){function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],n,a));return t=o.geometry,r(o,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=i},function(t,e,n){function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=(1+Math.sqrt(5))/2,i=1/o,u=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-o,0,-i,o,0,i,-o,0,i,o,-i,-o,0,-i,o,0,i,-o,0,i,o,0,-o,0,-i,o,0,-i,-o,0,i,o,0,i],s=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],n,a));return t=s.geometry,r(s,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=i},function(t,e,n){function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":o(e))&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),i=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=.5+Math.sqrt(5)/2,i=[-1,+o,0,1,+o,0,-1,-o,0,1,-o,0,0,-1,+o,0,1,+o,0,-1,-o,0,1,-o,+o,0,-1,+o,0,1,-o,0,-1,-o,0,1],u=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],n,a));return t=u.geometry,r(u,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),e}();e.default=i},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"XY";!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var i=[],u=[],s=[],c=[],l=0,f=2*e,h=2*n,d=f/r,v=h/a,p=.5*-f,m=.5*-h,b=1/r,_=1/a,M=0;M<a;M++)for(var g=0;g<r;g++){var y=d*g+p,x=v*M+m,E=g/r,w=M/a;switch(o){case"XZ":i=(i=(i=(i=i.concat([y,0,x])).concat([y+d,0,x])).concat([y+d,0,x+v])).concat([y,0,x+v]),s=(s=(s=(s=s.concat([0,1,0])).concat([0,1,0])).concat([0,1,0])).concat([0,1,0]),c=(c=(c=(c=c.concat([E,1-w])).concat([E+b,1-w])).concat([E+b,1-(w+_)])).concat([E,1-(w+_)]);break;case"YZ":i=(i=(i=(i=i.concat([0,x,y])).concat([0,x,y+d])).concat([0,x+v,y+d])).concat([0,x+v,y]),s=(s=(s=(s=s.concat([1,0,0])).concat([1,0,0])).concat([1,0,0])).concat([1,0,0]),c=(c=(c=(c=c.concat([1-E,w])).concat([1-(E+b),w])).concat([1-(E+b),w+_])).concat([1-E,w+_]);break;default:i=(i=(i=(i=i.concat([y,x,0])).concat([y+d,x,0])).concat([y+d,x+v,0])).concat([y,x+v,0]),s=(s=(s=(s=s.concat([0,0,1])).concat([0,0,1])).concat([0,0,1])).concat([0,0,1]),c=(c=(c=(c=c.concat([E,w])).concat([E+b,w])).concat([E+b,w+_])).concat([E,w+_])}u.push(4*l+0),u.push(4*l+1),u.push(4*l+2),u.push(4*l+0),u.push(4*l+2),u.push(4*l+3),l++}return{positions:i,indices:u,normals:s,uvs:c}}},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var a=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],o=0;o<a.length;o+=3)a[o+0]*=e,a[o+1]*=n,a[o+2]*=r;return{positions:a,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]}}},function(t,e,n){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2);e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*-Math.PI,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Math.PI,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var l=[],f=[],h=[],d=[],v=a.vec3.create(),p=a.vec3.create(),m=s+c,b=0,_=[],M=0;M<=o;M++){for(var g=[],y=M/o,x=0;x<=n;x++){var E=x/n;v[0]=-e*Math.cos(i+E*u)*Math.sin(s+y*c),v[1]=e*Math.cos(s+y*c),v[2]=e*Math.sin(i+E*u)*Math.sin(s+y*c),l.push.apply(l,r(v)),a.vec3.normalize(p,v),h.push.apply(h,r(p)),d.push(E,1-y),g.push(b++)}_.push(g)}for(var w=0;w<o;w++)for(var A=0;A<n;A++){var P=_[w][A+1],O=_[w][A],S=_[w+1][A],R=_[w+1][A+1];(0!==w||s>0)&&f.push(P,O,R),(w!==o-1||m<Math.PI)&&f.push(O,S,R)}return{positions:l,indices:f,normals:h,uvs:d}}},function(t,e,n){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2);e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.375,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);for(var s=[],c=[],l=[],f=[],h=a.vec3.create(),d=a.vec3.create(),v=a.vec3.create(),p=0;p<=i;p++)for(var m=0;m<=o;m++){var b=m/o*u,_=p/i*Math.PI*2;d[0]=(e+n*Math.cos(_))*Math.cos(b),d[1]=(e+n*Math.cos(_))*Math.sin(b),d[2]=n*Math.sin(_),s.push.apply(s,r(d)),h[0]=e*Math.cos(b),h[1]=e*Math.sin(b),a.vec3.subtract(v,d,h),a.vec3.normalize(v,v),l.push.apply(l,r(v)),f.push(m/o),f.push(p/i)}for(var M=1;M<=i;M++)for(var g=1;g<=o;g++){var y=(o+1)*M+(g-1),x=(o+1)*(M-1)+(g-1),E=(o+1)*(M-1)+g,w=(o+1)*M+g;c.push(y,x,w),c.push(x,E,w)}return{positions:s,indices:c,normals:l,uvs:f}}},function(t,e,n){function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.375,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var c=[],l=[],f=[],h=[],d=o.vec3.create(),v=o.vec3.create(),p=o.vec3.create(),m=o.vec3.create(),b=o.vec3.create(),_=o.vec3.create(),M=o.vec3.create(),g=0;g<=a;g++){var y=g/a*u*Math.PI*2;this.calculatePositionOnCurve(y,u,s,e,p),this.calculatePositionOnCurve(y+.01,u,s,e,m),o.vec3.subtract(_,m,p),o.vec3.add(M,m,p),o.vec3.cross(b,_,M),o.vec3.cross(M,b,_),o.vec3.normalize(b,b),o.vec3.normalize(M,M);for(var x=0;x<=i;x++){var E=x/i*Math.PI*2,w=-n*Math.cos(E),A=n*Math.sin(E);d[0]=p[0]+(w*M[0]+A*b[0]),d[1]=p[1]+(w*M[1]+A*b[1]),d[2]=p[2]+(w*M[2]+A*b[2]),c.push.apply(c,r(d)),o.vec3.subtract(v,d,p),o.vec3.normalize(v,v),f.push.apply(f,r(v)),h.push(g/a,x/i)}}for(var P=1;P<=a;P++)for(var O=1;O<=i;O++){var S=(i+1)*(P-1)+(O-1),R=(i+1)*P+(O-1),T=(i+1)*P+O,L=(i+1)*(P-1)+O;l.push(S,R,L),l.push(R,T,L)}return{positions:c,indices:l,normals:f,uvs:h}}return a(t,[{key:"calculatePositionOnCurve",value:function(t,e,n,r,a){var o=Math.cos(t),i=Math.sin(t),u=n/e*t,s=Math.cos(u);a[0]=r*(2+s)*.5*o,a[1]=r*(2+s)*i*.5,a[2]=r*Math.sin(u)*.5}}]),t}();e.default=i}])})}).call(e,n(1)(t))},,,,,,,,,,,function(t,e,n){"use strict";(function(t){var e=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(n(16)),a=n(3),o=n(4),i=n(19),u=a.chunks.UBO,s=a.chunks.FOG,c=a.chunks.LIGHT;new(function(){function n(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.resize=function(){e.renderer.setSize(t.innerWidth,t.innerHeight),e.renderer.setRatio(t.devicePixelRatio)},this.update=function(){e.model.rotation.x+=.01,e.model.rotation.y+=.02,e.controls.update(),e.renderer.render(e.scene,e.camera),e.performance.update(e.renderer),requestAnimationFrame(e.update)},t.addEventListener("resize",this.resize,!1),this.setup(),this.init(),this.resize(),this.update()}return e(n,[{key:"setup",value:function(){this.renderer=new a.Renderer,document.body.appendChild(this.renderer.domElement),this.scene=new a.Scene,this.scene.fog.enable=!0,this.camera=new a.cameras.Perspective,this.camera.position.set(0,100,300),this.controls=new i.Orbit(this.camera,this.renderer.domElement),this.performance=new a.Performance,document.body.appendChild(this.performance.domElement)}},{key:"init",value:function(){var t=this;this.settings={n1_1:.2,n2_1:1.7,n3_1:1.7,m_1:7,a_1:1,b_1:1,n1_2:.2,n2_2:1.7,n3_2:1.7,m_2:7,a_2:1,b_2:1};var e=new r.default.GUI;e.add(this.settings,"n1_1",0,2).onChange(function(){t.model.uniforms.n1_1.value=t.settings.n1_1}),e.add(this.settings,"n2_1",0,10).onChange(function(){t.model.uniforms.n2_1.value=t.settings.n2_1}),e.add(this.settings,"n3_1",0,10).onChange(function(){t.model.uniforms.n3_1.value=t.settings.n3_1}),e.add(this.settings,"m_1",0,10).onChange(function(){t.model.uniforms.m_1.value=t.settings.m_1}),e.add(this.settings,"a_1",1,2).onChange(function(){t.model.uniforms.a_1.value=t.settings.a_1}),e.add(this.settings,"b_1",1,2).onChange(function(){t.model.uniforms.b_1.value=t.settings.b_1}),e.add(this.settings,"n1_2",0,2).onChange(function(){t.model.uniforms.n1_2.value=t.settings.n1_2}),e.add(this.settings,"n2_2",0,10).onChange(function(){t.model.uniforms.n2_2.value=t.settings.n2_2}),e.add(this.settings,"n3_2",0,10).onChange(function(){t.model.uniforms.n3_2.value=t.settings.n3_2}),e.add(this.settings,"m_2",0,10).onChange(function(){t.model.uniforms.m_2.value=t.settings.m_2}),e.add(this.settings,"a_2",1,2).onChange(function(){t.model.uniforms.a_2.value=t.settings.a_2}),e.add(this.settings,"b_2",1,2).onChange(function(){t.model.uniforms.b_2.value=t.settings.b_2});var n="#version 300 es\n            in vec3 a_position;\n            in vec3 a_normal;\n            in vec2 a_uv;\n\n            "+u.scene()+"\n            "+u.model()+"\n\n            uniform float n1_1;\n            uniform float n2_1;\n            uniform float n3_1;\n            uniform float m_1;\n            uniform float a_1;\n            uniform float b_1;\n\n            uniform float n1_2;\n            uniform float n2_2;\n            uniform float n3_2;\n            uniform float m_2;\n            uniform float a_2;\n            uniform float b_2;\n\n            out vec3 fragVertexEc;\n            out vec2 v_uv;\n            out vec3 v_normal;\n\n            float supershape(float angle, float n1, float n2, float n3, float m, float a, float b) {\n                float t1 = abs(cos(angle * m * 0.25) / a);\n                float t2 = abs(sin(angle * m * 0.25) / b);\n                float t3 = pow(t1, n2) + pow(t2, n3);\n                return abs(pow(t3, - 1.0 / n1));\n            }\n\n            vec3 superPositionForPosition(vec3 p) {\n                float r = length(p);\n\n                float lon = atan(p.y, p.x);\n                float lat = r == 0.0 ? 0.0 : asin(p.z / r);\n\n                float superRadiusPhi = supershape(lon, n1_1, n2_1, n3_1, m_1, a_1, b_1);\n                float superRadiusTheta = supershape(lat, n1_2, n2_2, n3_2, m_2, a_2, b_2);\n\n                p.x = r * superRadiusPhi * cos(lon) * superRadiusTheta * cos(lat);\n                p.y = r * superRadiusPhi * sin(lon) * superRadiusTheta * cos(lat);\n                p.z = r * superRadiusTheta * sin(lat);\n\n                return p;\n            }\n\n            void main() {\n                vec4 position = projectionMatrix * viewMatrix * modelMatrix * vec4(superPositionForPosition(a_position), 1.0);;\n                gl_Position = position;\n                fragVertexEc = position.xyz;\n                v_uv = a_uv;\n                v_normal = normalize(mat3(normalMatrix) * a_normal);\n            }\n        ",i="#version 300 es\n            precision highp float;\n            precision highp int;\n\n            in vec3 fragVertexEc;\n            in vec2 v_uv;\n            in vec3 v_normal;\n\n            "+u.scene()+"\n            "+u.model()+"\n            "+u.lights()+"\n\n            out vec4 outColor;\n\n            void main() {\n                vec3 v_normal = normalize(cross(dFdx(fragVertexEc), dFdy(fragVertexEc)));\n\n                vec4 base = vec4(v_uv, 0.0, 0.0);\n                base += vec4(vec3(1.0), 1.0);\n\n                "+c.factory()+"\n                "+s.linear()+"\n\n                outColor = base;\n            }\n        ",l=new o.Icosahedron(20,3);this.model=new a.Model,this.model.setAttribute("a_position","vec3",new Float32Array(l.positions)),this.model.setIndex(new Uint16Array(l.indices)),this.model.setAttribute("a_normal","vec3",new Float32Array(l.normals)),this.model.setUniform("n1_1","float",this.settings.n1_1),this.model.setUniform("n2_1","float",this.settings.n2_1),this.model.setUniform("n3_1","float",this.settings.n3_1),this.model.setUniform("m_1","float",this.settings.m_1),this.model.setUniform("a_1","float",this.settings.a_1),this.model.setUniform("b_1","float",this.settings.b_1),this.model.setUniform("n1_2","float",this.settings.n1_2),this.model.setUniform("n2_2","float",this.settings.n2_2),this.model.setUniform("n3_2","float",this.settings.n3_2),this.model.setUniform("m_2","float",this.settings.m_2),this.model.setUniform("a_2","float",this.settings.a_2),this.model.setUniform("b_2","float",this.settings.b_2),this.model.setShader(n,i),this.scene.add(this.model)}}]),n}())}).call(e,n(2))},function(t,e,n){t.exports=n(17),t.exports.color=n(18)},function(t,e){var n=t.exports=n||{};n.gui=n.gui||{},n.utils=n.utils||{},n.controllers=n.controllers||{},n.dom=n.dom||{},n.color=n.color||{},n.utils.css={load:function(t,e){var n=(e=e||document).createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.getElementsByTagName("head")[0].appendChild(n)},inject:function(t,e){e=e||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(n)}},n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),r=t.length-1;r>=0;r--)n=[t[r].apply(this,n)];return n[0]}},each:function(e,n,r){if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===e.length+0){for(var a=0,o=e.length;a<o;a++)if(a in e&&n.call(r,e[a],a)===this.BREAK)return}else for(var a in e)if(n.call(r,e[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onChange=void 0,this.__onFinishChange=void 0};return n.utils.common.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(),n.dom.dom=function(t){function e(e){if("0"===e||t.isUndefined(e))return 0;var n=e.match(r);return t.isNull(n)?0:parseFloat(n[1])}var n={};t.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,r){t.each(e,function(t){n[t]=r})});var r=/(\d+(\.\d+)?)px/,a={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(e,n,r){t.isUndefined(n)&&(n=!0),t.isUndefined(r)&&(r=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,r,a,o){a=a||{};var i=n[r];if(!i)throw new Error("Event type "+r+" not supported.");var u=document.createEvent(i);switch(i){case"MouseEvents":var s=a.x||a.clientX||0,c=a.y||a.clientY||0;u.initMouseEvent(r,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,s,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var l=u.initKeyboardEvent||u.initKeyEvent;t.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),l(r,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break;default:u.initEvent(r,a.bubbles||!1,a.cancelable||!0)}t.defaults(u,o),e.dispatchEvent(u)},bind:function(t,e,n,r){return r=r||!1,t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on"+e,n),a},unbind:function(t,e,n,r){return r=r||!1,t.removeEventListener?t.removeEventListener(e,n,r):t.detachEvent&&t.detachEvent("on"+e,n),a},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var n=t.className.split(/ +/);-1==n.indexOf(e)&&(n.push(e),t.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return a},removeClass:function(t,e){if(e)if(void 0===t.className);else if(t.className===e)t.removeAttribute("class");else{var n=t.className.split(/ +/),r=n.indexOf(e);-1!=r&&(n.splice(r,1),t.className=n.join(" "))}else t.className=void 0;return a},hasClass:function(t,e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){var n=getComputedStyle(t);return e(n["border-left-width"])+e(n["border-right-width"])+e(n["padding-left"])+e(n["padding-right"])+e(n.width)},getHeight:function(t){var n=getComputedStyle(t);return e(n["border-top-width"])+e(n["border-bottom-width"])+e(n["padding-top"])+e(n["padding-bottom"])+e(n.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)do{e.left+=t.offsetLeft,e.top+=t.offsetTop}while(t=t.offsetParent);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return a}(n.utils.common),n.controllers.OptionController=function(t,e,n){var r=function(t,a,o){r.superclass.call(this,t,a);var i=this;if(this.__select=document.createElement("select"),n.isArray(o)){var u={};n.each(o,function(t){u[t]=t}),o=u}n.each(o,function(t,e){var n=document.createElement("option");n.innerHTML=e,n.setAttribute("value",t),i.__select.appendChild(n)}),this.updateDisplay(),e.bind(this.__select,"change",function(){var t=this.options[this.selectedIndex].value;i.setValue(t)}),this.domElement.appendChild(this.__select)};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),e},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.NumberController=function(t,e){var n=function(t,r,a){n.superclass.call(this,t,r),a=a||{},this.__min=a.min,this.__max=a.max,this.__step=a.step,e.isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=function(t){return(t=t.toString()).indexOf(".")>-1?t.length-t.indexOf(".")-1:0}(this.__impliedStep)};return n.superclass=t,e.extend(n.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),n.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),n}(n.controllers.Controller,n.utils.common),n.controllers.NumberControllerBox=function(t,e,n){var r=function(t,a,o){function i(){var t=parseFloat(l.__input.value);n.isNaN(t)||l.setValue(t)}function u(t){var e=c-t.clientY;l.setValue(l.getValue()+e*l.__impliedStep),c=t.clientY}function s(){e.unbind(window,"mousemove",u),e.unbind(window,"mouseup",s)}this.__truncationSuspended=!1,r.superclass.call(this,t,a,o);var c,l=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"change",i),e.bind(this.__input,"blur",function(){i(),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}),e.bind(this.__input,"mousedown",function(t){e.bind(window,"mousemove",u),e.bind(window,"mouseup",s),c=t.clientY}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&(l.__truncationSuspended=!0,this.blur(),l.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(this.getValue(),this.__precision),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.NumberController,n.dom.dom,n.utils.common),n.controllers.NumberControllerSlider=function(t,e,n,r,a){var o=function(t,n,r,a,i){function u(t){t.preventDefault();var n=e.getOffset(c.__background),r=e.getWidth(c.__background);return c.setValue(function(t,e,n,r,a){return r+(t-e)/(n-e)*(a-r)}(t.clientX,n.left,n.left+r,c.__min,c.__max)),!1}function s(){e.unbind(window,"mousemove",u),e.unbind(window,"mouseup",s),c.__onFinishChange&&c.__onFinishChange.call(c,c.getValue())}o.superclass.call(this,t,n,{min:r,max:a,step:i});var c=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),e.bind(this.__background,"mousedown",function(t){e.bind(window,"mousemove",u),e.bind(window,"mouseup",s),u(t)}),e.addClass(this.__background,"slider"),e.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=t,o.useDefaultStyles=function(){n.inject(".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},r.extend(o.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",o.superclass.prototype.updateDisplay.call(this)}}),o}(n.controllers.NumberController,n.dom.dom,n.utils.css,n.utils.common),n.controllers.FunctionController=function(t,e,n){var r=function(t,n,a){r.superclass.call(this,t,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===a?"Fire":a,e.bind(this.__button,"click",function(t){return t.preventDefault(),o.fire(),!1}),e.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=t,n.extend(r.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.BooleanController=function(t,e,n){var r=function(t,n){r.superclass.call(this,t,n);var a=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),e.bind(this.__checkbox,"change",function(){a.setValue(!a.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){var e=r.superclass.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),e},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.color.interpret=function(t,e){var n,r,a=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(a,function(a){if(a.litmus(t))return e.each(a.conversions,function(a,o){if(n=a.read(t),!1===r&&!1!==n)return r=n,n.conversionName=o,n.conversion=a,e.BREAK}),e.BREAK}),r}}(n.color.toString,n.utils.common),n.GUI=n.gui.GUI=function(t,e,n,r,a,o,i,u,s,c,l,f,h,d,v){function p(t,e,n,c){if(void 0===e[n])throw new Error("Object "+e+' has no property "'+n+'"');var f;if(c.color)f=new l(e,n);else{var h=[e,n].concat(c.factoryArgs);f=r.apply(t,h)}c.before instanceof a&&(c.before=c.before.__li),b(t,f),d.addClass(f.domElement,"c");var _=document.createElement("span");d.addClass(_,"property-name"),_.innerHTML=f.property;var M=document.createElement("div");M.appendChild(_),M.appendChild(f.domElement);var g=m(t,M,c.before);return d.addClass(g,L.CLASS_CONTROLLER_ROW),d.addClass(g,typeof f.getValue()),function(t,e,n){if(n.__li=e,n.__gui=t,v.extend(n,{options:function(e){return arguments.length>1?(n.remove(),p(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[v.toArray(arguments)]})):v.isArray(e)||v.isObject(e)?(n.remove(),p(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[e]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof s){var r=new u(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});v.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],a=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),a.apply(r,t)}}),d.addClass(e,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof u){var a=function(e){return v.isNumber(n.__min)&&v.isNumber(n.__max)?(n.remove(),p(t,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):e};n.min=v.compose(a,n.min),n.max=v.compose(a,n.max)}else n instanceof o?(d.bind(e,"click",function(){d.fakeEvent(n.__checkbox,"click")}),d.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof i?(d.bind(e,"click",function(){d.fakeEvent(n.__button,"click")}),d.bind(e,"mouseover",function(){d.addClass(n.__button,"hover")}),d.bind(e,"mouseout",function(){d.removeClass(n.__button,"hover")})):n instanceof l&&(d.addClass(e,"color"),n.updateDisplay=v.compose(function(t){return e.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=v.compose(function(e){return t.getRoot().__preset_select&&n.isModified()&&x(t.getRoot(),!0),e},n.setValue)}(t,g,f),t.__controllers.push(f),f}function m(t,e,n){var r=document.createElement("li");return e&&r.appendChild(e),n?t.__ul.insertBefore(r,params.before):t.__ul.appendChild(r),t.onResize(),r}function b(t,e){var n=t.getRoot(),r=n.__rememberedObjects.indexOf(e.object);if(-1!=r){var a=n.__rememberedObjectIndecesToControllers[r];if(void 0===a&&(a={},n.__rememberedObjectIndecesToControllers[r]=a),a[e.property]=e,n.load&&n.load.remembered){var o,i=n.load.remembered;if(i[t.preset])o=i[t.preset];else{if(!i[P])return;o=i[P]}if(o[r]&&void 0!==o[r][e.property]){var u=o[r][e.property];e.initialValue=u,e.setValue(u)}}}}function _(t,e){return document.location.href+"."+e}function M(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function g(t,e){var n={};return v.each(t.__rememberedObjects,function(r,a){var o={},i=t.__rememberedObjectIndecesToControllers[a];v.each(i,function(t,n){o[n]=e?t.initialValue:t.getValue()}),n[a]=o}),n}function y(t,e,n){var r=document.createElement("option");r.innerHTML=e,r.value=e,t.__preset_select.appendChild(r),n&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function x(t,e){var n=t.__preset_select[t.__preset_select.selectedIndex];n.innerHTML=e?n.value+"*":n.value}function E(t){0!=t.length&&f(function(){E(t)}),v.each(t,function(t){t.updateDisplay()})}t.inject(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");var w,A,P="Default",O=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}(),S=!0,R=!1,T=[],L=function(t){function e(){localStorage.setItem(_(0,"gui"),JSON.stringify(n.getSaveObject()))}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),d.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],t=t||{},t=v.defaults(t,{autoPlace:!0,width:L.DEFAULT_WIDTH}),t=v.defaults(t,{resizable:t.autoPlace,hideable:t.autoPlace}),v.isUndefined(t.load)?t.load={preset:P}:t.preset&&(t.load.preset=t.preset),v.isUndefined(t.parent)&&t.hideable&&T.push(this),t.resizable=v.isUndefined(t.parent)&&t.resizable,t.autoPlace&&v.isUndefined(t.scrollable)&&(t.scrollable=!0);var r=O&&"true"===localStorage.getItem(_(0,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return t.parent}},scrollable:{get:function(){return t.scrollable}},autoPlace:{get:function(){return t.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:t.load.preset},set:function(e){n.parent?n.getRoot().preset=e:t.load.preset=e,function(t){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].value==t.preset&&(t.__preset_select.selectedIndex=e)}(this),n.revert()}},width:{get:function(){return t.width},set:function(e){t.width=e,M(n,e)}},name:{get:function(){return t.name},set:function(e){t.name=e,o&&(o.innerHTML=t.name)}},closed:{get:function(){return t.closed},set:function(e){t.closed=e,t.closed?d.addClass(n.__ul,L.CLASS_CLOSED):d.removeClass(n.__ul,L.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=e?L.TEXT_OPEN:L.TEXT_CLOSED)}},load:{get:function(){return t.load}},useLocalStorage:{get:function(){return r},set:function(t){O&&(r=t,t?d.bind(window,"unload",e):d.unbind(window,"unload",e),localStorage.setItem(_(0,"isLocal"),t))}}}),v.isUndefined(t.parent)){if(t.closed=!1,d.addClass(this.domElement,L.CLASS_MAIN),d.makeSelectable(this.domElement,!1),O&&r){n.useLocalStorage=!0;var a=localStorage.getItem(_(0,"gui"));a&&(t.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=L.TEXT_CLOSED,d.addClass(this.__closeButton,L.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),d.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===t.closed&&(t.closed=!0);var o=document.createTextNode(t.name);d.addClass(o,"controller-name");var i=m(n,o);d.addClass(this.__ul,L.CLASS_CLOSED),d.addClass(i,"title"),d.bind(i,"click",function(t){return t.preventDefault(),n.closed=!n.closed,!1}),t.closed||(this.closed=!1)}t.autoPlace&&(v.isUndefined(t.parent)&&(S&&(A=document.createElement("div"),d.addClass(A,"dg"),d.addClass(A,L.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(A),S=!1),A.appendChild(this.domElement),d.addClass(this.domElement,L.CLASS_AUTO_PLACE)),this.parent||M(n,t.width)),d.bind(window,"resize",function(){n.onResize()}),d.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),d.bind(this.__ul,"transitionend",function(){n.onResize()}),d.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),t.resizable&&function(t){function e(e){return e.preventDefault(),a=e.clientX,d.addClass(t.__closeButton,L.CLASS_DRAG),d.bind(window,"mousemove",n),d.bind(window,"mouseup",r),!1}function n(e){return e.preventDefault(),t.width+=a-e.clientX,t.onResize(),a=e.clientX,!1}function r(){d.removeClass(t.__closeButton,L.CLASS_DRAG),d.unbind(window,"mousemove",n),d.unbind(window,"mouseup",r)}t.__resize_handle=document.createElement("div"),v.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var a;d.bind(t.__resize_handle,"mousedown",e),d.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this);n.getRoot();t.parent||function(){var t=n.getRoot();t.width+=1,v.defer(function(){t.width-=1})}()};return L.toggleHide=function(){R=!R,v.each(T,function(t){t.domElement.style.zIndex=R?-999:999,t.domElement.style.opacity=R?0:1})},L.CLASS_AUTO_PLACE="a",L.CLASS_AUTO_PLACE_CONTAINER="ac",L.CLASS_MAIN="main",L.CLASS_CONTROLLER_ROW="cr",L.CLASS_TOO_TALL="taller-than-window",L.CLASS_CLOSED="closed",L.CLASS_CLOSE_BUTTON="close-button",L.CLASS_DRAG="drag",L.DEFAULT_WIDTH=245,L.TEXT_CLOSED="Close Controls",L.TEXT_OPEN="Open Controls",d.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||L.toggleHide()},!1),v.extend(L.prototype,{add:function(t,e){return p(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return p(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;v.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&A.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw new Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]);var n=new L(e);this.__folders[t]=n;var r=m(this,n.domElement);return d.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=d.getOffset(t.__ul).top,n=0;v.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(n+=d.getHeight(e))}),window.innerHeight-e-20<n?(d.addClass(t.domElement,L.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(d.removeClass(t.domElement,L.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&v.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},remember:function(){if(v.isUndefined(w)&&((w=new h).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;v.each(Array.prototype.slice.call(arguments),function(e){0==t.__rememberedObjects.length&&function(t){var e=t.__save_row=document.createElement("li");d.addClass(t.domElement,"has-save"),t.__ul.insertBefore(e,t.__ul.firstChild),d.addClass(e,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",d.addClass(n,"button gears");var r=document.createElement("span");r.innerHTML="Save",d.addClass(r,"button"),d.addClass(r,"save");var a=document.createElement("span");a.innerHTML="New",d.addClass(a,"button"),d.addClass(a,"save-as");var o=document.createElement("span");o.innerHTML="Revert",d.addClass(o,"button"),d.addClass(o,"revert");var i=t.__preset_select=document.createElement("select");if(t.load&&t.load.remembered?v.each(t.load.remembered,function(e,n){y(t,n,n==t.preset)}):y(t,P,!1),d.bind(i,"change",function(){for(var e=0;e<t.__preset_select.length;e++)t.__preset_select[e].innerHTML=t.__preset_select[e].value;t.preset=this.value}),e.appendChild(i),e.appendChild(n),e.appendChild(r),e.appendChild(a),e.appendChild(o),O){var u=document.getElementById("dg-save-locally"),s=document.getElementById("dg-local-explain");u.style.display="block";var c=document.getElementById("dg-local-storage");"true"===localStorage.getItem(_(0,"isLocal"))&&c.setAttribute("checked","checked");function l(){s.style.display=t.useLocalStorage?"block":"none"}l(),d.bind(c,"change",function(){t.useLocalStorage=!t.useLocalStorage,l()})}var f=document.getElementById("dg-new-constructor");d.bind(f,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||w.hide()}),d.bind(n,"click",function(){f.innerHTML=JSON.stringify(t.getSaveObject(),void 0,2),w.show(),f.focus(),f.select()}),d.bind(r,"click",function(){t.save()}),d.bind(a,"click",function(){var e=prompt("Enter a new preset name.");e&&t.saveAs(e)}),d.bind(o,"click",function(){t.revert()})}(t),-1==t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&M(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var t=this.load;return t.closed=this.closed,this.__rememberedObjects.length>0&&(t.preset=this.preset,t.remembered||(t.remembered={}),t.remembered[this.preset]=g(this)),t.folders={},v.each(this.__folders,function(e,n){t.folders[n]=e.getSaveObject()}),t},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=g(this),x(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[P]=g(this,!0)),this.load.remembered[t]=g(this),this.preset=t,y(this,t,!0)},revert:function(t){v.each(this.__controllers,function(e){this.getRoot().load.remembered?b(t||this.getRoot(),e):e.setValue(e.initialValue)},this),v.each(this.__folders,function(t){t.revert(t)}),t||x(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&E(this.__listening)}}),L}(n.utils.css,0,0,n.controllers.factory=function(t,e,n,r,a,o,i){return function(u,s){var c=u[s];return i.isArray(arguments[2])||i.isObject(arguments[2])?new t(u,s,arguments[2]):i.isNumber(c)?i.isNumber(arguments[2])&&i.isNumber(arguments[3])?new n(u,s,arguments[2],arguments[3]):new e(u,s,{min:arguments[2],max:arguments[3]}):i.isString(c)?new r(u,s):i.isFunction(c)?new a(u,s,""):i.isBoolean(c)?new o(u,s):void 0}}(n.controllers.OptionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.StringController=function(t,e,n){var r=function(t,n){function a(){o.setValue(o.__input.value)}r.superclass.call(this,t,n);var o=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),e.bind(this.__input,"keyup",a),e.bind(this.__input,"change",a),e.bind(this.__input,"blur",function(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}),e.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=t,n.extend(r.prototype,t.prototype,{updateDisplay:function(){return e.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.FunctionController,n.controllers.BooleanController,n.utils.common),n.controllers.Controller,n.controllers.BooleanController,n.controllers.FunctionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.OptionController,n.controllers.ColorController=function(t,e,n,r,a){function o(t,e,n,r){t.style.background="",a.each(u,function(a){t.style.cssText+="background: "+a+"linear-gradient("+e+", "+n+" 0%, "+r+" 100%); "})}var i=function(t,u){function s(t){h(t),e.bind(window,"mousemove",h),e.bind(window,"mouseup",c)}function c(){e.unbind(window,"mousemove",h),e.unbind(window,"mouseup",c)}function l(){var t=r(this.value);!1!==t?(v.__color.__state=t,v.setValue(v.__color.toOriginal())):this.value=v.__color.toString()}function f(){e.unbind(window,"mousemove",d),e.unbind(window,"mouseup",f)}function h(t){t.preventDefault();var n=e.getWidth(v.__saturation_field),r=e.getOffset(v.__saturation_field),a=(t.clientX-r.left+document.body.scrollLeft)/n,o=1-(t.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:o<0&&(o=0),a>1?a=1:a<0&&(a=0),v.__color.v=o,v.__color.s=a,v.setValue(v.__color.toOriginal()),!1}function d(t){t.preventDefault();var n=e.getHeight(v.__hue_field),r=e.getOffset(v.__hue_field),a=1-(t.clientY-r.top+document.body.scrollTop)/n;return a>1?a=1:a<0&&(a=0),v.__color.h=360*a,v.setValue(v.__color.toOriginal()),!1}i.superclass.call(this,t,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var v=this;this.domElement=document.createElement("div"),e.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",e.bind(this.__input,"keydown",function(t){13===t.keyCode&&l.call(this)}),e.bind(this.__input,"blur",l),e.bind(this.__selector,"mousedown",function(t){e.addClass(this,"drag").bind(window,"mouseup",function(t){e.removeClass(v.__selector,"drag")})});var p=document.createElement("div");a.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),a.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),a.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),a.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),a.extend(p.style,{width:"100%",height:"100%",background:"none"}),o(p,"top","rgba(0,0,0,0)","#000"),a.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),function(t){t.style.background="",t.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",t.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",t.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(this.__hue_field),a.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),e.bind(this.__saturation_field,"mousedown",s),e.bind(this.__field_knob,"mousedown",s),e.bind(this.__hue_field,"mousedown",function(t){d(t),e.bind(window,"mousemove",d),e.bind(window,"mouseup",f)}),this.__saturation_field.appendChild(p),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};i.superclass=t,a.extend(i.prototype,t.prototype,{updateDisplay:function(){var t=r(this.getValue());if(!1!==t){var e=!1;a.each(n.COMPONENTS,function(n){if(!a.isUndefined(t[n])&&!a.isUndefined(this.__color.__state[n])&&t[n]!==this.__color.__state[n])return e=!0,{}},this),e&&a.extend(this.__color.__state,t)}a.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var i=this.__color.v<.5||this.__color.s>.5?255:0,u=255-i;a.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+i+","+i+","+i+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),a.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+i+","+i+","+i+")",textShadow:this.__input_textShadow+"rgba("+u+","+u+","+u+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return i}(n.controllers.Controller,n.dom.dom,n.color.Color=function(t,e,n,r){function a(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(i(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(i(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(u(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[e]=t}})}function i(t,n,a){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,a);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function u(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var s=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return s.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(s.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(s.prototype,"r",2),a(s.prototype,"g",1),a(s.prototype,"b",0),o(s.prototype,"h"),o(s.prototype,"s"),o(s.prototype,"v"),Object.defineProperty(s.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(s.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),s}(n.color.interpret,n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,a=t/60-Math.floor(t/60),o=n*(1-e),i=n*(1-a*e),u=n*(1-(1-a)*e),s=[[n,u,o],[i,n,o],[o,n,u],[o,i,n],[u,o,n],[n,o,i]][r];return{r:255*s[0],g:255*s[1],b:255*s[2]}},rgb_to_hsv:function(t,e,n){var r,a,o=Math.min(t,e,n),i=Math.max(t,e,n),u=i-o;return 0==i?{h:NaN,s:0,v:0}:(a=u/i,r=t==i?(e-n)/u:e==i?2+(n-t)/u:4+(t-e)/u,(r/=6)<0&&(r+=1),{h:360*r,s:a,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,r){return r<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common),n.color.interpret,n.utils.common),n.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)},n.dom.CenteredDiv=function(t,e){var n=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),t.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;t.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var e=this,n=function(){e.domElement.style.display="none",e.backgroundElement.style.display="none",t.unbind(e.domElement,"webkitTransitionEnd",n),t.unbind(e.domElement,"transitionend",n),t.unbind(e.domElement,"oTransitionEnd",n)};t.bind(this.domElement,"webkitTransitionEnd",n),t.bind(this.domElement,"transitionend",n),t.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-t.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-t.getHeight(this.domElement)/2+"px"},n}(n.dom.dom,n.utils.common),n.dom.dom,n.utils.common)},function(t,e){var n=t.exports=n||{};n.color=n.color||{},n.utils=n.utils||{},n.utils.common=function(){var t=Array.prototype.forEach,e=Array.prototype.slice;return{BREAK:{},extend:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(e[n])||(t[n]=e[n])},this),t},defaults:function(t){return this.each(e.call(arguments,1),function(e){for(var n in e)this.isUndefined(t[n])&&(t[n]=e[n])},this),t},compose:function(){var t=e.call(arguments);return function(){for(var n=e.call(arguments),r=t.length-1;r>=0;r--)n=[t[r].apply(this,n)];return n[0]}},each:function(e,n,r){if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===e.length+0){for(var a=0,o=e.length;a<o;a++)if(a in e&&n.call(r,e[a],a)===this.BREAK)return}else for(var a in e)if(n.call(r,e[a],a)===this.BREAK)return},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():e.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),n.color.toString=function(t){return function(e){if(1==e.a||t.isUndefined(e.a)){for(var n=e.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"}}(n.utils.common),n.Color=n.color.Color=function(t,e,n,r){function a(t,e,n){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space?this.__state[e]:(i(this,e,n),this.__state[e])},set:function(t){"RGB"!==this.__state.space&&(i(this,e,n),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space?this.__state[e]:(u(this),this.__state[e])},set:function(t){"HSV"!==this.__state.space&&(u(this),this.__state.space="HSV"),this.__state[e]=t}})}function i(t,n,a){if("HEX"===t.__state.space)t.__state[n]=e.component_from_hex(t.__state.hex,a);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,e.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function u(t){var n=e.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=n.h}var s=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return s.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(s.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),a(s.prototype,"r",2),a(s.prototype,"g",1),a(s.prototype,"b",0),o(s.prototype,"h"),o(s.prototype,"s"),o(s.prototype,"v"),Object.defineProperty(s.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(s.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=e.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),s}(n.color.interpret=function(t,e){var n,r,a=[{litmus:e.isString,conversions:{THREE_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString()+e[1].toString()+e[2].toString()+e[2].toString()+e[3].toString()+e[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){var e=t.match(/^#([A-F0-9]{6})$/i);return null!==e&&{space:"HEX",hex:parseInt("0x"+e[1].toString())}},write:t},CSS_RGB:{read:function(t){var e=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3])}},write:t},CSS_RGBA:{read:function(t){var e=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==e&&{space:"RGB",r:parseFloat(e[1]),g:parseFloat(e[2]),b:parseFloat(e[3]),a:parseFloat(e[4])}},write:t}}},{litmus:e.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:e.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:e.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b)&&e.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(e.isNumber(t.r)&&e.isNumber(t.g)&&e.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v)&&e.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(e.isNumber(t.h)&&e.isNumber(t.s)&&e.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){r=!1;var t=arguments.length>1?e.toArray(arguments):arguments[0];return e.each(a,function(a){if(a.litmus(t))return e.each(a.conversions,function(a,o){if(n=a.read(t),!1===r&&!1!==n)return r=n,n.conversionName=o,n.conversion=a,e.BREAK}),e.BREAK}),r}}(n.color.toString,n.utils.common),n.color.math=function(){var t;return{hsv_to_rgb:function(t,e,n){var r=Math.floor(t/60)%6,a=t/60-Math.floor(t/60),o=n*(1-e),i=n*(1-a*e),u=n*(1-(1-a)*e),s=[[n,u,o],[i,n,o],[o,n,u],[o,i,n],[u,o,n],[n,o,i]][r];return{r:255*s[0],g:255*s[1],b:255*s[2]}},rgb_to_hsv:function(t,e,n){var r,a,o=Math.min(t,e,n),i=Math.max(t,e,n),u=i-o;return 0==i?{h:NaN,s:0,v:0}:(a=u/i,r=t==i?(e-n)/u:e==i?2+(n-t)/u:4+(t-e)/u,(r/=6)<0&&(r+=1),{h:360*r,s:a,v:i/255})},rgb_to_hex:function(t,e,n){var r=this.hex_with_component(0,2,t);return r=this.hex_with_component(r,1,e),r=this.hex_with_component(r,0,n)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(e,n,r){return r<<(t=8*n)|e&~(255<<t)}}}(),n.color.toString,n.utils.common)},function(t,e,n){"use strict";(function(t){var n,r,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,u){"object"===o(e)&&"object"===o(t)?t.exports=u():(r=[],void 0!==(a="function"==typeof(n=u)?n.apply(e,r):n)&&(t.exports=a))}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ARRAY_TYPE",function(){return a}),e.setMatrixArrayType=function(t){a=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=1e-6;e.EPSILON=r;var a="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;e.RANDOM=o;var i=Math.PI/180},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1],v=n[2],p=n[3],m=n[4],b=n[5],_=n[6],M=n[7],g=n[8];return t[0]=h*r+d*i+v*c,t[1]=h*a+d*u+v*l,t[2]=h*o+d*s+v*f,t[3]=p*r+m*i+b*c,t[4]=p*a+m*u+b*l,t[5]=p*o+m*s+b*f,t[6]=_*r+M*i+g*c,t[7]=_*a+M*u+g*l,t[8]=_*o+M*s+g*f,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,a,i,u,s,c){var l=new o.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=a,l[5]=i,l[6]=u,l[7]=s,l[8]=c,l},e.set=function(t,e,n,r,a,o,i,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=l*i-u*c,h=-l*o+u*s,d=c*o-i*s,v=n*f+r*h+a*d;return v?(v=1/v,t[0]=f*v,t[1]=(-l*r+a*c)*v,t[2]=(u*r-a*i)*v,t[3]=h*v,t[4]=(l*n-a*s)*v,t[5]=(-u*n+a*o)*v,t[6]=d*v,t[7]=(-c*n+r*s)*v,t[8]=(i*n-r*o)*v,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8];return t[0]=i*l-u*c,t[1]=a*c-r*l,t[2]=r*u-a*i,t[3]=u*s-o*l,t[4]=n*l-a*s,t[5]=a*o-n*u,t[6]=o*c-i*s,t[7]=r*s-n*c,t[8]=n*i-r*o,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8];return e*(c*o-i*s)+n*(-c*a+i*u)+r*(s*a-o*u)},e.multiply=r,e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=h*r+d*i+c,t[7]=h*a+d*u+l,t[8]=h*o+d*s+f,t},e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*s,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*s-h*o,t[6]=c,t[7]=l,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,b=o*s;return t[0]=1-f-v,t[3]=l-b,t[6]=h+m,t[1]=l+b,t[4]=1-c-v,t[7]=d-p,t[2]=h-m,t[5]=d+p,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*u-r*i,M=n*s-a*i,g=n*c-o*i,y=r*s-a*u,x=r*c-o*u,E=a*c-o*s,w=l*p-f*v,A=l*m-h*v,P=l*b-d*v,O=f*m-h*p,S=f*b-d*p,R=h*b-d*m,T=_*R-M*S+g*O+y*P-x*A+E*w;return T?(T=1/T,t[0]=(u*R-s*S+c*O)*T,t[1]=(s*P-i*R-c*A)*T,t[2]=(i*S-u*P+c*w)*T,t[3]=(a*S-r*R-o*O)*T,t[4]=(n*R-a*P+o*A)*T,t[5]=(r*P-n*S-o*w)*T,t[6]=(p*E-m*x+b*y)*T,t[7]=(m*g-v*E-b*M)*T,t[8]=(v*x-p*g+b*_)*T,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=e[0],d=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],M=e[7],g=e[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-v)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-p)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-_)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-M)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-g)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(){var t=new v.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){var r=new v.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function f(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new v.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=i,e.multiply=u,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=c,e.squaredDistance=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},e.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),l=i*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*c+a[0]*l,t[1]=e[1]*u+n[1]*s+r[1]*c+a[1]*l,t[2]=e[2]*u+n[2]*s+r[2]*c+a[2]*l,t},e.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,l=3*o*u,f=3*s*i,h=s*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+a[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+a[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+a[2]*h,t},e.random=function(t,e){e=e||1;var n=2*v.RANDOM()*Math.PI,r=2*v.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t},e.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){var n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);h(n,n),h(r,r);var a=d(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=e[0],i=e[1],u=e[2];return Math.abs(n-o)<=v.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var v=n(0),p=i;e.sub=p;var m=u;e.mul=m;var b=s;e.div=b;var _=c;e.dist=_;var M=l;e.sqrDist=M;var g=a;e.len=g;var y=f;e.sqrLen=y;var x=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}();e.forEach=x},function(t,e,n){function r(){var t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o}function l(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function f(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function h(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){var a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=s,e.squaredDistance=c,e.length=l,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],c=n[3],l=c*r+u*o-s*a,f=c*a+s*r-i*o,h=c*o+i*a-u*r,d=-i*r-u*a-s*o;return t[0]=l*c+d*-i+f*-s-h*-u,t[1]=f*c+d*-u+h*-i-l*-s,t[2]=h*c+d*-s+l*-u-f*-i,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-i)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))};var d=n(0),v=a;e.sub=v;var p=o;e.mul=p;var m=i;e.div=m;var b=s;e.dist=b;var _=c;e.sqrDist=_;var M=l;e.len=M;var g=f;e.sqrLen=g;var y=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();e.forEach=y},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Orbit=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(5));e.Orbit=r.default},function(t,e,n){(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(7),o=n(13),i=.5*-Math.PI,u=function(){function e(n,r){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.onStart=function(t){t.preventDefault(),a.oy=a.ry,a.ox=a.rx,a.startY=t.pageX/a.width,a.startX=t.pageY/a.height,a.isDown=!0},this.onMove=function(t){if(a.isDown){var e=t.pageX/a.width,n=t.pageY/a.height;a.rx=a.ox+-(a.startX-n)*a.rotationSpeed,a.ry=a.oy+(a.startY-e)*a.rotationSpeed,a.rx=(0,o.clamp)(a.rx,.5*-Math.PI,.5*Math.PI)}},this.onEnd=function(){a.isDown=!1},this.onWheel=function(t){t.preventDefault(),a.zoom(-t.deltaY)},this.camera=n,this.domElement=r,this.radius=Math.max(n.position.x,n.position.z),this.rx=Math.atan2(n.position.y,this.radius),this.ry=Math.atan2(n.position.z,n.position.x)+i,this.ox=0,this.oy=0,this.width=t.innerWidth,this.height=t.innerHeight,this.rotationSpeed=5*t.devicePixelRatio,this.zoomMin=.1,this.zoomMax=1/0,this.zoomSpeed=100,this.isDown=!1,this.enable()}return r(e,[{key:"enable",value:function(){this.domElement.addEventListener("mousedown",this.onStart,!1),this.domElement.addEventListener("mousemove",this.onMove,!1),this.domElement.addEventListener("mouseup",this.onEnd,!1),this.domElement.addEventListener("touchstart",this.onStart,!1),this.domElement.addEventListener("touchmove",this.onMove,!1),this.domElement.addEventListener("touchend",this.onEnd,!1),t.addEventListener("wheel",this.onWheel,!1)}},{key:"disable",value:function(){this.domElement.removeEventListener("mousedown",this.onStart,!1),this.domElement.removeEventListener("mousemove",this.onMove,!1),this.domElement.removeEventListener("mouseup",this.onEnd,!1),this.domElement.removeEventListener("touchstart",this.onStart,!1),this.domElement.removeEventListener("touchmove",this.onMove,!1),this.domElement.removeEventListener("touchend",this.onEnd,!1),t.removeEventListener("wheel",this.onWheel,!1)}},{key:"zoom",value:function(t){this.radius+=t/1e3*this.zoomSpeed,this.radius=(0,o.clamp)(this.radius,this.zoomMin,this.zoomMax)}},{key:"update",value:function(){var t=this.radius*Math.sin(this.rx),e=this.radius*Math.cos(this.rx),n=Math.sin(this.ry)*e,r=Math.cos(this.ry)*e;a.vec3.set(this.camera.position.data,n,t,r)}}]),e}();e.default=u}).call(e,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}t.exports=n},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(8),o=n(9),i=n(1),u=n(10),s=n(11),c=n(12),l=n(2),f=n(3);n.d(e,"glMatrix",function(){return r}),n.d(e,"mat2",function(){return a}),n.d(e,"mat2d",function(){return o}),n.d(e,"mat3",function(){return i}),n.d(e,"mat4",function(){return u}),n.d(e,"quat",function(){return s}),n.d(e,"vec2",function(){return c}),n.d(e,"vec3",function(){return l}),n.d(e,"vec4",function(){return f})},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*c+o*l,t[3]=a*c+i*l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,r){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=e[0],s=e[1],c=e[2],l=e[3];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1],f=n[2],h=n[3],d=n[4],v=n[5];return t[0]=r*c+o*l,t[1]=a*c+i*l,t[2]=r*f+o*h,t[3]=a*f+i*h,t[4]=r*d+o*v+u,t[5]=a*d+i*v+s,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,r,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u},e.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=n*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-n*u)*s,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=a*l+i*c,t[2]=r*-c+o*l,t[3]=a*-c+i*l,t[4]=u,t[5]=s,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=a*c,t[2]=o*l,t[3]=i*l,t[4]=u,t[5]=s,t},e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*c+o*l+u,t[5]=a*c+i*l+s,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=e[0],l=e[1],f=e[2],h=e[3],d=e[4],v=e[5];return Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-v)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],v=e[11],p=e[12],m=e[13],b=e[14],_=e[15],M=n[0],g=n[1],y=n[2],x=n[3];return t[0]=M*r+g*u+y*f+x*p,t[1]=M*a+g*s+y*h+x*m,t[2]=M*o+g*c+y*d+x*b,t[3]=M*i+g*l+y*v+x*_,M=n[4],g=n[5],y=n[6],x=n[7],t[4]=M*r+g*u+y*f+x*p,t[5]=M*a+g*s+y*h+x*m,t[6]=M*o+g*c+y*d+x*b,t[7]=M*i+g*l+y*v+x*_,M=n[8],g=n[9],y=n[10],x=n[11],t[8]=M*r+g*u+y*f+x*p,t[9]=M*a+g*s+y*h+x*m,t[10]=M*o+g*c+y*d+x*b,t[11]=M*i+g*l+y*v+x*_,M=n[12],g=n[13],y=n[14],x=n[15],t[12]=M*r+g*u+y*f+x*p,t[13]=M*a+g*s+y*h+x*m,t[14]=M*o+g*c+y*d+x*b,t[15]=M*i+g*l+y*v+x*_,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,r,a,i,u,s,c,l,f,h,d,v,p,m){var b=new o.ARRAY_TYPE(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=a,b[5]=i,b[6]=u,b[7]=s,b[8]=c,b[9]=l,b[10]=f,b[11]=h,b[12]=d,b[13]=v,b[14]=p,b[15]=m,b},e.set=function(t,e,n,r,a,o,i,u,s,c,l,f,h,d,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=d,t[13]=v,t[14]=p,t[15]=m,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15],_=n*u-r*i,M=n*s-a*i,g=n*c-o*i,y=r*s-a*u,x=r*c-o*u,E=a*c-o*s,w=l*p-f*v,A=l*m-h*v,P=l*b-d*v,O=f*m-h*p,S=f*b-d*p,R=h*b-d*m,T=_*R-M*S+g*O+y*P-x*A+E*w;return T?(T=1/T,t[0]=(u*R-s*S+c*O)*T,t[1]=(a*S-r*R-o*O)*T,t[2]=(p*E-m*x+b*y)*T,t[3]=(h*x-f*E-d*y)*T,t[4]=(s*P-i*R-c*A)*T,t[5]=(n*R-a*P+o*A)*T,t[6]=(m*g-v*E-b*M)*T,t[7]=(l*E-h*g+d*M)*T,t[8]=(i*S-u*P+c*w)*T,t[9]=(r*P-n*S-o*w)*T,t[10]=(v*x-p*g+b*_)*T,t[11]=(f*g-l*x-d*_)*T,t[12]=(u*A-i*O-s*w)*T,t[13]=(n*O-r*A+a*w)*T,t[14]=(p*M-v*y-m*_)*T,t[15]=(l*y-f*M+h*_)*T,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],c=e[7],l=e[8],f=e[9],h=e[10],d=e[11],v=e[12],p=e[13],m=e[14],b=e[15];return t[0]=u*(h*b-d*m)-f*(s*b-c*m)+p*(s*d-c*h),t[1]=-(r*(h*b-d*m)-f*(a*b-o*m)+p*(a*d-o*h)),t[2]=r*(s*b-c*m)-u*(a*b-o*m)+p*(a*c-o*s),t[3]=-(r*(s*d-c*h)-u*(a*d-o*h)+f*(a*c-o*s)),t[4]=-(i*(h*b-d*m)-l*(s*b-c*m)+v*(s*d-c*h)),t[5]=n*(h*b-d*m)-l*(a*b-o*m)+v*(a*d-o*h),t[6]=-(n*(s*b-c*m)-i*(a*b-o*m)+v*(a*c-o*s)),t[7]=n*(s*d-c*h)-i*(a*d-o*h)+l*(a*c-o*s),t[8]=i*(f*b-d*p)-l*(u*b-c*p)+v*(u*d-c*f),t[9]=-(n*(f*b-d*p)-l*(r*b-o*p)+v*(r*d-o*f)),t[10]=n*(u*b-c*p)-i*(r*b-o*p)+v*(r*c-o*u),t[11]=-(n*(u*d-c*f)-i*(r*d-o*f)+l*(r*c-o*u)),t[12]=-(i*(f*m-h*p)-l*(u*m-s*p)+v*(u*h-s*f)),t[13]=n*(f*m-h*p)-l*(r*m-a*p)+v*(r*h-a*f),t[14]=-(n*(u*m-s*p)-i*(r*m-a*p)+v*(r*s-a*u)),t[15]=n*(u*h-s*f)-i*(r*h-a*f)+l*(r*s-a*u),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],l=t[9],f=t[10],h=t[11],d=t[12],v=t[13],p=t[14],m=t[15];return(e*i-n*o)*(f*m-h*p)-(e*u-r*o)*(l*m-h*v)+(e*s-a*o)*(l*p-f*v)+(n*u-r*i)*(c*m-h*d)-(n*s-a*i)*(c*p-f*d)+(r*s-a*u)*(c*v-l*d)},e.multiply=r,e.translate=function(t,e,n){var r=n[0],a=n[1],o=n[2],i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,b=void 0;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*o+e[12],t[13]=e[1]*r+e[5]*a+e[9]*o+e[13],t[14]=e[2]*r+e[6]*a+e[10]*o+e[14],t[15]=e[3]*r+e[7]*a+e[11]*o+e[15]):(i=e[0],u=e[1],s=e[2],c=e[3],l=e[4],f=e[5],h=e[6],d=e[7],v=e[8],p=e[9],m=e[10],b=e[11],t[0]=i,t[1]=u,t[2]=s,t[3]=c,t[4]=l,t[5]=f,t[6]=h,t[7]=d,t[8]=v,t[9]=p,t[10]=m,t[11]=b,t[12]=i*r+l*a+v*o+e[12],t[13]=u*r+f*a+p*o+e[13],t[14]=s*r+h*a+m*o+e[14],t[15]=c*r+d*a+b*o+e[15]),t},e.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,r){var a=r[0],i=r[1],u=r[2],s=Math.sqrt(a*a+i*i+u*u),c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=void 0,m=void 0,b=void 0,_=void 0,M=void 0,g=void 0,y=void 0,x=void 0,E=void 0,w=void 0,A=void 0,P=void 0,O=void 0,S=void 0,R=void 0,T=void 0,L=void 0,I=void 0;return Math.abs(s)<o.EPSILON?null:(s=1/s,a*=s,i*=s,u*=s,c=Math.sin(n),l=Math.cos(n),f=1-l,h=e[0],d=e[1],v=e[2],p=e[3],m=e[4],b=e[5],_=e[6],M=e[7],g=e[8],y=e[9],x=e[10],E=e[11],w=a*a*f+l,A=i*a*f+u*c,P=u*a*f-i*c,O=a*i*f-u*c,S=i*i*f+l,R=u*i*f+a*c,T=a*u*f+i*c,L=i*u*f-a*c,I=u*u*f+l,t[0]=h*w+m*A+g*P,t[1]=d*w+b*A+y*P,t[2]=v*w+_*A+x*P,t[3]=p*w+M*A+E*P,t[4]=h*O+m*S+g*R,t[5]=d*O+b*S+y*R,t[6]=v*O+_*S+x*R,t[7]=p*O+M*S+E*R,t[8]=h*T+m*L+g*I,t[9]=d*T+b*L+y*I,t[10]=v*T+_*L+x*I,t[11]=p*T+M*L+E*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],s=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+c*r,t[5]=i*a+l*r,t[6]=u*a+f*r,t[7]=s*a+h*r,t[8]=c*a-o*r,t[9]=l*a-i*r,t[10]=f*a-u*r,t[11]=h*a-s*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-c*r,t[1]=i*a-l*r,t[2]=u*a-f*r,t[3]=s*a-h*r,t[8]=o*r+c*a,t[9]=i*r+l*a,t[10]=u*r+f*a,t[11]=s*r+h*a,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+c*r,t[1]=i*a+l*r,t[2]=u*a+f*r,t[3]=s*a+h*r,t[4]=c*a-o*r,t[5]=l*a-i*r,t[6]=f*a-u*r,t[7]=h*a-s*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var r=n[0],a=n[1],i=n[2],u=Math.sqrt(r*r+a*a+i*i),s=void 0,c=void 0,l=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,r*=u,a*=u,i*=u,s=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=r*r*l+c,t[1]=a*r*l+i*s,t[2]=i*r*l-a*s,t[3]=0,t[4]=r*a*l-i*s,t[5]=a*a*l+c,t[6]=i*a*l+r*s,t[7]=0,t[8]=r*i*l+a*s,t[9]=a*i*l-r*s,t[10]=i*i*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,s=a+a,c=o+o,l=r*u,f=r*s,h=r*c,d=a*s,v=a*c,p=o*c,m=i*u,b=i*s,_=i*c;return t[0]=1-(d+p),t[1]=f+_,t[2]=h-b,t[3]=0,t[4]=f-_,t[5]=1-(l+p),t[6]=v+m,t[7]=0,t[8]=h+b,t[9]=v-m,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[4],i=e[5],u=e[6],s=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+c*c+l*l),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,c=o+o,l=i+i,f=a*s,h=a*c,d=a*l,v=o*c,p=o*l,m=i*l,b=u*s,_=u*c,M=u*l,g=r[0],y=r[1],x=r[2];return t[0]=(1-(v+m))*g,t[1]=(h+M)*g,t[2]=(d-_)*g,t[3]=0,t[4]=(h-M)*y,t[5]=(1-(f+m))*y,t[6]=(p+b)*y,t[7]=0,t[8]=(d+_)*x,t[9]=(p-b)*x,t[10]=(1-(f+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],s=e[3],c=o+o,l=i+i,f=u+u,h=o*c,d=o*l,v=o*f,p=i*l,m=i*f,b=u*f,_=s*c,M=s*l,g=s*f,y=r[0],x=r[1],E=r[2],w=a[0],A=a[1],P=a[2];return t[0]=(1-(p+b))*y,t[1]=(d+g)*y,t[2]=(v-M)*y,t[3]=0,t[4]=(d-g)*x,t[5]=(1-(h+b))*x,t[6]=(m+_)*x,t[7]=0,t[8]=(v+M)*E,t[9]=(m-_)*E,t[10]=(1-(h+p))*E,t[11]=0,t[12]=n[0]+w-(t[0]*w+t[4]*A+t[8]*P),t[13]=n[1]+A-(t[1]*w+t[5]*A+t[9]*P),t[14]=n[2]+P-(t[2]*w+t[6]*A+t[10]*P),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,c=n*i,l=r*i,f=r*u,h=a*i,d=a*u,v=a*s,p=o*i,m=o*u,b=o*s;return t[0]=1-f-v,t[1]=l+b,t[2]=h-m,t[3]=0,t[4]=l-b,t[5]=1-c-v,t[6]=d+p,t[7]=0,t[8]=h+m,t[9]=d-p,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),s=1/(a-r),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),s=1/(r-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*s,t[14]=(i+o)*c,t[15]=1,t},e.lookAt=function(t,e,n,r){var a=void 0,i=void 0,u=void 0,s=void 0,c=void 0,l=void 0,f=void 0,h=void 0,d=void 0,v=void 0,p=e[0],m=e[1],b=e[2],_=r[0],M=r[1],g=r[2],y=n[0],x=n[1],E=n[2];return Math.abs(p-y)<o.EPSILON&&Math.abs(m-x)<o.EPSILON&&Math.abs(b-E)<o.EPSILON?mat4.identity(t):(f=p-y,h=m-x,d=b-E,v=1/Math.sqrt(f*f+h*h+d*d),f*=v,h*=v,d*=v,a=M*d-g*h,i=g*f-_*d,u=_*h-M*f,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),s=h*u-d*i,c=d*a-f*u,l=f*i-h*a,(v=Math.sqrt(s*s+c*c+l*l))?(s*=v=1/v,c*=v,l*=v):(s=0,c=0,l=0),t[0]=a,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=h,t[7]=0,t[8]=u,t[9]=l,t[10]=d,t[11]=0,t[12]=-(a*p+i*m+u*b),t[13]=-(s*p+c*m+l*b),t[14]=-(f*p+h*m+d*b),t[15]=1,t)},e.targetTo=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=r[0],s=r[1],c=r[2],l=a-n[0],f=o-n[1],h=i-n[2],d=l*l+f*f+h*h;d>0&&(l*=d=1/Math.sqrt(d),f*=d,h*=d);var v=s*h-c*f,p=c*l-u*h,m=u*f-s*l;return t[0]=v,t[1]=p,t[2]=m,t[3]=0,t[4]=f*m-h*p,t[5]=h*v-l*m,t[6]=l*p-f*v,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],v=t[11],p=t[12],m=t[13],b=t[14],_=t[15],M=e[0],g=e[1],y=e[2],x=e[3],E=e[4],w=e[5],A=e[6],P=e[7],O=e[8],S=e[9],R=e[10],T=e[11],L=e[12],I=e[13],C=e[14],N=e[15];return Math.abs(n-M)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(r-g)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(a-y)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(i-x)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-E)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-w)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-A)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-P)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(f-O)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-S)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(d-R)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(v-T)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(p-L)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(L))&&Math.abs(m-I)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(b-C)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(C))&&Math.abs(_-N)<=o.EPSILON*Math.max(1,Math.abs(_),Math.abs(N))};var o=n(0),i=r;e.mul=i;var u=a;e.sub=u},function(t,e,n){function r(){var t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function o(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],c=n[2],l=n[3];return t[0]=r*l+i*u+a*c-o*s,t[1]=a*l+i*s+o*u-r*c,t[2]=o*l+i*c+r*s-a*u,t[3]=i*l-r*u-a*s-o*c,t}function i(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=n[0],c=n[1],l=n[2],f=n[3],h=void 0,d=void 0,v=void 0,p=void 0,m=void 0;return(d=a*s+o*c+i*l+u*f)<0&&(d=-d,s=-s,c=-c,l=-l,f=-f),1-d>1e-6?(h=Math.acos(d),v=Math.sin(h),p=Math.sin((1-r)*h)/v,m=Math.sin(r*h)/v):(p=1-r,m=r),t[0]=p*a+m*s,t[1]=p*o+m*c,t[2]=p*i+m*l,t[3]=p*u+m*f,t}function u(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+a]+e[3*a+o])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=a,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=o,e.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},e.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},e.slerp=i,e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=u,e.fromEuler=function(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var o=Math.sin(e),i=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*s*l-i*u*c,t[1]=i*u*l+o*s*c,t[2]=i*s*c-o*u*l,t[3]=i*s*l+o*u*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=n(0),c=n(1),l=n(2),f=n(3),h=f.clone;e.clone=h;var d=f.fromValues;e.fromValues=d;var v=f.copy;e.copy=v;var p=f.set;e.set=p;var m=f.add;e.add=m;var b=o;e.mul=b;var _=f.scale;e.scale=_;var M=f.dot;e.dot=M;var g=f.lerp;e.lerp=g;var y=f.length;e.length=y;var x=y;e.len=x;var E=f.squaredLength;e.squaredLength=E;var w=E;e.sqrLen=w;var A=f.normalize;e.normalize=A;var P=f.exactEquals;e.exactEquals=P;var O=f.equals;e.equals=O;var S=function(){var t=l.create(),e=l.fromValues(1,0,0),n=l.fromValues(0,1,0);return function(r,o,i){var u=l.dot(o,i);return u<-.999999?(l.cross(t,e,o),l.len(t)<1e-6&&l.cross(t,n,o),l.normalize(t,t),a(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(l.cross(t,o,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,A(r,r))}}();e.rotationTo=S;var R=function(){var t=r(),e=r();return function(n,r,a,o,u,s){return i(t,r,u,s),i(e,a,o,s),i(n,t,e,2*s*(1-s)),n}}();e.sqlerp=R;var T=function(){var t=c.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],A(e,u(e,t))}}();e.setAxes=T},function(t,e,n){function r(){var t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function c(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function l(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new f.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=s,e.length=c,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},e.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var f=n(0),h=c;e.len=h;var d=a;e.sub=d;var v=o;e.mul=v;var p=i;e.div=p;var m=u;e.dist=m;var b=s;e.sqrDist=b;var _=l;e.sqrLen=_;var M=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,s=void 0;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}();e.forEach=M},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=function(t,e,n){return Math.max(Math.min(t,n),e)}}])})}).call(e,n(1)(t))}]);